/*
 Copyright 2012 Klaviyo, Inc. http://www.klaviyo.com/
*/
(function(w){Array.prototype.toJSON&&delete Array.prototype.toJSON;var M;M||(M={});(function(){function a(a){return 10>a?"0"+a:a}function b(a){e.lastIndex=0;return e.test(a)?'"'+a.replace(e,function(a){var b=i[a];return"string"===typeof b?b:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'}function c(a,d){var e,i,k,u,o=h,m,A=d[a];A&&"object"===typeof A&&"function"===typeof A.toJSON&&(A=A.toJSON(a));"function"===typeof n&&(A=n.call(d,a,A));switch(typeof A){case "string":return b(A);
case "number":return isFinite(A)?""+A:"null";case "boolean":case "null":return""+A;case "object":if(!A)return"null";h+=f;m=[];if("[object Array]"===Object.prototype.toString.apply(A)){u=A.length;for(e=0;e<u;e+=1)m[e]=c(e,A)||"null";k=0===m.length?"[]":h?"[\n"+h+m.join(",\n"+h)+"\n"+o+"]":"["+m.join(",")+"]";h=o;return k}if(n&&"object"===typeof n){u=n.length;for(e=0;e<u;e+=1)"string"===typeof n[e]&&(i=n[e],(k=c(i,A))&&m.push(b(i)+(h?": ":":")+k))}else for(i in A)Object.prototype.hasOwnProperty.call(A,
i)&&(k=c(i,A))&&m.push(b(i)+(h?": ":":")+k);k=0===m.length?"{}":h?"{\n"+h+m.join(",\n"+h)+"\n"+o+"}":"{"+m.join(",")+"}";h=o;return k}}"function"!==typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+a(this.getUTCMonth()+1)+"-"+a(this.getUTCDate())+"T"+a(this.getUTCHours())+":"+a(this.getUTCMinutes())+":"+a(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()});
var d=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,e=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,h,f,i={"\u0008":"\\b","\t":"\\t","\n":"\\n","\u000c":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},n;"function"!==typeof M.stringify&&(M.stringify=function(a,b,d){var e;f=h="";if("number"===typeof d)for(e=0;e<d;e+=1)f+=" ";else"string"===typeof d&&(f=d);if((n=b)&&"function"!==
typeof b&&("object"!==typeof b||"number"!==typeof b.length))throw Error("JSON.stringify");return c("",{"":a})});"function"!==typeof M.parse&&(M.parse=function(a,b){function c(a,d){var f,e,h=a[d];if(h&&"object"===typeof h)for(f in h)Object.prototype.hasOwnProperty.call(h,f)&&(e=c(h,f),void 0!==e?h[f]=e:delete h[f]);return b.call(a,d,h)}var f,a=""+a;d.lastIndex=0;d.test(a)&&(a=a.replace(d,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)}));if(/^[\],:{}\s]*$/.test(a.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,
"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return f=eval("("+a+")"),"function"===typeof b?c({"":f},""):f;throw new SyntaxError("JSON.parse");})})();var Q={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(a){for(var b="",c,d,e,h,f,i,n=0,a=Q._utf8_encode(a);n<a.length;)c=a.charCodeAt(n++),d=a.charCodeAt(n++),e=a.charCodeAt(n++),h=c>>2,c=(c&3)<<4|d>>4,f=(d&15)<<2|e>>6,i=e&63,isNaN(d)?
f=i=64:isNaN(e)&&(i=64),b=b+this._keyStr.charAt(h)+this._keyStr.charAt(c)+this._keyStr.charAt(f)+this._keyStr.charAt(i);return b},decode:function(a){for(var b="",c,d,e,h,f,i=0,a=a.replace(/[^A-Za-z0-9\+\/\=]/g,"");i<a.length;)c=this._keyStr.indexOf(a.charAt(i++)),d=this._keyStr.indexOf(a.charAt(i++)),h=this._keyStr.indexOf(a.charAt(i++)),f=this._keyStr.indexOf(a.charAt(i++)),c=c<<2|d>>4,d=(d&15)<<4|h>>2,e=(h&3)<<6|f,b+=String.fromCharCode(c),64!=h&&(b+=String.fromCharCode(d)),64!=f&&(b+=String.fromCharCode(e));
return b=Q._utf8_decode(b)},_utf8_encode:function(a){for(var a=a.replace(/\r\n/g,"\n"),b="",c=0;c<a.length;c++){var d=a.charCodeAt(c);128>d?b+=String.fromCharCode(d):(127<d&&2048>d?b+=String.fromCharCode(d>>6|192):(b+=String.fromCharCode(d>>12|224),b+=String.fromCharCode(d>>6&63|128)),b+=String.fromCharCode(d&63|128))}return b},_utf8_decode:function(a){for(var b="",c=0,d=c1=c2=0;c<a.length;)d=a.charCodeAt(c),128>d?(b+=String.fromCharCode(d),c++):191<d&&224>d?(c2=a.charCodeAt(c+1),b+=String.fromCharCode((d&
31)<<6|c2&63),c+=2):(c2=a.charCodeAt(c+1),c3=a.charCodeAt(c+2),b+=String.fromCharCode((d&15)<<12|(c2&63)<<6|c3&63),c+=3);return b}};(function(a,b){function c(a){var b=x[a]={},c,g,a=a.split(/\s+/);for(c=0,g=a.length;c<g;c++)b[a[c]]=!0;return b}function d(a,H,c){if(c===b&&1===a.nodeType)if(c="data-"+H.replace(G,"-$1").toLowerCase(),c=a.getAttribute(c),"string"===typeof c){try{c="true"===c?!0:"false"===c?!1:"null"===c?null:g.isNumeric(c)?parseFloat(c):E.test(c)?g.parseJSON(c):c}catch(d){}g.data(a,H,
c)}else c=b;return c}function e(a){for(var b in a)if(!("data"===b&&g.isEmptyObject(a[b]))&&"toJSON"!==b)return!1;return!0}function h(a,b,c){var d=b+"defer",f=b+"queue",e=b+"mark",h=g._data(a,d);h&&("queue"===c||!g._data(a,f))&&("mark"===c||!g._data(a,e))&&setTimeout(function(){!g._data(a,f)&&!g._data(a,e)&&(g.removeData(a,d,!0),h.fire())},0)}function f(){return!1}function i(){return!0}function n(a,b,c){b=b||0;if(g.isFunction(b))return g.grep(a,function(a,p){return!!b.call(a,p,a)===c});if(b.nodeType)return g.grep(a,
function(a){return a===b===c});if("string"===typeof b){var d=g.grep(a,function(a){return 1===a.nodeType});if(sa.test(b))return g.filter(b,d,!c);b=g.filter(b,d)}return g.grep(a,function(a){return 0<=g.inArray(a,b)===c})}function k(a){var b=Ma.split("|"),a=a.createDocumentFragment();if(a.createElement)for(;b.length;)a.createElement(b.pop());return a}function C(a,b){if(1===b.nodeType&&g.hasData(a)){var c,d,f;d=g._data(a);var e=g._data(b,d),h=d.events;if(h)for(c in delete e.handle,e.events={},h)for(d=
0,f=h[c].length;d<f;d++)g.event.add(b,c+(h[c][d].namespace?".":"")+h[c][d].namespace,h[c][d],h[c][d].data);e.data&&(e.data=g.extend({},e.data))}}function s(a,b){var c;if(1===b.nodeType){b.clearAttributes&&b.clearAttributes();b.mergeAttributes&&b.mergeAttributes(a);c=b.nodeName.toLowerCase();if("object"===c)b.outerHTML=a.outerHTML;else if("input"===c&&("checkbox"===a.type||"radio"===a.type))a.checked&&(b.defaultChecked=b.checked=a.checked),b.value!==a.value&&(b.value=a.value);else if("option"===c)b.selected=
a.defaultSelected;else if("input"===c||"textarea"===c)b.defaultValue=a.defaultValue;b.removeAttribute(g.expando)}}function r(a){return"undefined"!==typeof a.getElementsByTagName?a.getElementsByTagName("*"):"undefined"!==typeof a.querySelectorAll?a.querySelectorAll("*"):[]}function J(a){if("checkbox"===a.type||"radio"===a.type)a.defaultChecked=a.checked}function u(a){var b=(a.nodeName||"").toLowerCase();"input"===b?J(a):"script"!==b&&"undefined"!==typeof a.getElementsByTagName&&g.grep(a.getElementsByTagName("input"),
J)}function o(a,b){b.src?g.ajax({url:b.src,async:!1,dataType:"script"}):g.globalEval((b.text||b.textContent||b.innerHTML||"").replace(Ka,"/*$0*/"));b.parentNode&&b.parentNode.removeChild(b)}function m(a,b,c){var d="width"===b?a.offsetWidth:a.offsetHeight,f="width"===b?ib:jb,e=0,h=f.length;if(0<d){if("border"!==c)for(;e<h;e++)c||(d-=parseFloat(g.css(a,"padding"+f[e]))||0),d="margin"===c?d+(parseFloat(g.css(a,c+f[e]))||0):d-(parseFloat(g.css(a,"border"+f[e]+"Width"))||0);return d+"px"}d=ba(a,b,b);if(0>
d||null==d)d=a.style[b]||0;d=parseFloat(d)||0;if(c)for(;e<h;e++)d+=parseFloat(g.css(a,"padding"+f[e]))||0,"padding"!==c&&(d+=parseFloat(g.css(a,"border"+f[e]+"Width"))||0),"margin"===c&&(d+=parseFloat(g.css(a,c+f[e]))||0);return d+"px"}function A(a){return function(b,c){"string"!==typeof b&&(c=b,b="*");if(g.isFunction(c))for(var d=b.toLowerCase().split(Na),f=0,e=d.length,h,i;f<e;f++)h=d[f],(i=/^\+/.test(h))&&(h=h.substr(1)||"*"),h=a[h]=a[h]||[],h[i?"unshift":"push"](c)}}function w(a,c,d,g,f,e){f=
f||c.dataTypes[0];e=e||{};e[f]=!0;for(var f=a[f],h=0,i=f?f.length:0,j=a===va,l;h<i&&(j||!l);h++)l=f[h](c,d,g),"string"===typeof l&&(!j||e[l]?l=b:(c.dataTypes.unshift(l),l=w(a,c,d,g,l,e)));if((j||!l)&&!e["*"])l=w(a,c,d,g,"*",e);return l}function y(a,c){var d,f,e=g.ajaxSettings.flatOptions||{};for(d in c)c[d]!==b&&((e[d]?a:f||(f={}))[d]=c[d]);f&&g.extend(!0,a,f)}function l(a,b,c,d){if(g.isArray(b))g.each(b,function(b,H){c||kb.test(a)?d(a,H):l(a+"["+("object"===typeof H||g.isArray(H)?b:"")+"]",H,c,d)});
else if(!c&&null!=b&&"object"===typeof b)for(var f in b)l(a+"["+f+"]",b[f],c,d);else d(a,b)}function j(){try{return new a.XMLHttpRequest}catch(b){}}function D(){setTimeout(z,0);return la=g.now()}function z(){la=b}function B(a,b){var c={};g.each(Oa.concat.apply([],Oa.slice(0,b)),function(){c[this]=a});return c}function W(a){if(!wa[a]){var b=v.body,c=g("<"+a+">").appendTo(b),d=c.css("display");c.remove();if("none"===d||""===d){S||(S=v.createElement("iframe"),S.frameBorder=S.width=S.height=0);b.appendChild(S);
if(!ca||!S.createElement)ca=(S.contentWindow||S.contentDocument).document,ca.write(("CSS1Compat"===v.compatMode?"<!doctype html>":"")+"<html><body>"),ca.close();c=ca.createElement(a);ca.body.appendChild(c);d=g.css(c,"display");b.removeChild(S)}wa[a]=d}return wa[a]}function Y(a){return g.isWindow(a)?a:9===a.nodeType?a.defaultView||a.parentWindow:!1}var v=a.document,O=a.navigator,K=a.location,g=function(){function p(){if(!c.isReady){try{v.documentElement.doScroll("left")}catch(a){setTimeout(p,1);return}c.ready()}}
var c=function(a,b){return new c.fn.init(a,b,f)},d=a.jQuery,g=a.$,f,e=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,h=/\S/,i=/^\s+/,j=/\s+$/,l=/^<(\w+)\s*\/?>(?:<\/\1>)?$/,x=/^[\],:{}\s]*$/,n=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,k=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,t=/(?:^|:|,)(?:\s*\[)+/g,q=/(webkit)[ \/]([\w.]+)/,D=/(opera)(?:.*version)?[ \/]([\w.]+)/,z=/(msie) ([\w.]+)/,E=/(mozilla)(?:.*? rv:([\w.]+))?/,s=/-([a-z]|[0-9])/ig,C=/^-ms-/,G=function(a,b){return(b+"").toUpperCase()},
B=O.userAgent,ma,da,lb=Object.prototype.toString,xa=Object.prototype.hasOwnProperty,ya=Array.prototype.push,ha=Array.prototype.slice,A=String.prototype.trim,r=Array.prototype.indexOf,u={};c.fn=c.prototype={constructor:c,init:function(a,p,d){var g;if(!a)return this;if(a.nodeType)return this.context=this[0]=a,this.length=1,this;if("body"===a&&!p&&v.body)return this.context=v,this[0]=v.body,this.selector=a,this.length=1,this;if("string"===typeof a){if((g="<"===a.charAt(0)&&">"===a.charAt(a.length-1)&&
3<=a.length?[null,a,null]:e.exec(a))&&(g[1]||!p)){if(g[1])return d=(p=p instanceof c?p[0]:p)?p.ownerDocument||p:v,(a=l.exec(a))?c.isPlainObject(p)?(a=[v.createElement(a[1])],c.fn.attr.call(a,p,!0)):a=[d.createElement(a[1])]:(a=c.buildFragment([g[1]],[d]),a=(a.cacheable?c.clone(a.fragment):a.fragment).childNodes),c.merge(this,a);if((p=v.getElementById(g[2]))&&p.parentNode){if(p.id!==g[2])return d.find(a);this.length=1;this[0]=p}this.context=v;this.selector=a;return this}return!p||p.jquery?(p||d).find(a):
this.constructor(p).find(a)}if(c.isFunction(a))return d.ready(a);a.selector!==b&&(this.selector=a.selector,this.context=a.context);return c.makeArray(a,this)},selector:"",jquery:"1.7.1",length:0,size:function(){return this.length},toArray:function(){return ha.call(this,0)},get:function(a){return null==a?this.toArray():0>a?this[this.length+a]:this[a]},pushStack:function(a,b,p){var d=this.constructor();c.isArray(a)?ya.apply(d,a):c.merge(d,a);d.prevObject=this;d.context=this.context;"find"===b?d.selector=
this.selector+(this.selector?" ":"")+p:b&&(d.selector=this.selector+"."+b+"("+p+")");return d},each:function(a,b){return c.each(this,a,b)},ready:function(a){c.bindReady();ma.add(a);return this},eq:function(a){a=+a;return-1===a?this.slice(a):this.slice(a,a+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},slice:function(){return this.pushStack(ha.apply(this,arguments),"slice",ha.call(arguments).join(","))},map:function(a){return this.pushStack(c.map(this,function(b,c){return a.call(b,
c,b)}))},end:function(){return this.prevObject||this.constructor(null)},push:ya,sort:[].sort,splice:[].splice};c.fn.init.prototype=c.fn;c.extend=c.fn.extend=function(){var a,p,d,g,f,e=arguments[0]||{},I=1,h=arguments.length,F=!1;"boolean"===typeof e&&(F=e,e=arguments[1]||{},I=2);"object"!==typeof e&&!c.isFunction(e)&&(e={});h===I&&(e=this,--I);for(;I<h;I++)if(null!=(a=arguments[I]))for(p in a)d=e[p],g=a[p],e!==g&&(F&&g&&(c.isPlainObject(g)||(f=c.isArray(g)))?(f?(f=!1,d=d&&c.isArray(d)?d:[]):d=d&&
c.isPlainObject(d)?d:{},e[p]=c.extend(F,d,g)):g!==b&&(e[p]=g));return e};c.extend({noConflict:function(b){a.$===c&&(a.$=g);b&&a.jQuery===c&&(a.jQuery=d);return c},isReady:!1,readyWait:1,holdReady:function(a){a?c.readyWait++:c.ready(!0)},ready:function(a){if(!0===a&&!--c.readyWait||!0!==a&&!c.isReady){if(!v.body)return setTimeout(c.ready,1);c.isReady=!0;!0!==a&&0<--c.readyWait||(ma.fireWith(v,[c]),c.fn.trigger&&c(v).trigger("ready").off("ready"))}},bindReady:function(){if(!ma){ma=c.Callbacks("once memory");
if("complete"===v.readyState)return setTimeout(c.ready,1);if(v.addEventListener)v.addEventListener("DOMContentLoaded",da,!1),a.addEventListener("load",c.ready,!1);else if(v.attachEvent){v.attachEvent("onreadystatechange",da);a.attachEvent("onload",c.ready);var b=!1;try{b=null==a.frameElement}catch(d){}v.documentElement.doScroll&&b&&p()}}},isFunction:function(a){return"function"===c.type(a)},isArray:Array.isArray||function(a){return"array"===c.type(a)},isWindow:function(a){return a&&"object"===typeof a&&
"setInterval"in a},isNumeric:function(a){return!isNaN(parseFloat(a))&&isFinite(a)},type:function(a){return null==a?""+a:u[lb.call(a)]||"object"},isPlainObject:function(a){if(!a||"object"!==c.type(a)||a.nodeType||c.isWindow(a))return!1;try{if(a.constructor&&!xa.call(a,"constructor")&&!xa.call(a.constructor.prototype,"isPrototypeOf"))return!1}catch(p){return!1}for(var d in a);return d===b||xa.call(a,d)},isEmptyObject:function(a){for(var b in a)return!1;return!0},error:function(a){throw Error(a);},parseJSON:function(b){if("string"!==
typeof b||!b)return null;b=c.trim(b);if(a.JSON&&a.JSON.parse)return a.JSON.parse(b);if(x.test(b.replace(n,"@").replace(k,"]").replace(t,"")))return(new Function("return "+b))();c.error("Invalid JSON: "+b)},parseXML:function(p){var d,g;try{a.DOMParser?(g=new DOMParser,d=g.parseFromString(p,"text/xml")):(d=new ActiveXObject("Microsoft.XMLDOM"),d.async="false",d.loadXML(p))}catch(f){d=b}(!d||!d.documentElement||d.getElementsByTagName("parsererror").length)&&c.error("Invalid XML: "+p);return d},noop:function(){},
globalEval:function(b){b&&h.test(b)&&(a.execScript||function(b){a.eval.call(a,b)})(b)},camelCase:function(a){return a.replace(C,"ms-").replace(s,G)},nodeName:function(a,b){return a.nodeName&&a.nodeName.toUpperCase()===b.toUpperCase()},each:function(a,p,d){var g,f=0,e=a.length,I=e===b||c.isFunction(a);if(d)if(I)for(g in a){if(!1===p.apply(a[g],d))break}else for(;f<e&&!(!1===p.apply(a[f++],d)););else if(I)for(g in a){if(!1===p.call(a[g],g,a[g]))break}else for(;f<e&&!(!1===p.call(a[f],f,a[f++])););return a},
trim:A?function(a){return null==a?"":A.call(a)}:function(a){return null==a?"":a.toString().replace(i,"").replace(j,"")},makeArray:function(a,b){var p=b||[];if(null!=a){var d=c.type(a);null==a.length||"string"===d||"function"===d||"regexp"===d||c.isWindow(a)?ya.call(p,a):c.merge(p,a)}return p},inArray:function(a,b,c){var p;if(b){if(r)return r.call(b,a,c);p=b.length;for(c=c?0>c?Math.max(0,p+c):c:0;c<p;c++)if(c in b&&b[c]===a)return c}return-1},merge:function(a,c){var p=a.length,d=0;if("number"===typeof c.length)for(var H=
c.length;d<H;d++)a[p++]=c[d];else for(;c[d]!==b;)a[p++]=c[d++];a.length=p;return a},grep:function(a,b,c){for(var p=[],d,c=!!c,H=0,g=a.length;H<g;H++)d=!!b(a[H],H),c!==d&&p.push(a[H]);return p},map:function(a,p,d){var g,f,e=[],I=0,h=a.length;if(a instanceof c||h!==b&&"number"===typeof h&&(0<h&&a[0]&&a[h-1]||0===h||c.isArray(a)))for(;I<h;I++)g=p(a[I],I,d),null!=g&&(e[e.length]=g);else for(f in a)g=p(a[f],f,d),null!=g&&(e[e.length]=g);return e.concat.apply([],e)},guid:1,proxy:function(a,p){if("string"===
typeof p)var d=a[p],p=a,a=d;if(!c.isFunction(a))return b;var g=ha.call(arguments,2),d=function(){return a.apply(p,g.concat(ha.call(arguments)))};d.guid=a.guid=a.guid||d.guid||c.guid++;return d},access:function(a,p,d,g,f,e){var I=a.length;if("object"===typeof p){for(var h in p)c.access(a,h,p[h],g,f,d);return a}if(d!==b){g=!e&&g&&c.isFunction(d);for(h=0;h<I;h++)f(a[h],p,g?d.call(a[h],h,f(a[h],p)):d,e);return a}return I?f(a[0],p):b},now:function(){return(new Date).getTime()},uaMatch:function(a){a=a.toLowerCase();
a=q.exec(a)||D.exec(a)||z.exec(a)||0>a.indexOf("compatible")&&E.exec(a)||[];return{browser:a[1]||"",version:a[2]||"0"}},sub:function(){function a(b,c){return new a.fn.init(b,c)}c.extend(!0,a,this);a.superclass=this;a.fn=a.prototype=this();a.fn.constructor=a;a.sub=this.sub;a.fn.init=function(p,d){d&&d instanceof c&&!(d instanceof a)&&(d=a(d));return c.fn.init.call(this,p,d,b)};a.fn.init.prototype=a.fn;var b=a(v);return a},browser:{}});c.each("Boolean,Number,String,Function,Array,Date,RegExp,Object".split(","),
function(a,b){u["[object "+b+"]"]=b.toLowerCase()});B=c.uaMatch(B);B.browser&&(c.browser[B.browser]=!0,c.browser.version=B.version);c.browser.webkit&&(c.browser.safari=!0);h.test("\u00a0")&&(i=/^[\s\xA0]+/,j=/[\s\xA0]+$/);f=c(v);v.addEventListener?da=function(){v.removeEventListener("DOMContentLoaded",da,!1);c.ready()}:v.attachEvent&&(da=function(){"complete"===v.readyState&&(v.detachEvent("onreadystatechange",da),c.ready())});return c}(),x={};g.Callbacks=function(a){var a=a?x[a]||c(a):{},d=[],f=
[],e,h,i,j,l,n=function(b){var c,f,e,I;for(c=0,f=b.length;c<f;c++)e=b[c],I=g.type(e),"array"===I?n(e):"function"===I&&(!a.unique||!t.has(e))&&d.push(e)},k=function(b,c){c=c||[];e=!a.memory||[b,c];h=!0;l=i||0;i=0;for(j=d.length;d&&l<j;l++)if(!1===d[l].apply(b,c)&&a.stopOnFalse){e=!0;break}h=!1;d&&(a.once?!0===e?t.disable():d=[]:f&&f.length&&(e=f.shift(),t.fireWith(e[0],e[1])))},t={add:function(){if(d){var a=d.length;n(arguments);h?j=d.length:e&&!0!==e&&(i=a,k(e[0],e[1]))}return this},remove:function(){if(d)for(var b=
arguments,c=0,g=b.length;c<g;c++)for(var f=0;f<d.length&&!(b[c]===d[f]&&(h&&f<=j&&(j--,f<=l&&l--),d.splice(f--,1),a.unique));f++);return this},has:function(a){if(d)for(var b=0,c=d.length;b<c;b++)if(a===d[b])return!0;return!1},empty:function(){d=[];return this},disable:function(){d=f=e=b;return this},disabled:function(){return!d},lock:function(){f=b;(!e||!0===e)&&t.disable();return this},locked:function(){return!f},fireWith:function(b,c){f&&(h?a.once||f.push([b,c]):(!a.once||!e)&&k(b,c));return this},
fire:function(){t.fireWith(this,arguments);return this},fired:function(){return!!e}};return t};var t=[].slice;g.extend({Deferred:function(a){var b=g.Callbacks("once memory"),c=g.Callbacks("once memory"),d=g.Callbacks("memory"),f="pending",e={resolve:b,reject:c,notify:d},h={done:b.add,fail:c.add,progress:d.add,state:function(){return f},isResolved:b.fired,isRejected:c.fired,then:function(a,b,c){i.done(a).fail(b).progress(c);return this},always:function(){i.done.apply(i,arguments).fail.apply(i,arguments);
return this},pipe:function(a,b,c){return g.Deferred(function(p){g.each({done:[a,"resolve"],fail:[b,"reject"],progress:[c,"notify"]},function(a,b){var c=b[0],d=b[1],H;if(g.isFunction(c))i[a](function(){if((H=c.apply(this,arguments))&&g.isFunction(H.promise))H.promise().then(p.resolve,p.reject,p.notify);else p[d+"With"](this===i?p:this,[H])});else i[a](p[d])})}).promise()},promise:function(a){if(null==a)a=h;else for(var b in h)a[b]=h[b];return a}},i=h.promise({}),j;for(j in e)i[j]=e[j].fire,i[j+"With"]=
e[j].fireWith;i.done(function(){f="resolved"},c.disable,d.lock).fail(function(){f="rejected"},b.disable,d.lock);a&&a.call(i,i);return i},when:function(a){function b(a){return function(b){d[a]=1<arguments.length?t.call(arguments,0):b;--i||j.resolveWith(j,d)}}function c(a){return function(b){h[a]=1<arguments.length?t.call(arguments,0):b;j.notifyWith(l,h)}}var d=t.call(arguments,0),f=0,e=d.length,h=Array(e),i=e,j=1>=e&&a&&g.isFunction(a.promise)?a:g.Deferred(),l=j.promise();if(1<e){for(;f<e;f++)d[f]&&
d[f].promise&&g.isFunction(d[f].promise)?d[f].promise().then(b(f),j.reject,c(f)):--i;i||j.resolveWith(j,d)}else j!==a&&j.resolveWith(j,e?[a]:[]);return l}});g.support=function(){var b,c,d,f,e,h,i,j,l=v.createElement("div");l.setAttribute("className","t");l.innerHTML="   <link/><table></table><a href='/a' style='top:1px;float:left;opacity:.55;'>a</a><input type='checkbox'/>";c=l.getElementsByTagName("*");d=l.getElementsByTagName("a")[0];if(!c||!c.length||!d)return{};f=v.createElement("select");e=f.appendChild(v.createElement("option"));
c=l.getElementsByTagName("input")[0];b={leadingWhitespace:3===l.firstChild.nodeType,tbody:!l.getElementsByTagName("tbody").length,htmlSerialize:!!l.getElementsByTagName("link").length,style:/top/.test(d.getAttribute("style")),hrefNormalized:"/a"===d.getAttribute("href"),opacity:/^0.55/.test(d.style.opacity),cssFloat:!!d.style.cssFloat,checkOn:"on"===c.value,optSelected:e.selected,getSetAttribute:"t"!==l.className,enctype:!!v.createElement("form").enctype,html5Clone:"<:nav></:nav>"!==v.createElement("nav").cloneNode(!0).outerHTML,
submitBubbles:!0,changeBubbles:!0,focusinBubbles:!1,deleteExpando:!0,noCloneEvent:!0,inlineBlockNeedsLayout:!1,shrinkWrapBlocks:!1,reliableMarginRight:!0};c.checked=!0;b.noCloneChecked=c.cloneNode(!0).checked;f.disabled=!0;b.optDisabled=!e.disabled;try{delete l.test}catch(x){b.deleteExpando=!1}!l.addEventListener&&l.attachEvent&&l.fireEvent&&(l.attachEvent("onclick",function(){b.noCloneEvent=!1}),l.cloneNode(!0).fireEvent("onclick"));c=v.createElement("input");c.value="t";c.setAttribute("type","radio");
b.radioValue="t"===c.value;c.setAttribute("checked","checked");l.appendChild(c);d=v.createDocumentFragment();d.appendChild(l.lastChild);b.checkClone=d.cloneNode(!0).cloneNode(!0).lastChild.checked;b.appendChecked=c.checked;d.removeChild(c);d.appendChild(l);l.innerHTML="";a.getComputedStyle&&(c=v.createElement("div"),c.style.width="0",c.style.marginRight="0",l.style.width="2px",l.appendChild(c),b.reliableMarginRight=0===(parseInt((a.getComputedStyle(c,null)||{marginRight:0}).marginRight,10)||0));if(l.attachEvent)for(i in{submit:1,
change:1,focusin:1})c="on"+i,j=c in l,j||(l.setAttribute(c,"return;"),j="function"===typeof l[c]),b[i+"Bubbles"]=j;d.removeChild(l);d=f=e=c=l=c=null;g(function(){var a,c,d,f,e=v.getElementsByTagName("body")[0];e&&(a=v.createElement("div"),a.style.cssText="visibility:hidden;border:0;width:0;height:0;position:static;top:0;margin-top:1px",e.insertBefore(a,e.firstChild),l=v.createElement("div"),a.appendChild(l),l.innerHTML="<table><tr><td style='padding:0;border:0;display:none'></td><td>t</td></tr></table>",
h=l.getElementsByTagName("td"),j=0===h[0].offsetHeight,h[0].style.display="",h[1].style.display="none",b.reliableHiddenOffsets=j&&0===h[0].offsetHeight,l.innerHTML="",l.style.width=l.style.paddingLeft="1px",g.boxModel=b.boxModel=2===l.offsetWidth,"undefined"!==typeof l.style.zoom&&(l.style.display="inline",l.style.zoom=1,b.inlineBlockNeedsLayout=2===l.offsetWidth,l.style.display="",l.innerHTML="<div style='width:4px;'></div>",b.shrinkWrapBlocks=2!==l.offsetWidth),l.style.cssText="position:absolute;top:0;left:0;width:1px;height:1px;margin:0;visibility:hidden;border:0;",
l.innerHTML="<div style='position:absolute;top:0;left:0;width:1px;height:1px;margin:0;border:5px solid #000;padding:0;'><div></div></div><table style='position:absolute;top:0;left:0;width:1px;height:1px;margin:0;border:5px solid #000;padding:0;' cellpadding='0' cellspacing='0'><tr><td></td></tr></table>",c=l.firstChild,d=c.firstChild,f={doesNotAddBorder:5!==d.offsetTop,doesAddBorderForTableAndCells:5===c.nextSibling.firstChild.firstChild.offsetTop},d.style.position="fixed",d.style.top="20px",f.fixedPosition=
20===d.offsetTop||15===d.offsetTop,d.style.position=d.style.top="",c.style.overflow="hidden",c.style.position="relative",f.subtractsBorderForOverflowNotVisible=-5===d.offsetTop,f.doesNotIncludeMarginInBodyOffset=1!==e.offsetTop,e.removeChild(a),l=null,g.extend(b,f))});return b}();var E=/^(?:\{.*\}|\[.*\])$/,G=/([A-Z])/g;g.extend({cache:{},uuid:0,expando:"jQuery"+(g.fn.jquery+Math.random()).replace(/\D/g,""),noData:{embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:!0},hasData:function(a){a=
a.nodeType?g.cache[a[g.expando]]:a[g.expando];return!!a&&!e(a)},data:function(a,c,d,f){if(g.acceptData(a)){var e;e=g.expando;var h="string"===typeof c,i=a.nodeType,j=i?g.cache:a,l=i?a[e]:a[e]&&e,x="events"===c;if(l&&j[l]&&(x||f||j[l].data)||!(h&&d===b)){l||(i?a[e]=l=++g.uuid:l=e);j[l]||(j[l]={},i||(j[l].toJSON=g.noop));if("object"===typeof c||"function"===typeof c)f?j[l]=g.extend(j[l],c):j[l].data=g.extend(j[l].data,c);e=a=j[l];f||(a.data||(a.data={}),a=a.data);d!==b&&(a[g.camelCase(c)]=d);if(x&&
!a[c])return e.events;h?(d=a[c],null==d&&(d=a[g.camelCase(c)])):d=a;return d}}},removeData:function(a,b,c){if(g.acceptData(a)){var d,f,h,i=g.expando,j=a.nodeType,l=j?g.cache:a,x=j?a[i]:i;if(l[x]){if(b&&(d=c?l[x]:l[x].data)){g.isArray(b)||(b in d?b=[b]:(b=g.camelCase(b),b=b in d?[b]:b.split(" ")));for(f=0,h=b.length;f<h;f++)delete d[b[f]];if(!(c?e:g.isEmptyObject)(d))return}if(!c&&(delete l[x].data,!e(l[x])))return;g.support.deleteExpando||!l.setInterval?delete l[x]:l[x]=null;j&&(g.support.deleteExpando?
delete a[i]:a.removeAttribute?a.removeAttribute(i):a[i]=null)}}},_data:function(a,b,c){return g.data(a,b,c,!0)},acceptData:function(a){if(a.nodeName){var b=g.noData[a.nodeName.toLowerCase()];if(b)return!(!0===b||a.getAttribute("classid")!==b)}return!0}});g.fn.extend({data:function(a,c){var f,e,h,i=null;if("undefined"===typeof a){if(this.length&&(i=g.data(this[0]),1===this[0].nodeType&&!g._data(this[0],"parsedAttrs"))){e=this[0].attributes;for(var j=0,l=e.length;j<l;j++)h=e[j].name,0===h.indexOf("data-")&&
(h=g.camelCase(h.substring(5)),d(this[0],h,i[h]));g._data(this[0],"parsedAttrs",!0)}return i}if("object"===typeof a)return this.each(function(){g.data(this,a)});f=a.split(".");f[1]=f[1]?"."+f[1]:"";return c===b?(i=this.triggerHandler("getData"+f[1]+"!",[f[0]]),i===b&&this.length&&(i=g.data(this[0],a),i=d(this[0],a,i)),i===b&&f[1]?this.data(f[0]):i):this.each(function(){var b=g(this),d=[f[0],c];b.triggerHandler("setData"+f[1]+"!",d);g.data(this,a,c);b.triggerHandler("changeData"+f[1]+"!",d)})},removeData:function(a){return this.each(function(){g.removeData(this,
a)})}});g.extend({_mark:function(a,b){a&&(b=(b||"fx")+"mark",g._data(a,b,(g._data(a,b)||0)+1))},_unmark:function(a,b,c){!0!==a&&(c=b,b=a,a=!1);if(b){var c=c||"fx",d=c+"mark";(a=a?0:(g._data(b,d)||1)-1)?g._data(b,d,a):(g.removeData(b,d,!0),h(b,c,"mark"))}},queue:function(a,b,c){var d;if(a)return b=(b||"fx")+"queue",d=g._data(a,b),c&&(!d||g.isArray(c)?d=g._data(a,b,g.makeArray(c)):d.push(c)),d||[]},dequeue:function(a,b){var b=b||"fx",c=g.queue(a,b),d=c.shift(),f={};"inprogress"===d&&(d=c.shift());d&&
("fx"===b&&c.unshift("inprogress"),g._data(a,b+".run",f),d.call(a,function(){g.dequeue(a,b)},f));c.length||(g.removeData(a,b+"queue "+b+".run",!0),h(a,b,"queue"))}});g.fn.extend({queue:function(a,c){"string"!==typeof a&&(c=a,a="fx");return c===b?g.queue(this[0],a):this.each(function(){var b=g.queue(this,a,c);"fx"===a&&"inprogress"!==b[0]&&g.dequeue(this,a)})},dequeue:function(a){return this.each(function(){g.dequeue(this,a)})},delay:function(a,b){a=g.fx?g.fx.speeds[a]||a:a;return this.queue(b||"fx",
function(b,c){var d=setTimeout(b,a);c.stop=function(){clearTimeout(d)}})},clearQueue:function(a){return this.queue(a||"fx",[])},promise:function(a){function c(){--h||d.resolveWith(f,[f])}"string"!==typeof a&&(a=b);for(var a=a||"fx",d=g.Deferred(),f=this,e=f.length,h=1,i=a+"defer",j=a+"queue",a=a+"mark",l;e--;)if(l=g.data(f[e],i,b,!0)||(g.data(f[e],j,b,!0)||g.data(f[e],a,b,!0))&&g.data(f[e],i,g.Callbacks("once memory"),!0))h++,l.add(c);c();return d.promise()}});var ea=/[\n\t\r]/g,T=/\s+/,U=/\r/g,M=
/^(?:button|input)$/i,L=/^(?:button|input|object|select|textarea)$/i,X=/^a(?:rea)?$/i,Pa=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,Qa=g.support.getSetAttribute,V,Ra,P;g.fn.extend({attr:function(a,b){return g.access(this,a,b,!0,g.attr)},removeAttr:function(a){return this.each(function(){g.removeAttr(this,a)})},prop:function(a,b){return g.access(this,a,b,!0,g.prop)},removeProp:function(a){a=g.propFix[a]||a;return this.each(function(){try{this[a]=
b,delete this[a]}catch(c){}})},addClass:function(a){var b,c,d,f,e,h,i;if(g.isFunction(a))return this.each(function(b){g(this).addClass(a.call(this,b,this.className))});if(a&&"string"===typeof a){b=a.split(T);for(c=0,d=this.length;c<d;c++)if(f=this[c],1===f.nodeType)if(!f.className&&1===b.length)f.className=a;else{e=" "+f.className+" ";for(h=0,i=b.length;h<i;h++)~e.indexOf(" "+b[h]+" ")||(e+=b[h]+" ");f.className=g.trim(e)}}return this},removeClass:function(a){var c,d,f,e,h,i,j;if(g.isFunction(a))return this.each(function(b){g(this).removeClass(a.call(this,
b,this.className))});if(a&&"string"===typeof a||a===b){c=(a||"").split(T);for(d=0,f=this.length;d<f;d++)if(e=this[d],1===e.nodeType&&e.className)if(a){h=(" "+e.className+" ").replace(ea," ");for(i=0,j=c.length;i<j;i++)h=h.replace(" "+c[i]+" "," ");e.className=g.trim(h)}else e.className=""}return this},toggleClass:function(a,b){var c=typeof a,d="boolean"===typeof b;return g.isFunction(a)?this.each(function(c){g(this).toggleClass(a.call(this,c,this.className,b),b)}):this.each(function(){if("string"===
c)for(var f,e=0,h=g(this),i=b,j=a.split(T);f=j[e++];)i=d?i:!h.hasClass(f),h[i?"addClass":"removeClass"](f);else if("undefined"===c||"boolean"===c)this.className&&g._data(this,"__className__",this.className),this.className=this.className||!1===a?"":g._data(this,"__className__")||""})},hasClass:function(a){for(var a=" "+a+" ",b=0,c=this.length;b<c;b++)if(1===this[b].nodeType&&-1<(" "+this[b].className+" ").replace(ea," ").indexOf(a))return!0;return!1},val:function(a){var c,d,f,e=this[0];if(arguments.length)return f=
g.isFunction(a),this.each(function(d){var e=g(this);if(1===this.nodeType&&(d=f?a.call(this,d,e.val()):a,null==d?d="":"number"===typeof d?d+="":g.isArray(d)&&(d=g.map(d,function(a){return null==a?"":a+""})),c=g.valHooks[this.nodeName.toLowerCase()]||g.valHooks[this.type],!c||!("set"in c)||c.set(this,d,"value")===b))this.value=d});if(e){if((c=g.valHooks[e.nodeName.toLowerCase()]||g.valHooks[e.type])&&"get"in c&&(d=c.get(e,"value"))!==b)return d;d=e.value;return"string"===typeof d?d.replace(U,""):null==
d?"":d}}});g.extend({valHooks:{option:{get:function(a){var b=a.attributes.value;return!b||b.specified?a.value:a.text}},select:{get:function(a){var b,c,d=a.selectedIndex,f=[],e=a.options,h="select-one"===a.type;if(0>d)return null;a=h?d:0;for(c=h?d+1:e.length;a<c;a++)if(b=e[a],b.selected&&(g.support.optDisabled?!b.disabled:null===b.getAttribute("disabled"))&&(!b.parentNode.disabled||!g.nodeName(b.parentNode,"optgroup"))){b=g(b).val();if(h)return b;f.push(b)}return h&&!f.length&&e.length?g(e[d]).val():
f},set:function(a,b){var c=g.makeArray(b);g(a).find("option").each(function(){this.selected=0<=g.inArray(g(this).val(),c)});c.length||(a.selectedIndex=-1);return c}}},attrFn:{val:!0,css:!0,html:!0,text:!0,data:!0,width:!0,height:!0,offset:!0},attr:function(a,c,d,f){var e,h,i=a.nodeType;if(a&&!(3===i||8===i||2===i)){if(f&&c in g.attrFn)return g(a)[c](d);if("undefined"===typeof a.getAttribute)return g.prop(a,c,d);if(f=1!==i||!g.isXMLDoc(a))c=c.toLowerCase(),h=g.attrHooks[c]||(Pa.test(c)?Ra:V);if(d!==
b)if(null===d)g.removeAttr(a,c);else{if(h&&"set"in h&&f&&(e=h.set(a,d,c))!==b)return e;a.setAttribute(c,""+d);return d}else{if(h&&"get"in h&&f&&null!==(e=h.get(a,c)))return e;e=a.getAttribute(c);return null===e?b:e}}},removeAttr:function(a,b){var c,d,f,e,h=0;if(b&&1===a.nodeType){d=b.toLowerCase().split(T);for(e=d.length;h<e;h++)if(f=d[h])c=g.propFix[f]||f,g.attr(a,f,""),a.removeAttribute(Qa?f:c),Pa.test(f)&&c in a&&(a[c]=!1)}},attrHooks:{type:{set:function(a,b){if(M.test(a.nodeName)&&a.parentNode)g.error("type property can't be changed");
else if(!g.support.radioValue&&"radio"===b&&g.nodeName(a,"input")){var c=a.value;a.setAttribute("type",b);c&&(a.value=c);return b}}},value:{get:function(a,b){return V&&g.nodeName(a,"button")?V.get(a,b):b in a?a.value:null},set:function(a,b,c){if(V&&g.nodeName(a,"button"))return V.set(a,b,c);a.value=b}}},propFix:{tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",
frameborder:"frameBorder",contenteditable:"contentEditable"},prop:function(a,c,d){var f,e,h=a.nodeType;if(a&&!(3===h||8===h||2===h)){if(1!==h||!g.isXMLDoc(a))c=g.propFix[c]||c,e=g.propHooks[c];return d!==b?e&&"set"in e&&(f=e.set(a,d,c))!==b?f:a[c]=d:e&&"get"in e&&null!==(f=e.get(a,c))?f:a[c]}},propHooks:{tabIndex:{get:function(a){var c=a.getAttributeNode("tabindex");return c&&c.specified?parseInt(c.value,10):L.test(a.nodeName)||X.test(a.nodeName)&&a.href?0:b}}}});g.attrHooks.tabindex=g.propHooks.tabIndex;
Ra={get:function(a,c){var d,f=g.prop(a,c);return!0===f||"boolean"!==typeof f&&(d=a.getAttributeNode(c))&&!1!==d.nodeValue?c.toLowerCase():b},set:function(a,b,c){!1===b?g.removeAttr(a,c):(b=g.propFix[c]||c,b in a&&(a[b]=!0),a.setAttribute(c,c.toLowerCase()));return c}};Qa||(P={name:!0,id:!0},V=g.valHooks.button={get:function(a,c){var d;return(d=a.getAttributeNode(c))&&(P[c]?""!==d.nodeValue:d.specified)?d.nodeValue:b},set:function(a,b,c){var d=a.getAttributeNode(c);d||(d=v.createAttribute(c),a.setAttributeNode(d));
return d.nodeValue=b+""}},g.attrHooks.tabindex.set=V.set,g.each(["width","height"],function(a,b){g.attrHooks[b]=g.extend(g.attrHooks[b],{set:function(a,c){if(""===c)return a.setAttribute(b,"auto"),c}})}),g.attrHooks.contenteditable={get:V.get,set:function(a,b,c){""===b&&(b="false");V.set(a,b,c)}});g.support.hrefNormalized||g.each(["href","src","width","height"],function(a,c){g.attrHooks[c]=g.extend(g.attrHooks[c],{get:function(a){a=a.getAttribute(c,2);return null===a?b:a}})});g.support.style||(g.attrHooks.style=
{get:function(a){return a.style.cssText.toLowerCase()||b},set:function(a,b){return a.style.cssText=""+b}});g.support.optSelected||(g.propHooks.selected=g.extend(g.propHooks.selected,{get:function(a){if(a=a.parentNode)a.selectedIndex,a.parentNode&&a.parentNode.selectedIndex;return null}}));g.support.enctype||(g.propFix.enctype="encoding");g.support.checkOn||g.each(["radio","checkbox"],function(){g.valHooks[this]={get:function(a){return null===a.getAttribute("value")?"on":a.value}}});g.each(["radio",
"checkbox"],function(){g.valHooks[this]=g.extend(g.valHooks[this],{set:function(a,b){if(g.isArray(b))return a.checked=0<=g.inArray(g(a).val(),b)}})});var za=/^(?:textarea|input|select)$/i,Q=/^([^\.]*)?(?:\.(.+))?$/,mb=/\bhover(\.\S+)?\b/,nb=/^key/,ga=/^(?:mouse|contextmenu)|click/,Sa=/^(?:focusinfocus|focusoutblur)$/,ja=/^(\w*)(?:#([\w\-]+))?(?:\.([\w\-]+))?$/,ka=function(a){if(a=ja.exec(a))a[1]=(a[1]||"").toLowerCase(),a[3]=a[3]&&RegExp("(?:^|\\s)"+a[3]+"(?:\\s|$)");return a},ia=function(a){return g.event.special.hover?
a:a.replace(mb,"mouseenter$1 mouseleave$1")};g.event={add:function(a,c,d,f,e){var h,i,j,l,x,n,k,t,q;if(!(3===a.nodeType||8===a.nodeType||!c||!d||!(h=g._data(a)))){d.handler&&(k=d,d=k.handler);d.guid||(d.guid=g.guid++);j=h.events;j||(h.events=j={});i=h.handle;i||(h.handle=i=function(a){return"undefined"!==typeof g&&(!a||g.event.triggered!==a.type)?g.event.dispatch.apply(i.elem,arguments):b},i.elem=a);c=g.trim(ia(c)).split(" ");for(h=0;h<c.length;h++){l=Q.exec(c[h])||[];x=l[1];n=(l[2]||"").split(".").sort();
q=g.event.special[x]||{};x=(e?q.delegateType:q.bindType)||x;q=g.event.special[x]||{};l=g.extend({type:x,origType:l[1],data:f,handler:d,guid:d.guid,selector:e,quick:ka(e),namespace:n.join(".")},k);t=j[x];if(!t&&(t=j[x]=[],t.delegateCount=0,!q.setup||!1===q.setup.call(a,f,n,i)))a.addEventListener?a.addEventListener(x,i,!1):a.attachEvent&&a.attachEvent("on"+x,i);q.add&&(q.add.call(a,l),l.handler.guid||(l.handler.guid=d.guid));e?t.splice(t.delegateCount++,0,l):t.push(l);g.event.global[x]=!0}a=null}},
global:{},remove:function(a,b,c,d,f){var e=g.hasData(a)&&g._data(a),h,i,j,l,x,n,k,t,q,D;if(e&&(k=e.events)){b=g.trim(ia(b||"")).split(" ");for(h=0;h<b.length;h++)if(i=Q.exec(b[h])||[],j=l=i[1],i=i[2],j){t=g.event.special[j]||{};j=(d?t.delegateType:t.bindType)||j;q=k[j]||[];x=q.length;i=i?RegExp("(^|\\.)"+i.split(".").sort().join("\\.(?:.*\\.)?")+"(\\.|$)"):null;for(n=0;n<q.length;n++)if(D=q[n],(f||l===D.origType)&&(!c||c.guid===D.guid)&&(!i||i.test(D.namespace))&&(!d||d===D.selector||"**"===d&&D.selector))q.splice(n--,
1),D.selector&&q.delegateCount--,t.remove&&t.remove.call(a,D);0===q.length&&x!==q.length&&((!t.teardown||!1===t.teardown.call(a,i))&&g.removeEvent(a,j,e.handle),delete k[j])}else for(j in k)g.event.remove(a,j+b[h],c,d,!0);if(g.isEmptyObject(k)){if(b=e.handle)b.elem=null;g.removeData(a,["events","handle"],!0)}}},customEvent:{getData:!0,setData:!0,changeData:!0},trigger:function(c,d,f,e){if(!f||!(3===f.nodeType||8===f.nodeType)){var h=c.type||c,i=[],j,l,x,n,t;if(!Sa.test(h+g.event.triggered)&&(0<=h.indexOf("!")&&
(h=h.slice(0,-1),j=!0),0<=h.indexOf(".")&&(i=h.split("."),h=i.shift(),i.sort()),f&&!g.event.customEvent[h]||g.event.global[h]))if(c="object"===typeof c?c[g.expando]?c:new g.Event(h,c):new g.Event(h),c.type=h,c.isTrigger=!0,c.exclusive=j,c.namespace=i.join("."),c.namespace_re=c.namespace?RegExp("(^|\\.)"+i.join("\\.(?:.*\\.)?")+"(\\.|$)"):null,j=0>h.indexOf(":")?"on"+h:"",f){if(c.result=b,c.target||(c.target=f),d=null!=d?g.makeArray(d):[],d.unshift(c),x=g.event.special[h]||{},!(x.trigger&&!1===x.trigger.apply(f,
d))){t=[[f,x.bindType||h]];if(!e&&!x.noBubble&&!g.isWindow(f)){n=x.delegateType||h;i=Sa.test(n+h)?f:f.parentNode;for(l=null;i;i=i.parentNode)t.push([i,n]),l=i;l&&l===f.ownerDocument&&t.push([l.defaultView||l.parentWindow||a,n])}for(l=0;l<t.length&&!c.isPropagationStopped();l++)i=t[l][0],c.type=t[l][1],(n=(g._data(i,"events")||{})[c.type]&&g._data(i,"handle"))&&n.apply(i,d),(n=j&&i[j])&&g.acceptData(i)&&!1===n.apply(i,d)&&c.preventDefault();c.type=h;if(!e&&!c.isDefaultPrevented()&&(!x._default||!1===
x._default.apply(f.ownerDocument,d))&&!("click"===h&&g.nodeName(f,"a"))&&g.acceptData(f))if(j&&f[h]&&("focus"!==h&&"blur"!==h||0!==c.target.offsetWidth)&&!g.isWindow(f))(l=f[j])&&(f[j]=null),g.event.triggered=h,f[h](),g.event.triggered=b,l&&(f[j]=l);return c.result}}else for(l in f=g.cache,f)f[l].events&&f[l].events[h]&&g.event.trigger(c,d,f[l].handle.elem,!0)}},dispatch:function(c){var c=g.event.fix(c||a.event),d=(g._data(this,"events")||{})[c.type]||[],f=d.delegateCount,e=[].slice.call(arguments,
0),h=!c.exclusive&&!c.namespace,i=[],j,l,x,n,t,k,q;e[0]=c;c.delegateTarget=this;if(f&&!c.target.disabled&&!(c.button&&"click"===c.type)){x=g(this);x.context=this.ownerDocument||this;for(l=c.target;l!=this;l=l.parentNode||this){t={};k=[];x[0]=l;for(j=0;j<f;j++){n=d[j];q=n.selector;if(t[q]===b){var D=t,z=q,E;if(n.quick){E=n.quick;var s=l.attributes||{};E=(!E[1]||l.nodeName.toLowerCase()===E[1])&&(!E[2]||(s.id||{}).value===E[2])&&(!E[3]||E[3].test((s["class"]||{}).value))}else E=x.is(q);D[z]=E}t[q]&&
k.push(n)}k.length&&i.push({elem:l,matches:k})}}d.length>f&&i.push({elem:this,matches:d.slice(f)});for(j=0;j<i.length&&!c.isPropagationStopped();j++){f=i[j];c.currentTarget=f.elem;for(d=0;d<f.matches.length&&!c.isImmediatePropagationStopped();d++)if(n=f.matches[d],h||!c.namespace&&!n.namespace||c.namespace_re&&c.namespace_re.test(n.namespace))c.data=n.data,c.handleObj=n,n=((g.event.special[n.origType]||{}).handle||n.handler).apply(f.elem,e),n!==b&&(c.result=n,!1===n&&(c.preventDefault(),c.stopPropagation()))}return c.result},
props:"attrChange,attrName,relatedNode,srcElement,altKey,bubbles,cancelable,ctrlKey,currentTarget,eventPhase,metaKey,relatedTarget,shiftKey,target,timeStamp,view,which".split(","),fixHooks:{},keyHooks:{props:["char","charCode","key","keyCode"],filter:function(a,b){null==a.which&&(a.which=null!=b.charCode?b.charCode:b.keyCode);return a}},mouseHooks:{props:"button,buttons,clientX,clientY,fromElement,offsetX,offsetY,pageX,pageY,screenX,screenY,toElement".split(","),filter:function(a,c){var d,f,e=c.button,
g=c.fromElement;null==a.pageX&&null!=c.clientX&&(d=a.target.ownerDocument||v,f=d.documentElement,d=d.body,a.pageX=c.clientX+(f&&f.scrollLeft||d&&d.scrollLeft||0)-(f&&f.clientLeft||d&&d.clientLeft||0),a.pageY=c.clientY+(f&&f.scrollTop||d&&d.scrollTop||0)-(f&&f.clientTop||d&&d.clientTop||0));!a.relatedTarget&&g&&(a.relatedTarget=g===a.target?c.toElement:g);!a.which&&e!==b&&(a.which=e&1?1:e&2?3:e&4?2:0);return a}},fix:function(a){if(a[g.expando])return a;var c,d,f=a,e=g.event.fixHooks[a.type]||{},h=
e.props?this.props.concat(e.props):this.props,a=g.Event(f);for(c=h.length;c;)d=h[--c],a[d]=f[d];a.target||(a.target=f.srcElement||v);3===a.target.nodeType&&(a.target=a.target.parentNode);a.metaKey===b&&(a.metaKey=a.ctrlKey);return e.filter?e.filter(a,f):a},special:{ready:{setup:g.bindReady},load:{noBubble:!0},focus:{delegateType:"focusin"},blur:{delegateType:"focusout"},beforeunload:{setup:function(a,b,c){g.isWindow(this)&&(this.onbeforeunload=c)},teardown:function(a,b){this.onbeforeunload===b&&(this.onbeforeunload=
null)}}},simulate:function(a,b,c,d){a=g.extend(new g.Event,c,{type:a,isSimulated:!0,originalEvent:{}});d?g.event.trigger(a,null,b):g.event.dispatch.call(b,a);a.isDefaultPrevented()&&c.preventDefault()}};g.event.handle=g.event.dispatch;g.removeEvent=v.removeEventListener?function(a,b,c){a.removeEventListener&&a.removeEventListener(b,c,!1)}:function(a,b,c){a.detachEvent&&a.detachEvent("on"+b,c)};g.Event=function(a,b){if(!(this instanceof g.Event))return new g.Event(a,b);a&&a.type?(this.originalEvent=
a,this.type=a.type,this.isDefaultPrevented=a.defaultPrevented||!1===a.returnValue||a.getPreventDefault&&a.getPreventDefault()?i:f):this.type=a;b&&g.extend(this,b);this.timeStamp=a&&a.timeStamp||g.now();this[g.expando]=!0};g.Event.prototype={preventDefault:function(){this.isDefaultPrevented=i;var a=this.originalEvent;a&&(a.preventDefault?a.preventDefault():a.returnValue=!1)},stopPropagation:function(){this.isPropagationStopped=i;var a=this.originalEvent;a&&(a.stopPropagation&&a.stopPropagation(),a.cancelBubble=
!0)},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=i;this.stopPropagation()},isDefaultPrevented:f,isPropagationStopped:f,isImmediatePropagationStopped:f};g.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(a,b){g.event.special[a]={delegateType:b,bindType:b,handle:function(a){var c=a.relatedTarget,d=a.handleObj,f;if(!c||c!==this&&!g.contains(this,c))a.type=d.origType,f=d.handler.apply(this,arguments),a.type=b;return f}}});g.support.submitBubbles||(g.event.special.submit=
{setup:function(){if(g.nodeName(this,"form"))return!1;g.event.add(this,"click._submit keypress._submit",function(a){a=a.target;if((a=g.nodeName(a,"input")||g.nodeName(a,"button")?a.form:b)&&!a._submit_attached)g.event.add(a,"submit._submit",function(a){this.parentNode&&!a.isTrigger&&g.event.simulate("submit",this.parentNode,a,!0)}),a._submit_attached=!0})},teardown:function(){if(g.nodeName(this,"form"))return!1;g.event.remove(this,"._submit")}});g.support.changeBubbles||(g.event.special.change={setup:function(){if(za.test(this.nodeName)){if("checkbox"===
this.type||"radio"===this.type)g.event.add(this,"propertychange._change",function(a){"checked"===a.originalEvent.propertyName&&(this._just_changed=!0)}),g.event.add(this,"click._change",function(a){this._just_changed&&!a.isTrigger&&(this._just_changed=!1,g.event.simulate("change",this,a,!0))});return!1}g.event.add(this,"beforeactivate._change",function(a){a=a.target;za.test(a.nodeName)&&!a._change_attached&&(g.event.add(a,"change._change",function(a){this.parentNode&&!a.isSimulated&&!a.isTrigger&&
g.event.simulate("change",this.parentNode,a,!0)}),a._change_attached=!0)})},handle:function(a){var b=a.target;if(this!==b||a.isSimulated||a.isTrigger||"radio"!==b.type&&"checkbox"!==b.type)return a.handleObj.handler.apply(this,arguments)},teardown:function(){g.event.remove(this,"._change");return za.test(this.nodeName)}});g.support.focusinBubbles||g.each({focus:"focusin",blur:"focusout"},function(a,b){var c=0,d=function(a){g.event.simulate(b,a.target,g.event.fix(a),!0)};g.event.special[b]={setup:function(){0===
c++&&v.addEventListener(a,d,!0)},teardown:function(){0===--c&&v.removeEventListener(a,d,!0)}}});g.fn.extend({on:function(a,c,d,e,h){var i,j;if("object"===typeof a){"string"!==typeof c&&(d=c,c=b);for(j in a)this.on(j,c,d,a[j],h);return this}null==d&&null==e?(e=c,d=c=b):null==e&&("string"===typeof c?(e=d,d=b):(e=d,d=c,c=b));if(!1===e)e=f;else if(!e)return this;1===h&&(i=e,e=function(a){g().off(a);return i.apply(this,arguments)},e.guid=i.guid||(i.guid=g.guid++));return this.each(function(){g.event.add(this,
a,e,d,c)})},one:function(a,b,c,d){return this.on.call(this,a,b,c,d,1)},off:function(a,c,d){if(a&&a.preventDefault&&a.handleObj){var e=a.handleObj;g(a.delegateTarget).off(e.namespace?e.type+"."+e.namespace:e.type,e.selector,e.handler);return this}if("object"===typeof a){for(e in a)this.off(e,c,a[e]);return this}if(!1===c||"function"===typeof c)d=c,c=b;!1===d&&(d=f);return this.each(function(){g.event.remove(this,a,d,c)})},bind:function(a,b,c){return this.on(a,null,b,c)},unbind:function(a,b){return this.off(a,
null,b)},live:function(a,b,c){g(this.context).on(a,this.selector,b,c);return this},die:function(a,b){g(this.context).off(a,this.selector||"**",b);return this},delegate:function(a,b,c,d){return this.on(b,a,c,d)},undelegate:function(a,b,c){return 1==arguments.length?this.off(a,"**"):this.off(b,a,c)},trigger:function(a,b){return this.each(function(){g.event.trigger(a,b,this)})},triggerHandler:function(a,b){if(this[0])return g.event.trigger(a,b,this[0],!0)},toggle:function(a){var b=arguments,c=a.guid||
g.guid++,d=0,f=function(c){var f=(g._data(this,"lastToggle"+a.guid)||0)%d;g._data(this,"lastToggle"+a.guid,f+1);c.preventDefault();return b[f].apply(this,arguments)||!1};for(f.guid=c;d<b.length;)b[d++].guid=c;return this.click(f)},hover:function(a,b){return this.mouseenter(a).mouseleave(b||a)}});g.each("blur,focus,focusin,focusout,load,resize,scroll,unload,click,dblclick,mousedown,mouseup,mousemove,mouseover,mouseout,mouseenter,mouseleave,change,select,submit,keydown,keypress,keyup,error,contextmenu".split(","),
function(a,b){g.fn[b]=function(a,c){null==c&&(c=a,a=null);return 0<arguments.length?this.on(b,null,a,c):this.trigger(b)};g.attrFn&&(g.attrFn[b]=!0);nb.test(b)&&(g.event.fixHooks[b]=g.event.keyHooks);ga.test(b)&&(g.event.fixHooks[b]=g.event.mouseHooks)});(function(){function a(b,c,d,e,g,h){for(var g=0,p=e.length;g<p;g++){var i=e[g];if(i){for(var j=!1,i=i[b];i;){if(i[f]===d){j=e[i.sizset];break}1===i.nodeType&&!h&&(i[f]=d,i.sizset=g);if(i.nodeName.toLowerCase()===c){j=i;break}i=i[b]}e[g]=j}}}function c(a,
b,d,e,g,h){for(var g=0,p=e.length;g<p;g++){var i=e[g];if(i){for(var j=!1,i=i[a];i;){if(i[f]===d){j=e[i.sizset];break}if(1===i.nodeType)if(h||(i[f]=d,i.sizset=g),"string"!==typeof b){if(i===b){j=!0;break}}else if(0<t.filter(b,[i]).length){j=i;break}i=i[a]}e[g]=j}}}var d=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,f="sizcache"+(Math.random()+"").replace(".",""),e=0,h=Object.prototype.toString,i=!1,j=!0,l=/\\/g,
x=/\r\n/g,n=/\W/;[0,0].sort(function(){j=!1;return 0});var t=function(a,b,c,f){var c=c||[],e=b=b||v;if(1!==b.nodeType&&9!==b.nodeType)return[];if(!a||"string"!==typeof a)return c;var g,p,i,j,l,H=!0,x=t.isXML(b),F=[],n=a;do if(d.exec(""),g=d.exec(n))if(n=g[3],F.push(g[1]),g[2]){j=g[3];break}while(g);if(1<F.length&&D.exec(a))if(2===F.length&&q.relative[F[0]])p=A(F[0]+F[1],b,f);else for(p=q.relative[F[0]]?[b]:t(F.shift(),b);F.length;)a=F.shift(),q.relative[a]&&(a+=F.shift()),p=A(a,p,f);else if(!f&&1<
F.length&&9===b.nodeType&&!x&&q.match.ID.test(F[0])&&!q.match.ID.test(F[F.length-1])&&(g=t.find(F.shift(),b,x),b=g.expr?t.filter(g.expr,g.set)[0]:g.set[0]),b){g=f?{expr:F.pop(),set:s(f)}:t.find(F.pop(),1===F.length&&("~"===F[0]||"+"===F[0])&&b.parentNode?b.parentNode:b,x);p=g.expr?t.filter(g.expr,g.set):g.set;for(0<F.length?i=s(p):H=!1;F.length;)g=l=F.pop(),q.relative[l]?g=F.pop():l="",null==g&&(g=b),q.relative[l](i,g,x)}else i=[];i||(i=p);i||t.error(l||a);if("[object Array]"===h.call(i))if(H)if(b&&
1===b.nodeType)for(a=0;null!=i[a];a++)i[a]&&(!0===i[a]||1===i[a].nodeType&&t.contains(b,i[a]))&&c.push(p[a]);else for(a=0;null!=i[a];a++)i[a]&&1===i[a].nodeType&&c.push(p[a]);else c.push.apply(c,i);else s(i,c);j&&(t(j,e,c,f),t.uniqueSort(c));return c};t.uniqueSort=function(a){if(G&&(i=j,a.sort(G),i))for(var b=1;b<a.length;b++)a[b]===a[b-1]&&a.splice(b--,1);return a};t.matches=function(a,b){return t(a,null,null,b)};t.matchesSelector=function(a,b){return 0<t(b,null,null,[a]).length};t.find=function(a,
b,c){var d,f,e,g,h,p;if(!a)return[];for(f=0,e=q.order.length;f<e;f++)if(h=q.order[f],g=q.leftMatch[h].exec(a))if(p=g[1],g.splice(1,1),"\\"!==p.substr(p.length-1)&&(g[1]=(g[1]||"").replace(l,""),d=q.find[h](g,b,c),null!=d)){a=a.replace(q.match[h],"");break}d||(d="undefined"!==typeof b.getElementsByTagName?b.getElementsByTagName("*"):[]);return{set:d,expr:a}};t.filter=function(a,c,d,f){for(var e,g,h,p,i,j,l,H,x=a,F=[],I=c,n=c&&c[0]&&t.isXML(c[0]);a&&c.length;){for(h in q.filter)if(null!=(e=q.leftMatch[h].exec(a))&&
e[2])if(j=q.filter[h],i=e[1],g=!1,e.splice(1,1),"\\"!==i.substr(i.length-1)){I===F&&(F=[]);if(q.preFilter[h])if(e=q.preFilter[h](e,I,d,F,f,n)){if(!0===e)continue}else g=p=!0;if(e)for(l=0;null!=(i=I[l]);l++)i&&(p=j(i,e,l,I),H=f^p,d&&null!=p?H?g=!0:I[l]=!1:H&&(F.push(i),g=!0));if(p!==b){d||(I=F);a=a.replace(q.match[h],"");if(!g)return[];break}}if(a===x)if(null==g)t.error(a);else break;x=a}return I};t.error=function(a){throw Error("Syntax error, unrecognized expression: "+a);};var k=t.getText=function(a){var b,
c;b=a.nodeType;var d="";if(b)if(1===b||9===b){if("string"===typeof a.textContent)return a.textContent;if("string"===typeof a.innerText)return a.innerText.replace(x,"");for(a=a.firstChild;a;a=a.nextSibling)d+=k(a)}else{if(3===b||4===b)return a.nodeValue}else for(b=0;c=a[b];b++)8!==c.nodeType&&(d+=k(c));return d},q=t.selectors={order:["ID","NAME","TAG"],match:{ID:/#((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,CLASS:/\.((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,NAME:/\[name=['"]*((?:[\w\u00c0-\uFFFF\-]|\\.)+)['"]*\]/,ATTR:/\[\s*((?:[\w\u00c0-\uFFFF\-]|\\.)+)\s*(?:(\S?=)\s*(?:(['"])(.*?)\3|(#?(?:[\w\u00c0-\uFFFF\-]|\\.)*)|)|)\s*\]/,
TAG:/^((?:[\w\u00c0-\uFFFF\*\-]|\\.)+)/,CHILD:/:(only|nth|last|first)-child(?:\(\s*(even|odd|(?:[+\-]?\d+|(?:[+\-]?\d*)?n\s*(?:[+\-]\s*\d+)?))\s*\))?/,POS:/:(nth|eq|gt|lt|first|last|even|odd)(?:\((\d*)\))?(?=[^\-]|$)/,PSEUDO:/:((?:[\w\u00c0-\uFFFF\-]|\\.)+)(?:\((['"]?)((?:\([^\)]+\)|[^\(\)]*)+)\2\))?/},leftMatch:{},attrMap:{"class":"className","for":"htmlFor"},attrHandle:{href:function(a){return a.getAttribute("href")},type:function(a){return a.getAttribute("type")}},relative:{"+":function(a,b){var c=
"string"===typeof b,d=c&&!n.test(b),c=c&&!d;d&&(b=b.toLowerCase());for(var d=0,f=a.length,e;d<f;d++)if(e=a[d]){for(;(e=e.previousSibling)&&1!==e.nodeType;);a[d]=c||e&&e.nodeName.toLowerCase()===b?e||!1:e===b}c&&t.filter(b,a,!0)},">":function(a,b){var c,d="string"===typeof b,f=0,e=a.length;if(d&&!n.test(b))for(b=b.toLowerCase();f<e;f++){if(c=a[f])c=c.parentNode,a[f]=c.nodeName.toLowerCase()===b?c:!1}else{for(;f<e;f++)(c=a[f])&&(a[f]=d?c.parentNode:c.parentNode===b);d&&t.filter(b,a,!0)}},"":function(b,
d,f){var g,h=e++,i=c;"string"===typeof d&&!n.test(d)&&(g=d=d.toLowerCase(),i=a);i("parentNode",d,h,b,g,f)},"~":function(b,d,f){var g,h=e++,i=c;"string"===typeof d&&!n.test(d)&&(g=d=d.toLowerCase(),i=a);i("previousSibling",d,h,b,g,f)}},find:{ID:function(a,b,c){if("undefined"!==typeof b.getElementById&&!c)return(a=b.getElementById(a[1]))&&a.parentNode?[a]:[]},NAME:function(a,b){if("undefined"!==typeof b.getElementsByName){for(var c=[],d=b.getElementsByName(a[1]),f=0,e=d.length;f<e;f++)d[f].getAttribute("name")===
a[1]&&c.push(d[f]);return 0===c.length?null:c}},TAG:function(a,b){if("undefined"!==typeof b.getElementsByTagName)return b.getElementsByTagName(a[1])}},preFilter:{CLASS:function(a,b,c,d,f,e){a=" "+a[1].replace(l,"")+" ";if(e)return a;for(var e=0,g;null!=(g=b[e]);e++)g&&(f^(g.className&&0<=(" "+g.className+" ").replace(/[\t\n\r]/g," ").indexOf(a))?c||d.push(g):c&&(b[e]=!1));return!1},ID:function(a){return a[1].replace(l,"")},TAG:function(a){return a[1].replace(l,"").toLowerCase()},CHILD:function(a){if("nth"===
a[1]){a[2]||t.error(a[0]);a[2]=a[2].replace(/^\+|\s*/g,"");var b=/(-?)(\d*)(?:n([+\-]?\d*))?/.exec("even"===a[2]&&"2n"||"odd"===a[2]&&"2n+1"||!/\D/.test(a[2])&&"0n+"+a[2]||a[2]);a[2]=b[1]+(b[2]||1)-0;a[3]=b[3]-0}else a[2]&&t.error(a[0]);a[0]=e++;return a},ATTR:function(a,b,c,d,f,e){b=a[1]=a[1].replace(l,"");!e&&q.attrMap[b]&&(a[1]=q.attrMap[b]);a[4]=(a[4]||a[5]||"").replace(l,"");"~="===a[2]&&(a[4]=" "+a[4]+" ");return a},PSEUDO:function(a,b,c,f,e){if("not"===a[1])if(1<(d.exec(a[3])||"").length||
/^\w/.test(a[3]))a[3]=t(a[3],null,null,b);else return a=t.filter(a[3],b,c,1^e),c||f.push.apply(f,a),!1;else if(q.match.POS.test(a[0])||q.match.CHILD.test(a[0]))return!0;return a},POS:function(a){a.unshift(!0);return a}},filters:{enabled:function(a){return!1===a.disabled&&"hidden"!==a.type},disabled:function(a){return!0===a.disabled},checked:function(a){return!0===a.checked},selected:function(a){a.parentNode&&a.parentNode.selectedIndex;return!0===a.selected},parent:function(a){return!!a.firstChild},
empty:function(a){return!a.firstChild},has:function(a,b,c){return!!t(c[3],a).length},header:function(a){return/h\d/i.test(a.nodeName)},text:function(a){var b=a.getAttribute("type"),c=a.type;return"input"===a.nodeName.toLowerCase()&&"text"===c&&(b===c||null===b)},radio:function(a){return"input"===a.nodeName.toLowerCase()&&"radio"===a.type},checkbox:function(a){return"input"===a.nodeName.toLowerCase()&&"checkbox"===a.type},file:function(a){return"input"===a.nodeName.toLowerCase()&&"file"===a.type},
password:function(a){return"input"===a.nodeName.toLowerCase()&&"password"===a.type},submit:function(a){var b=a.nodeName.toLowerCase();return("input"===b||"button"===b)&&"submit"===a.type},image:function(a){return"input"===a.nodeName.toLowerCase()&&"image"===a.type},reset:function(a){var b=a.nodeName.toLowerCase();return("input"===b||"button"===b)&&"reset"===a.type},button:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&"button"===a.type||"button"===b},input:function(a){return/input|select|textarea|button/i.test(a.nodeName)},
focus:function(a){return a===a.ownerDocument.activeElement}},setFilters:{first:function(a,b){return 0===b},last:function(a,b,c,d){return b===d.length-1},even:function(a,b){return 0===b%2},odd:function(a,b){return 1===b%2},lt:function(a,b,c){return b<c[3]-0},gt:function(a,b,c){return b>c[3]-0},nth:function(a,b,c){return c[3]-0===b},eq:function(a,b,c){return c[3]-0===b}},filter:{PSEUDO:function(a,b,c,d){var f=b[1],e=q.filters[f];if(e)return e(a,c,b,d);if("contains"===f)return 0<=(a.textContent||a.innerText||
k([a])||"").indexOf(b[3]);if("not"===f){b=b[3];c=0;for(d=b.length;c<d;c++)if(b[c]===a)return!1;return!0}t.error(f)},CHILD:function(a,b){var c,d,e,g,h,p;c=b[1];p=a;switch(c){case "only":case "first":for(;p=p.previousSibling;)if(1===p.nodeType)return!1;if("first"===c)return!0;p=a;case "last":for(;p=p.nextSibling;)if(1===p.nodeType)return!1;return!0;case "nth":c=b[2];d=b[3];if(1===c&&0===d)return!0;e=b[0];if((g=a.parentNode)&&(g[f]!==e||!a.nodeIndex)){h=0;for(p=g.firstChild;p;p=p.nextSibling)1===p.nodeType&&
(p.nodeIndex=++h);g[f]=e}p=a.nodeIndex-d;return 0===c?0===p:0===p%c&&0<=p/c}},ID:function(a,b){return 1===a.nodeType&&a.getAttribute("id")===b},TAG:function(a,b){return"*"===b&&1===a.nodeType||!!a.nodeName&&a.nodeName.toLowerCase()===b},CLASS:function(a,b){return-1<(" "+(a.className||a.getAttribute("class"))+" ").indexOf(b)},ATTR:function(a,b){var c=b[1],c=t.attr?t.attr(a,c):q.attrHandle[c]?q.attrHandle[c](a):null!=a[c]?a[c]:a.getAttribute(c),d=c+"",f=b[2],e=b[4];return null==c?"!="===f:!f&&t.attr?
null!=c:"="===f?d===e:"*="===f?0<=d.indexOf(e):"~="===f?0<=(" "+d+" ").indexOf(e):!e?d&&!1!==c:"!="===f?d!==e:"^="===f?0===d.indexOf(e):"$="===f?d.substr(d.length-e.length)===e:"|="===f?d===e||d.substr(0,e.length+1)===e+"-":!1},POS:function(a,b,c,d){var f=q.setFilters[b[2]];if(f)return f(a,c,b,d)}}},D=q.match.POS,z=function(a,b){return"\\"+(b-0+1)},E;for(E in q.match)q.match[E]=RegExp(q.match[E].source+/(?![^\[]*\])(?![^\(]*\))/.source),q.leftMatch[E]=RegExp(/(^(?:.|\r|\n)*?)/.source+q.match[E].source.replace(/\\(\d+)/g,
z));var s=function(a,b){a=Array.prototype.slice.call(a,0);return b?(b.push.apply(b,a),b):a};try{Array.prototype.slice.call(v.documentElement.childNodes,0)[0].nodeType}catch(C){s=function(a,b){var c=0,d=b||[];if("[object Array]"===h.call(a))Array.prototype.push.apply(d,a);else if("number"===typeof a.length)for(var f=a.length;c<f;c++)d.push(a[c]);else for(;a[c];c++)d.push(a[c]);return d}}var G,B;v.documentElement.compareDocumentPosition?G=function(a,b){return a===b?(i=!0,0):!a.compareDocumentPosition||
!b.compareDocumentPosition?a.compareDocumentPosition?-1:1:a.compareDocumentPosition(b)&4?-1:1}:(G=function(a,b){if(a===b)return i=!0,0;if(a.sourceIndex&&b.sourceIndex)return a.sourceIndex-b.sourceIndex;var c,d,f=[],e=[];c=a.parentNode;d=b.parentNode;var g=c;if(c===d)return B(a,b);if(c){if(!d)return 1}else return-1;for(;g;)f.unshift(g),g=g.parentNode;for(g=d;g;)e.unshift(g),g=g.parentNode;c=f.length;d=e.length;for(g=0;g<c&&g<d;g++)if(f[g]!==e[g])return B(f[g],e[g]);return g===c?B(a,e[g],-1):B(f[g],
b,1)},B=function(a,b,c){if(a===b)return c;for(a=a.nextSibling;a;){if(a===b)return-1;a=a.nextSibling}return 1});(function(){var a=v.createElement("div"),c="script"+(new Date).getTime(),d=v.documentElement;a.innerHTML="<a name='"+c+"'/>";d.insertBefore(a,d.firstChild);v.getElementById(c)&&(q.find.ID=function(a,c,d){if("undefined"!==typeof c.getElementById&&!d)return(c=c.getElementById(a[1]))?c.id===a[1]||"undefined"!==typeof c.getAttributeNode&&c.getAttributeNode("id").nodeValue===a[1]?[c]:b:[]},q.filter.ID=
function(a,b){var c="undefined"!==typeof a.getAttributeNode&&a.getAttributeNode("id");return 1===a.nodeType&&c&&c.nodeValue===b});d.removeChild(a);d=a=null})();(function(){var a=v.createElement("div");a.appendChild(v.createComment(""));0<a.getElementsByTagName("*").length&&(q.find.TAG=function(a,b){var c=b.getElementsByTagName(a[1]);if("*"===a[1]){for(var d=[],f=0;c[f];f++)1===c[f].nodeType&&d.push(c[f]);c=d}return c});a.innerHTML="<a href='#'></a>";a.firstChild&&"undefined"!==typeof a.firstChild.getAttribute&&
"#"!==a.firstChild.getAttribute("href")&&(q.attrHandle.href=function(a){return a.getAttribute("href",2)});a=null})();v.querySelectorAll&&function(){var a=t,b=v.createElement("div");b.innerHTML="<p class='TEST'></p>";if(!(b.querySelectorAll&&0===b.querySelectorAll(".TEST").length)){t=function(b,c,d,f){c=c||v;if(!f&&!t.isXML(c)){var e=/^(\w+$)|^\.([\w\-]+$)|^#([\w\-]+$)/.exec(b);if(e&&(1===c.nodeType||9===c.nodeType)){if(e[1])return s(c.getElementsByTagName(b),d);if(e[2]&&q.find.CLASS&&c.getElementsByClassName)return s(c.getElementsByClassName(e[2]),
d)}if(9===c.nodeType){if("body"===b&&c.body)return s([c.body],d);if(e&&e[3]){var g=c.getElementById(e[3]);if(g&&g.parentNode){if(g.id===e[3])return s([g],d)}else return s([],d)}try{return s(c.querySelectorAll(b),d)}catch(h){}}else if(1===c.nodeType&&"object"!==c.nodeName.toLowerCase()){var e=c,p=(g=c.getAttribute("id"))||"__sizzle__",i=c.parentNode,j=/^\s*[+~]/.test(b);g?p=p.replace(/'/g,"\\$&"):c.setAttribute("id",p);j&&i&&(c=c.parentNode);try{if(!j||i)return s(c.querySelectorAll("[id='"+p+"'] "+
b),d)}catch(l){}finally{g||e.removeAttribute("id")}}}return a(b,c,d,f)};for(var c in a)t[c]=a[c];b=null}}();(function(){var a=v.documentElement,b=a.matchesSelector||a.mozMatchesSelector||a.webkitMatchesSelector||a.msMatchesSelector;if(b){var c=!b.call(v.createElement("div"),"div"),d=!1;try{b.call(v.documentElement,"[test!='']:sizzle")}catch(f){d=!0}t.matchesSelector=function(a,f){f=f.replace(/\=\s*([^'"\]]*)\s*\]/g,"='$1']");if(!t.isXML(a))try{if(d||!q.match.PSEUDO.test(f)&&!/!=/.test(f)){var e=b.call(a,
f);if(e||!c||a.document&&11!==a.document.nodeType)return e}}catch(g){}return 0<t(f,null,null,[a]).length}}})();(function(){var a=v.createElement("div");a.innerHTML="<div class='test e'></div><div class='test'></div>";a.getElementsByClassName&&0!==a.getElementsByClassName("e").length&&(a.lastChild.className="e",1!==a.getElementsByClassName("e").length&&(q.order.splice(1,0,"CLASS"),q.find.CLASS=function(a,b,c){if("undefined"!==typeof b.getElementsByClassName&&!c)return b.getElementsByClassName(a[1])},
a=null))})();t.contains=v.documentElement.contains?function(a,b){return a!==b&&(a.contains?a.contains(b):!0)}:v.documentElement.compareDocumentPosition?function(a,b){return!!(a.compareDocumentPosition(b)&16)}:function(){return!1};t.isXML=function(a){return(a=(a?a.ownerDocument||a:0).documentElement)?"HTML"!==a.nodeName:!1};var A=function(a,b,c){for(var d,f=[],e="",b=b.nodeType?[b]:b;d=q.match.PSEUDO.exec(a);)e+=d[0],a=a.replace(q.match.PSEUDO,"");a=q.relative[a]?a+"*":a;d=0;for(var g=b.length;d<g;d++)t(a,
b[d],f,c);return t.filter(e,f)};t.attr=g.attr;t.selectors.attrMap={};g.find=t;g.expr=t.selectors;g.expr[":"]=g.expr.filters;g.unique=t.uniqueSort;g.text=t.getText;g.isXMLDoc=t.isXML;g.contains=t.contains})();var pa=/Until$/,qa=/^(?:parents|prevUntil|prevAll)/,ra=/,/,sa=/^.[^:#\[\.,]*$/,ta=Array.prototype.slice,Ta=g.expr.match.POS,Da={children:!0,contents:!0,next:!0,prev:!0};g.fn.extend({find:function(a){var b=this,c,d;if("string"!==typeof a)return g(a).filter(function(){for(c=0,d=b.length;c<d;c++)if(g.contains(b[c],
this))return!0});var f=this.pushStack("","find",a),e,h,i;for(c=0,d=this.length;c<d;c++)if(e=f.length,g.find(a,this[c],f),0<c)for(h=e;h<f.length;h++)for(i=0;i<e;i++)if(f[i]===f[h]){f.splice(h--,1);break}return f},has:function(a){var b=g(a);return this.filter(function(){for(var a=0,c=b.length;a<c;a++)if(g.contains(this,b[a]))return!0})},not:function(a){return this.pushStack(n(this,a,!1),"not",a)},filter:function(a){return this.pushStack(n(this,a,!0),"filter",a)},is:function(a){return!!a&&("string"===
typeof a?Ta.test(a)?0<=g(a,this.context).index(this[0]):0<g.filter(a,this).length:0<this.filter(a).length)},closest:function(a,b){var c=[],d,f,e=this[0];if(g.isArray(a)){for(f=1;e&&e.ownerDocument&&e!==b;){for(d=0;d<a.length;d++)g(e).is(a[d])&&c.push({selector:a[d],elem:e,level:f});e=e.parentNode;f++}return c}var h=Ta.test(a)||"string"!==typeof a?g(a,b||this.context):0;for(d=0,f=this.length;d<f;d++)for(e=this[d];e;)if(h?-1<h.index(e):g.find.matchesSelector(e,a)){c.push(e);break}else if(e=e.parentNode,
!e||!e.ownerDocument||e===b||11===e.nodeType)break;c=1<c.length?g.unique(c):c;return this.pushStack(c,"closest",a)},index:function(a){return!a?this[0]&&this[0].parentNode?this.prevAll().length:-1:"string"===typeof a?g.inArray(this[0],g(a)):g.inArray(a.jquery?a[0]:a,this)},add:function(a,b){var c="string"===typeof a?g(a,b):g.makeArray(a&&a.nodeType?[a]:a),d=g.merge(this.get(),c);return this.pushStack(!c[0]||!c[0].parentNode||11===c[0].parentNode.nodeType||!d[0]||!d[0].parentNode||11===d[0].parentNode.nodeType?
d:g.unique(d))},andSelf:function(){return this.add(this.prevObject)}});g.each({parent:function(a){return(a=a.parentNode)&&11!==a.nodeType?a:null},parents:function(a){return g.dir(a,"parentNode")},parentsUntil:function(a,b,c){return g.dir(a,"parentNode",c)},next:function(a){return g.nth(a,2,"nextSibling")},prev:function(a){return g.nth(a,2,"previousSibling")},nextAll:function(a){return g.dir(a,"nextSibling")},prevAll:function(a){return g.dir(a,"previousSibling")},nextUntil:function(a,b,c){return g.dir(a,
"nextSibling",c)},prevUntil:function(a,b,c){return g.dir(a,"previousSibling",c)},siblings:function(a){return g.sibling(a.parentNode.firstChild,a)},children:function(a){return g.sibling(a.firstChild)},contents:function(a){return g.nodeName(a,"iframe")?a.contentDocument||a.contentWindow.document:g.makeArray(a.childNodes)}},function(a,b){g.fn[a]=function(c,d){var f=g.map(this,b,c);pa.test(a)||(d=c);d&&"string"===typeof d&&(f=g.filter(d,f));f=1<this.length&&!Da[a]?g.unique(f):f;if((1<this.length||ra.test(d))&&
qa.test(a))f=f.reverse();return this.pushStack(f,a,ta.call(arguments).join(","))}});g.extend({filter:function(a,b,c){c&&(a=":not("+a+")");return 1===b.length?g.find.matchesSelector(b[0],a)?[b[0]]:[]:g.find.matches(a,b)},dir:function(a,c,d){for(var f=[],a=a[c];a&&9!==a.nodeType&&(d===b||1!==a.nodeType||!g(a).is(d));)1===a.nodeType&&f.push(a),a=a[c];return f},nth:function(a,b,c){for(var b=b||1,d=0;a&&!(1===a.nodeType&&++d===b);a=a[c]);return a},sibling:function(a,b){for(var c=[];a;a=a.nextSibling)1===
a.nodeType&&a!==b&&c.push(a);return c}});var Ma="abbr|article|aside|audio|canvas|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",Ea=/ jQuery\d+="(?:\d+|null)"/g,Aa=/^\s+/,Ua=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/ig,Va=/<([\w:]+)/,Fa=/<tbody/i,Ga=/<|&#?\w+;/,Ha=/<(?:script|style)/i,Ia=/<(?:script|object|embed|option|style)/i,Wa=RegExp("<(?:"+Ma+")","i"),Xa=/checked\s*(?:[^=]|=\s*.checked.)/i,Ja=/\/(java|ecma)script/i,
Ka=/^\s*<!(?:\[CDATA\[|\-\-)/,R={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],area:[1,"<map>","</map>"],_default:[0,"",""]},Ya=k(v);R.optgroup=R.option;R.tbody=R.tfoot=R.colgroup=R.caption=R.thead;R.th=R.td;g.support.htmlSerialize||(R._default=[1,"div<div>","</div>"]);
g.fn.extend({text:function(a){return g.isFunction(a)?this.each(function(b){var c=g(this);c.text(a.call(this,b,c.text()))}):"object"!==typeof a&&a!==b?this.empty().append((this[0]&&this[0].ownerDocument||v).createTextNode(a)):g.text(this)},wrapAll:function(a){if(g.isFunction(a))return this.each(function(b){g(this).wrapAll(a.call(this,b))});if(this[0]){var b=g(a,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&b.insertBefore(this[0]);b.map(function(){for(var a=this;a.firstChild&&1===a.firstChild.nodeType;)a=
a.firstChild;return a}).append(this)}return this},wrapInner:function(a){return g.isFunction(a)?this.each(function(b){g(this).wrapInner(a.call(this,b))}):this.each(function(){var b=g(this),c=b.contents();c.length?c.wrapAll(a):b.append(a)})},wrap:function(a){var b=g.isFunction(a);return this.each(function(c){g(this).wrapAll(b?a.call(this,c):a)})},unwrap:function(){return this.parent().each(function(){g.nodeName(this,"body")||g(this).replaceWith(this.childNodes)}).end()},append:function(){return this.domManip(arguments,
!0,function(a){1===this.nodeType&&this.appendChild(a)})},prepend:function(){return this.domManip(arguments,!0,function(a){1===this.nodeType&&this.insertBefore(a,this.firstChild)})},before:function(){if(this[0]&&this[0].parentNode)return this.domManip(arguments,!1,function(a){this.parentNode.insertBefore(a,this)});if(arguments.length){var a=g.clean(arguments);a.push.apply(a,this.toArray());return this.pushStack(a,"before",arguments)}},after:function(){if(this[0]&&this[0].parentNode)return this.domManip(arguments,
!1,function(a){this.parentNode.insertBefore(a,this.nextSibling)});if(arguments.length){var a=this.pushStack(this,"after",arguments);a.push.apply(a,g.clean(arguments));return a}},remove:function(a,b){for(var c=0,d;null!=(d=this[c]);c++)if(!a||g.filter(a,[d]).length)!b&&1===d.nodeType&&(g.cleanData(d.getElementsByTagName("*")),g.cleanData([d])),d.parentNode&&d.parentNode.removeChild(d);return this},empty:function(){for(var a=0,b;null!=(b=this[a]);a++)for(1===b.nodeType&&g.cleanData(b.getElementsByTagName("*"));b.firstChild;)b.removeChild(b.firstChild);
return this},clone:function(a,b){a=null==a?!1:a;b=null==b?a:b;return this.map(function(){return g.clone(this,a,b)})},html:function(a){if(a===b)return this[0]&&1===this[0].nodeType?this[0].innerHTML.replace(Ea,""):null;if("string"===typeof a&&!Ha.test(a)&&(g.support.leadingWhitespace||!Aa.test(a))&&!R[(Va.exec(a)||["",""])[1].toLowerCase()]){a=a.replace(Ua,"<$1></$2>");try{for(var c=0,d=this.length;c<d;c++)1===this[c].nodeType&&(g.cleanData(this[c].getElementsByTagName("*")),this[c].innerHTML=a)}catch(f){this.empty().append(a)}}else g.isFunction(a)?
this.each(function(b){var c=g(this);c.html(a.call(this,b,c.html()))}):this.empty().append(a);return this},replaceWith:function(a){if(this[0]&&this[0].parentNode){if(g.isFunction(a))return this.each(function(b){var c=g(this),d=c.html();c.replaceWith(a.call(this,b,d))});"string"!==typeof a&&(a=g(a).detach());return this.each(function(){var b=this.nextSibling,c=this.parentNode;g(this).remove();b?g(b).before(a):g(c).append(a)})}return this.length?this.pushStack(g(g.isFunction(a)?a():a),"replaceWith",
a):this},detach:function(a){return this.remove(a,!0)},domManip:function(a,c,d){var f,e,h,i=a[0],j=[];if(!g.support.checkClone&&3===arguments.length&&"string"===typeof i&&Xa.test(i))return this.each(function(){g(this).domManip(a,c,d,!0)});if(g.isFunction(i))return this.each(function(f){var e=g(this);a[0]=i.call(this,f,c?e.html():b);e.domManip(a,c,d)});if(this[0]){f=i&&i.parentNode;f=g.support.parentNode&&f&&11===f.nodeType&&f.childNodes.length===this.length?{fragment:f}:g.buildFragment(a,this,j);h=
f.fragment;if(e=1===h.childNodes.length?h=h.firstChild:h.firstChild){c=c&&g.nodeName(e,"tr");e=0;for(var l=this.length,x=l-1;e<l;e++)d.call(c?g.nodeName(this[e],"table")?this[e].getElementsByTagName("tbody")[0]||this[e].appendChild(this[e].ownerDocument.createElement("tbody")):this[e]:this[e],f.cacheable||1<l&&e<x?g.clone(h,!0,!0):h)}j.length&&g.each(j,o)}return this}});g.buildFragment=function(a,b,c){var d,f,e,h,i=a[0];b&&b[0]&&(h=b[0].ownerDocument||b[0]);h.createDocumentFragment||(h=v);if(1===
a.length&&"string"===typeof i&&512>i.length&&h===v&&"<"===i.charAt(0)&&!Ia.test(i)&&(g.support.checkClone||!Xa.test(i))&&(g.support.html5Clone||!Wa.test(i)))f=!0,(e=g.fragments[i])&&1!==e&&(d=e);d||(d=h.createDocumentFragment(),g.clean(a,h,d,c));f&&(g.fragments[i]=e?d:1);return{fragment:d,cacheable:f}};g.fragments={};g.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,b){g.fn[a]=function(c){var d=[],c=g(c),f=1===this.length&&
this[0].parentNode;if(f&&11===f.nodeType&&1===f.childNodes.length&&1===c.length)return c[b](this[0]),this;for(var f=0,e=c.length;f<e;f++){var h=(0<f?this.clone(!0):this).get();g(c[f])[b](h);d=d.concat(h)}return this.pushStack(d,a,c.selector)}});g.extend({clone:function(a,b,c){var d,f,e;g.support.html5Clone||!Wa.test("<"+a.nodeName)?d=a.cloneNode(!0):(d=v.createElement("div"),Ya.appendChild(d),d.innerHTML=a.outerHTML,d=d.firstChild);var h=d;if((!g.support.noCloneEvent||!g.support.noCloneChecked)&&
(1===a.nodeType||11===a.nodeType)&&!g.isXMLDoc(a)){s(a,h);d=r(a);f=r(h);for(e=0;d[e];++e)f[e]&&s(d[e],f[e])}if(b&&(C(a,h),c)){d=r(a);f=r(h);for(e=0;d[e];++e)C(d[e],f[e])}return h},clean:function(a,b,c,d){b=b||v;"undefined"===typeof b.createElement&&(b=b.ownerDocument||b[0]&&b[0].ownerDocument||v);for(var f=[],e,h=0,i;null!=(i=a[h]);h++)if("number"===typeof i&&(i+=""),i){if("string"===typeof i)if(Ga.test(i)){i=i.replace(Ua,"<$1></$2>");e=(Va.exec(i)||["",""])[1].toLowerCase();var j=R[e]||R._default,
l=j[0],x=b.createElement("div");b===v?Ya.appendChild(x):k(b).appendChild(x);for(x.innerHTML=j[1]+i+j[2];l--;)x=x.lastChild;if(!g.support.tbody){l=Fa.test(i);j="table"===e&&!l?x.firstChild&&x.firstChild.childNodes:"<table>"===j[1]&&!l?x.childNodes:[];for(e=j.length-1;0<=e;--e)g.nodeName(j[e],"tbody")&&!j[e].childNodes.length&&j[e].parentNode.removeChild(j[e])}!g.support.leadingWhitespace&&Aa.test(i)&&x.insertBefore(b.createTextNode(Aa.exec(i)[0]),x.firstChild);i=x.childNodes}else i=b.createTextNode(i);
var n;if(!g.support.appendChecked)if(i[0]&&"number"===typeof(n=i.length))for(e=0;e<n;e++)u(i[e]);else u(i);i.nodeType?f.push(i):f=g.merge(f,i)}if(c){a=function(a){return!a.type||Ja.test(a.type)};for(h=0;f[h];h++)d&&g.nodeName(f[h],"script")&&(!f[h].type||"text/javascript"===f[h].type.toLowerCase())?d.push(f[h].parentNode?f[h].parentNode.removeChild(f[h]):f[h]):(1===f[h].nodeType&&(b=g.grep(f[h].getElementsByTagName("script"),a),f.splice.apply(f,[h+1,0].concat(b))),c.appendChild(f[h]))}return f},cleanData:function(a){for(var b,
c,d=g.cache,f=g.event.special,e=g.support.deleteExpando,h=0,i;null!=(i=a[h]);h++)if(!i.nodeName||!g.noData[i.nodeName.toLowerCase()])if(c=i[g.expando]){if((b=d[c])&&b.events){for(var j in b.events)f[j]?g.event.remove(i,j):g.removeEvent(i,j,b.handle);b.handle&&(b.handle.elem=null)}e?delete i[g.expando]:i.removeAttribute&&i.removeAttribute(g.expando);delete d[c]}}});var Ba=/alpha\([^)]*\)/i,La=/opacity=([^)]*)/,ob=/([A-Z]|^ms)/g,Za=/^-?\d+(?:px)?$/i,pb=/^-?\d/,qb=/^([\-+])=([\-+.\de]+)/,rb={position:"absolute",
visibility:"hidden",display:"block"},ib=["Left","Right"],jb=["Top","Bottom"],ba,$a,ab;g.fn.css=function(a,c){return 2===arguments.length&&c===b?this:g.access(this,a,c,!0,function(a,c,d){return d!==b?g.style(a,c,d):g.css(a,c)})};g.extend({cssHooks:{opacity:{get:function(a,b){if(b){var c=ba(a,"opacity","opacity");return""===c?"1":c}return a.style.opacity}}},cssNumber:{fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":g.support.cssFloat?"cssFloat":
"styleFloat"},style:function(a,c,d,f){if(a&&!(3===a.nodeType||8===a.nodeType||!a.style)){var e,h=g.camelCase(c),i=a.style,j=g.cssHooks[h],c=g.cssProps[h]||h;if(d!==b){f=typeof d;if("string"===f&&(e=qb.exec(d)))d=+(e[1]+1)*+e[2]+parseFloat(g.css(a,c)),f="number";if(!(null==d||"number"===f&&isNaN(d)))if("number"===f&&!g.cssNumber[h]&&(d+="px"),!j||!("set"in j)||(d=j.set(a,d))!==b)try{i[c]=d}catch(l){}}else return j&&"get"in j&&(e=j.get(a,!1,f))!==b?e:i[c]}},css:function(a,c,d){var f,e,c=g.camelCase(c);
e=g.cssHooks[c];c=g.cssProps[c]||c;"cssFloat"===c&&(c="float");if(e&&"get"in e&&(f=e.get(a,!0,d))!==b)return f;if(ba)return ba(a,c)},swap:function(a,b,c){var d={},f;for(f in b)d[f]=a.style[f],a.style[f]=b[f];c.call(a);for(f in b)a.style[f]=d[f]}});g.curCSS=g.css;g.each(["height","width"],function(a,b){g.cssHooks[b]={get:function(a,c,d){var f;if(c){if(0!==a.offsetWidth)return m(a,b,d);g.swap(a,rb,function(){f=m(a,b,d)});return f}},set:function(a,b){if(Za.test(b)){if(b=parseFloat(b),0<=b)return b+"px"}else return b}}});
g.support.opacity||(g.cssHooks.opacity={get:function(a,b){return La.test((b&&a.currentStyle?a.currentStyle.filter:a.style.filter)||"")?parseFloat(RegExp.$1)/100+"":b?"1":""},set:function(a,b){var c=a.style,d=a.currentStyle,f=g.isNumeric(b)?"alpha(opacity="+100*b+")":"",e=d&&d.filter||c.filter||"";c.zoom=1;if(1<=b&&""===g.trim(e.replace(Ba,""))&&(c.removeAttribute("filter"),d&&!d.filter))return;c.filter=Ba.test(e)?e.replace(Ba,f):e+" "+f}});g(function(){g.support.reliableMarginRight||(g.cssHooks.marginRight=
{get:function(a,b){var c;g.swap(a,{display:"inline-block"},function(){c=b?ba(a,"margin-right","marginRight"):a.style.marginRight});return c}})});v.defaultView&&v.defaultView.getComputedStyle&&($a=function(a,b){var c,d,f,b=b.replace(ob,"-$1").toLowerCase();if((d=a.ownerDocument.defaultView)&&(f=d.getComputedStyle(a,null)))c=f.getPropertyValue(b),""===c&&!g.contains(a.ownerDocument.documentElement,a)&&(c=g.style(a,b));return c});v.documentElement.currentStyle&&(ab=function(a,b){var c,d,f=a.currentStyle&&
a.currentStyle[b],e=a.style;if(null===f&&e&&(c=e[b]))f=c;if(!Za.test(f)&&pb.test(f)){c=e.left;if(d=a.runtimeStyle&&a.runtimeStyle.left)a.runtimeStyle.left=a.currentStyle.left;e.left="fontSize"===b?"1em":f||0;f=e.pixelLeft+"px";e.left=c;d&&(a.runtimeStyle.left=d)}return""===f?"auto":f});ba=$a||ab;g.expr&&g.expr.filters&&(g.expr.filters.hidden=function(a){var b=a.offsetHeight;return 0===a.offsetWidth&&0===b||!g.support.reliableHiddenOffsets&&"none"===(a.style&&a.style.display||g.css(a,"display"))},
g.expr.filters.visible=function(a){return!g.expr.filters.hidden(a)});var sb=/%20/g,kb=/\[\]$/,bb=/\r?\n/g,tb=/#.*$/,ub=/^(.*?):[ \t]*([^\r\n]*)\r?$/mg,vb=/^(?:color|date|datetime|datetime-local|email|hidden|month|number|password|range|search|tel|text|time|url|week)$/i,wb=/^(?:GET|HEAD)$/,xb=/^\/\//,cb=/\?/,yb=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,zb=/^(?:select|textarea)/i,Na=/\s+/,Ab=/([?&])_=[^&]*/,db=/^([\w\+\.\-]+:)(?:\/\/([^\/?#:]*)(?::(\d+))?)?/,eb=g.fn.load,va={},fb={},Z,$,
gb=["*/"]+["*"];try{Z=K.href}catch(Gb){Z=v.createElement("a"),Z.href="",Z=Z.href}$=db.exec(Z.toLowerCase())||[];g.fn.extend({load:function(a,c,d){if("string"!==typeof a&&eb)return eb.apply(this,arguments);if(!this.length)return this;var f=a.indexOf(" ");if(0<=f)var e=a.slice(f,a.length),a=a.slice(0,f);f="GET";c&&(g.isFunction(c)?(d=c,c=b):"object"===typeof c&&(c=g.param(c,g.ajaxSettings.traditional),f="POST"));var h=this;g.ajax({url:a,type:f,dataType:"html",data:c,complete:function(a,b,c){c=a.responseText;
a.isResolved()&&(a.done(function(a){c=a}),h.html(e?g("<div>").append(c.replace(yb,"")).find(e):c));d&&h.each(d,[c,b,a])}});return this},serialize:function(){return g.param(this.serializeArray())},serializeArray:function(){return this.map(function(){return this.elements?g.makeArray(this.elements):this}).filter(function(){return this.name&&!this.disabled&&(this.checked||zb.test(this.nodeName)||vb.test(this.type))}).map(function(a,b){var c=g(this).val();return null==c?null:g.isArray(c)?g.map(c,function(a){return{name:b.name,
value:a.replace(bb,"\r\n")}}):{name:b.name,value:c.replace(bb,"\r\n")}}).get()}});g.each("ajaxStart,ajaxStop,ajaxComplete,ajaxError,ajaxSuccess,ajaxSend".split(","),function(a,b){g.fn[b]=function(a){return this.on(b,a)}});g.each(["get","post"],function(a,c){g[c]=function(a,d,f,e){g.isFunction(d)&&(e=e||f,f=d,d=b);return g.ajax({type:c,url:a,data:d,success:f,dataType:e})}});g.extend({getScript:function(a,c){return g.get(a,b,c,"script")},getJSON:function(a,b,c){return g.get(a,b,c,"json")},ajaxSetup:function(a,
b){b?y(a,g.ajaxSettings):(b=a,a=g.ajaxSettings);y(a,b);return a},ajaxSettings:{url:Z,isLocal:/^(?:about|app|app\-storage|.+\-extension|file|res|widget):$/.test($[1]),global:!0,type:"GET",contentType:"application/x-www-form-urlencoded",processData:!0,async:!0,accepts:{xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript","*":gb},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":a.String,
"text html":!0,"text json":g.parseJSON,"text xml":g.parseXML},flatOptions:{context:!0,url:!0}},ajaxPrefilter:A(va),ajaxTransport:A(fb),ajax:function(a,c){function d(a,c,p,n){if(2!==s){s=2;z&&clearTimeout(z);D=b;q=n||"";B.readyState=0<a?4:0;var t,k,E,n=c;if(p){var H=f,G=B,I=H.contents,A=H.dataTypes,v=H.responseFields,r,u,J,ea;for(u in v)u in p&&(G[v[u]]=p[u]);for(;"*"===A[0];)A.shift(),r===b&&(r=H.mimeType||G.getResponseHeader("content-type"));if(r)for(u in I)if(I[u]&&I[u].test(r)){A.unshift(u);break}if(A[0]in
p)J=A[0];else{for(u in p){if(!A[0]||H.converters[u+" "+A[0]]){J=u;break}ea||(ea=u)}J=J||ea}J?(J!==A[0]&&A.unshift(J),p=p[J]):p=void 0}else p=b;if(200<=a&&300>a||304===a){if(f.ifModified){if(r=B.getResponseHeader("Last-Modified"))g.lastModified[x]=r;if(r=B.getResponseHeader("Etag"))g.etag[x]=r}if(304===a)n="notmodified",t=!0;else try{r=f;r.dataFilter&&(p=r.dataFilter(p,r.dataType));var o=r.dataTypes;u={};var m,T,w=o.length,aa,O=o[0],y,W,N,U,X;for(m=1;m<w;m++){if(1===m)for(T in r.converters)"string"===
typeof T&&(u[T.toLowerCase()]=r.converters[T]);y=O;O=o[m];if("*"===O)O=y;else if("*"!==y&&y!==O){W=y+" "+O;N=u[W]||u["* "+O];if(!N)for(U in X=b,u)if(aa=U.split(" "),aa[0]===y||"*"===aa[0])if(X=u[aa[1]+" "+O]){U=u[U];!0===U?N=X:!0===X&&(N=U);break}!N&&!X&&g.error("No conversion from "+W.replace(" "," to "));!0!==N&&(p=N?N(p):X(U(p)))}}k=p;n="success";t=!0}catch(ua){n="parsererror",E=ua}}else if(E=n,!n||a)n="error",0>a&&(a=0);B.status=a;B.statusText=""+(c||n);t?i.resolveWith(e,[k,n,B]):i.rejectWith(e,
[B,n,E]);B.statusCode(l);l=b;C&&h.trigger("ajax"+(t?"Success":"Error"),[B,f,t?k:E]);j.fireWith(e,[B,n]);C&&(h.trigger("ajaxComplete",[B,f]),--g.active||g.event.trigger("ajaxStop"))}}"object"===typeof a&&(c=a,a=b);var c=c||{},f=g.ajaxSetup({},c),e=f.context||f,h=e!==f&&(e.nodeType||e instanceof g)?g(e):g.event,i=g.Deferred(),j=g.Callbacks("once memory"),l=f.statusCode||{},x,n={},t={},q,k,D,z,E,s=0,C,G,B={readyState:0,setRequestHeader:function(a,b){if(!s){var c=a.toLowerCase(),a=t[c]=t[c]||a;n[a]=b}return this},
getAllResponseHeaders:function(){return 2===s?q:null},getResponseHeader:function(a){var c;if(2===s){if(!k)for(k={};c=ub.exec(q);)k[c[1].toLowerCase()]=c[2];c=k[a.toLowerCase()]}return c===b?null:c},overrideMimeType:function(a){s||(f.mimeType=a);return this},abort:function(a){a=a||"abort";D&&D.abort(a);d(0,a);return this}};i.promise(B);B.success=B.done;B.error=B.fail;B.complete=j.add;B.statusCode=function(a){if(a){var b;if(2>s)for(b in a)l[b]=[l[b],a[b]];else b=a[B.status],B.then(b,b)}return this};
f.url=((a||f.url)+"").replace(tb,"").replace(xb,$[1]+"//");f.dataTypes=g.trim(f.dataType||"*").toLowerCase().split(Na);null==f.crossDomain&&(E=db.exec(f.url.toLowerCase()),f.crossDomain=!(!E||!(E[1]!=$[1]||E[2]!=$[2]||(E[3]||("http:"===E[1]?80:443))!=($[3]||("http:"===$[1]?80:443)))));f.data&&f.processData&&"string"!==typeof f.data&&(f.data=g.param(f.data,f.traditional));w(va,f,c,B);if(2===s)return!1;C=f.global;f.type=f.type.toUpperCase();f.hasContent=!wb.test(f.type);C&&0===g.active++&&g.event.trigger("ajaxStart");
if(!f.hasContent&&(f.data&&(f.url+=(cb.test(f.url)?"&":"?")+f.data,delete f.data),x=f.url,!1===f.cache)){E=g.now();var A=f.url.replace(Ab,"$1_="+E);f.url=A+(A===f.url?(cb.test(f.url)?"&":"?")+"_="+E:"")}(f.data&&f.hasContent&&!1!==f.contentType||c.contentType)&&B.setRequestHeader("Content-Type",f.contentType);f.ifModified&&(x=x||f.url,g.lastModified[x]&&B.setRequestHeader("If-Modified-Since",g.lastModified[x]),g.etag[x]&&B.setRequestHeader("If-None-Match",g.etag[x]));B.setRequestHeader("Accept",f.dataTypes[0]&&
f.accepts[f.dataTypes[0]]?f.accepts[f.dataTypes[0]]+("*"!==f.dataTypes[0]?", "+gb+"; q=0.01":""):f.accepts["*"]);for(G in f.headers)B.setRequestHeader(G,f.headers[G]);if(f.beforeSend&&(!1===f.beforeSend.call(e,B,f)||2===s))return B.abort(),!1;for(G in{success:1,error:1,complete:1})B[G](f[G]);if(D=w(fb,f,c,B)){B.readyState=1;C&&h.trigger("ajaxSend",[B,f]);f.async&&0<f.timeout&&(z=setTimeout(function(){B.abort("timeout")},f.timeout));try{s=1,D.send(n,d)}catch(v){if(2>s)d(-1,v);else throw v;}}else d(-1,
"No Transport");return B},param:function(a,c){var d=[],f=function(a,b){b=g.isFunction(b)?b():b;d[d.length]=encodeURIComponent(a)+"="+encodeURIComponent(b)};c===b&&(c=g.ajaxSettings.traditional);if(g.isArray(a)||a.jquery&&!g.isPlainObject(a))g.each(a,function(){f(this.name,this.value)});else for(var e in a)l(e,a[e],c,f);return d.join("&").replace(sb,"+")}});g.extend({active:0,lastModified:{},etag:{}});var Bb=g.now(),na=/(\=)\?(&|$)|\?\?/i;g.ajaxSetup({jsonp:"callback",jsonpCallback:function(){return g.expando+
"_"+Bb++}});g.ajaxPrefilter("json jsonp",function(b,c,d){c="application/x-www-form-urlencoded"===b.contentType&&"string"===typeof b.data;if("jsonp"===b.dataTypes[0]||!1!==b.jsonp&&(na.test(b.url)||c&&na.test(b.data))){var f,e=b.jsonpCallback=g.isFunction(b.jsonpCallback)?b.jsonpCallback():b.jsonpCallback,h=a[e],i=b.url,j=b.data,l="$1"+e+"$2";!1!==b.jsonp&&(i=i.replace(na,l),b.url===i&&(c&&(j=j.replace(na,l)),b.data===j&&(i+=(/\?/.test(i)?"&":"?")+b.jsonp+"="+e)));b.url=i;b.data=j;a[e]=function(a){f=
[a]};d.always(function(){a[e]=h;if(f&&g.isFunction(h))a[e](f[0])});b.converters["script json"]=function(){f||g.error(e+" was not called");return f[0]};b.dataTypes[0]="json";return"script"}});g.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/javascript|ecmascript/},converters:{"text script":function(a){g.globalEval(a);return a}}});g.ajaxPrefilter("script",function(a){a.cache===b&&(a.cache=!1);a.crossDomain&&(a.type=
"GET",a.global=!1)});g.ajaxTransport("script",function(a){if(a.crossDomain){var c,d=v.head||v.getElementsByTagName("head")[0]||v.documentElement;return{send:function(f,e){c=v.createElement("script");c.async="async";a.scriptCharset&&(c.charset=a.scriptCharset);c.src=a.url;c.onload=c.onreadystatechange=function(a,f){if(f||!c.readyState||/loaded|complete/.test(c.readyState))c.onload=c.onreadystatechange=null,d&&c.parentNode&&d.removeChild(c),c=b,f||e(200,"success")};d.insertBefore(c,d.firstChild)},abort:function(){if(c)c.onload(0,
1)}}}});var Ca=a.ActiveXObject?function(){for(var a in fa)fa[a](0,1)}:!1,Cb=0,fa;g.ajaxSettings.xhr=a.ActiveXObject?function(){var b;if(!(b=!this.isLocal&&j()))a:{try{b=new a.ActiveXObject("Microsoft.XMLHTTP");break a}catch(c){}b=void 0}return b}:j;(function(a){g.extend(g.support,{ajax:!!a,cors:!!a&&"withCredentials"in a})})(g.ajaxSettings.xhr());g.support.ajax&&g.ajaxTransport(function(c){if(!c.crossDomain||g.support.cors){var d;return{send:function(f,e){var h=c.xhr(),i,j;c.username?h.open(c.type,
c.url,c.async,c.username,c.password):h.open(c.type,c.url,c.async);if(c.xhrFields)for(j in c.xhrFields)h[j]=c.xhrFields[j];c.mimeType&&h.overrideMimeType&&h.overrideMimeType(c.mimeType);!c.crossDomain&&!f["X-Requested-With"]&&(f["X-Requested-With"]="XMLHttpRequest");try{for(j in f)h.setRequestHeader(j,f[j])}catch(l){}h.send(c.hasContent&&c.data||null);d=function(a,f){var j,l,x,n,t;try{if(d&&(f||4===h.readyState))if(d=b,i&&(h.onreadystatechange=g.noop,Ca&&delete fa[i]),f)4!==h.readyState&&h.abort();
else{j=h.status;x=h.getAllResponseHeaders();n={};if((t=h.responseXML)&&t.documentElement)n.xml=t;n.text=h.responseText;try{l=h.statusText}catch(q){l=""}!j&&c.isLocal&&!c.crossDomain?j=n.text?200:404:1223===j&&(j=204)}}catch(k){f||e(-1,k)}n&&e(j,l,n,x)};!c.async||4===h.readyState?d():(i=++Cb,Ca&&(fa||(fa={},g(a).unload(Ca)),fa[i]=d),h.onreadystatechange=d)},abort:function(){d&&d(0,1)}}}});var wa={},S,ca,Db=/^(?:toggle|show|hide)$/,Eb=/^([+\-]=)?([\d+.\-]+)([a-z%]*)$/i,oa,Oa=[["height","marginTop",
"marginBottom","paddingTop","paddingBottom"],["width","marginLeft","marginRight","paddingLeft","paddingRight"],["opacity"]],la;g.fn.extend({show:function(a,b,c){if(a||0===a)return this.animate(B("show",3),a,b,c);for(var c=0,d=this.length;c<d;c++)a=this[c],a.style&&(b=a.style.display,!g._data(a,"olddisplay")&&"none"===b&&(b=a.style.display=""),""===b&&"none"===g.css(a,"display")&&g._data(a,"olddisplay",W(a.nodeName)));for(c=0;c<d;c++)if(a=this[c],a.style&&(b=a.style.display,""===b||"none"===b))a.style.display=
g._data(a,"olddisplay")||"";return this},hide:function(a,b,c){if(a||0===a)return this.animate(B("hide",3),a,b,c);for(var c=0,d=this.length;c<d;c++)a=this[c],a.style&&(b=g.css(a,"display"),"none"!==b&&!g._data(a,"olddisplay")&&g._data(a,"olddisplay",b));for(c=0;c<d;c++)this[c].style&&(this[c].style.display="none");return this},_toggle:g.fn.toggle,toggle:function(a,b,c){var d="boolean"===typeof a;g.isFunction(a)&&g.isFunction(b)?this._toggle.apply(this,arguments):null==a||d?this.each(function(){var b=
d?a:g(this).is(":hidden");g(this)[b?"show":"hide"]()}):this.animate(B("toggle",3),a,b,c);return this},fadeTo:function(a,b,c,d){return this.filter(":hidden").css("opacity",0).show().end().animate({opacity:b},a,c,d)},animate:function(a,b,c,d){function f(){!1===e.queue&&g._mark(this);var b=g.extend({},e),c=1===this.nodeType,d=c&&g(this).is(":hidden"),h,i,j,l,x;b.animatedProperties={};for(j in a){h=g.camelCase(j);j!==h&&(a[h]=a[j],delete a[j]);i=a[h];g.isArray(i)?(b.animatedProperties[h]=i[1],i=a[h]=
i[0]):b.animatedProperties[h]=b.specialEasing&&b.specialEasing[h]||b.easing||"swing";if("hide"===i&&d||"show"===i&&!d)return b.complete.call(this);if(c&&("height"===h||"width"===h))b.overflow=[this.style.overflow,this.style.overflowX,this.style.overflowY],"inline"===g.css(this,"display")&&"none"===g.css(this,"float")&&(!g.support.inlineBlockNeedsLayout||"inline"===W(this.nodeName)?this.style.display="inline-block":this.style.zoom=1)}null!=b.overflow&&(this.style.overflow="hidden");for(j in a)if(c=
new g.fx(this,b,j),i=a[j],Db.test(i))if(h=g._data(this,"toggle"+j)||("toggle"===i?d?"show":"hide":0))g._data(this,"toggle"+j,"show"===h?"hide":"show"),c[h]();else c[i]();else h=Eb.exec(i),l=c.cur(),h?(i=parseFloat(h[2]),x=h[3]||(g.cssNumber[j]?"":"px"),"px"!==x&&(g.style(this,j,(i||1)+x),l*=(i||1)/c.cur(),g.style(this,j,l+x)),h[1]&&(i=("-="===h[1]?-1:1)*i+l),c.custom(l,i,x)):c.custom(l,i,"");return!0}var e=g.speed(b,c,d);if(g.isEmptyObject(a))return this.each(e.complete,[!1]);a=g.extend({},a);return!1===
e.queue?this.each(f):this.queue(e.queue,f)},stop:function(a,c,d){"string"!==typeof a&&(d=c,c=a,a=b);c&&!1!==a&&this.queue(a||"fx",[]);return this.each(function(){var b,c=!1,f=g.timers,e=g._data(this);d||g._unmark(!0,this);if(null==a)for(b in e){if(e[b]&&e[b].stop&&b.indexOf(".run")===b.length-4){var h=e[b];g.removeData(this,b,!0);h.stop(d)}}else if(e[b=a+".run"]&&e[b].stop)e=e[b],g.removeData(this,b,!0),e.stop(d);for(b=f.length;b--;)if(f[b].elem===this&&(null==a||f[b].queue===a)){if(d)f[b](!0);else f[b].saveState();
c=!0;f.splice(b,1)}(!d||!c)&&g.dequeue(this,a)})}});g.each({slideDown:B("show",1),slideUp:B("hide",1),slideToggle:B("toggle",1),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(a,b){g.fn[a]=function(a,c,d){return this.animate(b,a,c,d)}});g.extend({speed:function(a,b,c){var d=a&&"object"===typeof a?g.extend({},a):{complete:c||!c&&b||g.isFunction(a)&&a,duration:a,easing:c&&b||b&&!g.isFunction(b)&&b};d.duration=g.fx.off?0:"number"===typeof d.duration?d.duration:
d.duration in g.fx.speeds?g.fx.speeds[d.duration]:g.fx.speeds._default;if(null==d.queue||!0===d.queue)d.queue="fx";d.old=d.complete;d.complete=function(a){g.isFunction(d.old)&&d.old.call(this);d.queue?g.dequeue(this,d.queue):!1!==a&&g._unmark(this)};return d},easing:{linear:function(a,b,c,d){return c+d*a},swing:function(a,b,c,d){return(-Math.cos(a*Math.PI)/2+0.5)*d+c}},timers:[],fx:function(a,b,c){this.options=b;this.elem=a;this.prop=c;b.orig=b.orig||{}}});g.fx.prototype={update:function(){this.options.step&&
this.options.step.call(this.elem,this.now,this);(g.fx.step[this.prop]||g.fx.step._default)(this)},cur:function(){if(null!=this.elem[this.prop]&&(!this.elem.style||null==this.elem.style[this.prop]))return this.elem[this.prop];var a,b=g.css(this.elem,this.prop);return isNaN(a=parseFloat(b))?!b||"auto"===b?0:b:a},custom:function(a,c,d){function f(a){return e.step(a)}var e=this,h=g.fx;this.startTime=la||D();this.end=c;this.now=this.start=a;this.pos=this.state=0;this.unit=d||this.unit||(g.cssNumber[this.prop]?
"":"px");f.queue=this.options.queue;f.elem=this.elem;f.saveState=function(){e.options.hide&&g._data(e.elem,"fxshow"+e.prop)===b&&g._data(e.elem,"fxshow"+e.prop,e.start)};f()&&g.timers.push(f)&&!oa&&(oa=setInterval(h.tick,h.interval))},show:function(){var a=g._data(this.elem,"fxshow"+this.prop);this.options.orig[this.prop]=a||g.style(this.elem,this.prop);this.options.show=!0;a!==b?this.custom(this.cur(),a):this.custom("width"===this.prop||"height"===this.prop?1:0,this.cur());g(this.elem).show()},hide:function(){this.options.orig[this.prop]=
g._data(this.elem,"fxshow"+this.prop)||g.style(this.elem,this.prop);this.options.hide=!0;this.custom(this.cur(),0)},step:function(a){var b,c=la||D(),d=!0,f=this.elem,e=this.options;if(a||c>=e.duration+this.startTime){this.now=this.end;this.pos=this.state=1;this.update();e.animatedProperties[this.prop]=!0;for(b in e.animatedProperties)!0!==e.animatedProperties[b]&&(d=!1);if(d){null!=e.overflow&&!g.support.shrinkWrapBlocks&&g.each(["","X","Y"],function(a,b){f.style["overflow"+b]=e.overflow[a]});e.hide&&
g(f).hide();if(e.hide||e.show)for(b in e.animatedProperties)g.style(f,b,e.orig[b]),g.removeData(f,"fxshow"+b,!0),g.removeData(f,"toggle"+b,!0);if(a=e.complete)e.complete=!1,a.call(f)}return!1}Infinity==e.duration?this.now=c:(a=c-this.startTime,this.state=a/e.duration,this.pos=g.easing[e.animatedProperties[this.prop]](this.state,a,0,1,e.duration),this.now=this.start+(this.end-this.start)*this.pos);this.update();return!0}};g.extend(g.fx,{tick:function(){for(var a,b=g.timers,c=0;c<b.length;c++)a=b[c],
!a()&&b[c]===a&&b.splice(c--,1);b.length||g.fx.stop()},interval:13,stop:function(){clearInterval(oa);oa=null},speeds:{slow:600,fast:200,_default:400},step:{opacity:function(a){g.style(a.elem,"opacity",a.now)},_default:function(a){a.elem.style&&null!=a.elem.style[a.prop]?a.elem.style[a.prop]=a.now+a.unit:a.elem[a.prop]=a.now}}});g.each(["width","height"],function(a,b){g.fx.step[b]=function(a){g.style(a.elem,b,Math.max(0,a.now)+a.unit)}});g.expr&&g.expr.filters&&(g.expr.filters.animated=function(a){return g.grep(g.timers,
function(b){return a===b.elem}).length});var Fb=/^t(?:able|d|h)$/i,hb=/^(?:body|html)$/i;g.fn.offset="getBoundingClientRect"in v.documentElement?function(a){var b=this[0],c;if(a)return this.each(function(b){g.offset.setOffset(this,a,b)});if(!b||!b.ownerDocument)return null;if(b===b.ownerDocument.body)return g.offset.bodyOffset(b);try{c=b.getBoundingClientRect()}catch(d){}var f=b.ownerDocument,e=f.documentElement;if(!c||!g.contains(e,b))return c?{top:c.top,left:c.left}:{top:0,left:0};b=f.body;f=Y(f);
return{top:c.top+(f.pageYOffset||g.support.boxModel&&e.scrollTop||b.scrollTop)-(e.clientTop||b.clientTop||0),left:c.left+(f.pageXOffset||g.support.boxModel&&e.scrollLeft||b.scrollLeft)-(e.clientLeft||b.clientLeft||0)}}:function(a){var b=this[0];if(a)return this.each(function(b){g.offset.setOffset(this,a,b)});if(!b||!b.ownerDocument)return null;if(b===b.ownerDocument.body)return g.offset.bodyOffset(b);var c,d=b.offsetParent,f=b.ownerDocument,e=f.documentElement,h=f.body;c=(f=f.defaultView)?f.getComputedStyle(b,
null):b.currentStyle;for(var i=b.offsetTop,j=b.offsetLeft;(b=b.parentNode)&&b!==h&&b!==e&&!(g.support.fixedPosition&&"fixed"===c.position);){c=f?f.getComputedStyle(b,null):b.currentStyle;i-=b.scrollTop;j-=b.scrollLeft;if(b===d){i+=b.offsetTop;j+=b.offsetLeft;if(g.support.doesNotAddBorder&&(!g.support.doesAddBorderForTableAndCells||!Fb.test(b.nodeName)))i+=parseFloat(c.borderTopWidth)||0,j+=parseFloat(c.borderLeftWidth)||0;d=b.offsetParent}g.support.subtractsBorderForOverflowNotVisible&&"visible"!==
c.overflow&&(i+=parseFloat(c.borderTopWidth)||0,j+=parseFloat(c.borderLeftWidth)||0)}if("relative"===c.position||"static"===c.position)i+=h.offsetTop,j+=h.offsetLeft;g.support.fixedPosition&&"fixed"===c.position&&(i+=Math.max(e.scrollTop,h.scrollTop),j+=Math.max(e.scrollLeft,h.scrollLeft));return{top:i,left:j}};g.offset={bodyOffset:function(a){var b=a.offsetTop,c=a.offsetLeft;g.support.doesNotIncludeMarginInBodyOffset&&(b+=parseFloat(g.css(a,"marginTop"))||0,c+=parseFloat(g.css(a,"marginLeft"))||
0);return{top:b,left:c}},setOffset:function(a,b,c){var d=g.css(a,"position");"static"===d&&(a.style.position="relative");var f=g(a),e=f.offset(),h=g.css(a,"top"),i=g.css(a,"left"),j={},l={};("absolute"===d||"fixed"===d)&&-1<g.inArray("auto",[h,i])?(l=f.position(),d=l.top,i=l.left):(d=parseFloat(h)||0,i=parseFloat(i)||0);g.isFunction(b)&&(b=b.call(a,c,e));null!=b.top&&(j.top=b.top-e.top+d);null!=b.left&&(j.left=b.left-e.left+i);"using"in b?b.using.call(a,j):f.css(j)}};g.fn.extend({position:function(){if(!this[0])return null;
var a=this[0],b=this.offsetParent(),c=this.offset(),d=hb.test(b[0].nodeName)?{top:0,left:0}:b.offset();c.top-=parseFloat(g.css(a,"marginTop"))||0;c.left-=parseFloat(g.css(a,"marginLeft"))||0;d.top+=parseFloat(g.css(b[0],"borderTopWidth"))||0;d.left+=parseFloat(g.css(b[0],"borderLeftWidth"))||0;return{top:c.top-d.top,left:c.left-d.left}},offsetParent:function(){return this.map(function(){for(var a=this.offsetParent||v.body;a&&!hb.test(a.nodeName)&&"static"===g.css(a,"position");)a=a.offsetParent;return a})}});
g.each(["Left","Top"],function(a,c){var d="scroll"+c;g.fn[d]=function(c){var f,e;if(c===b){f=this[0];return!f?null:(e=Y(f))?"pageXOffset"in e?e[a?"pageYOffset":"pageXOffset"]:g.support.boxModel&&e.document.documentElement[d]||e.document.body[d]:f[d]}return this.each(function(){(e=Y(this))?e.scrollTo(!a?c:g(e).scrollLeft(),a?c:g(e).scrollTop()):this[d]=c})}});g.each(["Height","Width"],function(a,c){var d=c.toLowerCase();g.fn["inner"+c]=function(){var a=this[0];return a?a.style?parseFloat(g.css(a,d,
"padding")):this[d]():null};g.fn["outer"+c]=function(a){var b=this[0];return b?b.style?parseFloat(g.css(b,d,a?"margin":"border")):this[d]():null};g.fn[d]=function(a){var f=this[0];if(!f)return null==a?null:this;if(g.isFunction(a))return this.each(function(b){var c=g(this);c[d](a.call(this,b,c[d]()))});if(g.isWindow(f)){var e=f.document.documentElement["client"+c],h=f.document.body;return"CSS1Compat"===f.document.compatMode&&e||h&&h["client"+c]||e}if(9===f.nodeType)return Math.max(f.documentElement["client"+
c],f.body["scroll"+c],f.documentElement["scroll"+c],f.body["offset"+c],f.documentElement["offset"+c]);return a===b?(f=g.css(f,d),e=parseFloat(f),g.isNumeric(e)?e:f):this.css(d,"string"===typeof a?a:a+"px")}});a.jQuery=a.$=g;"function"===typeof define&&define.amd&&define.amd.jQuery&&define("jquery",[],function(){return g})})(w);var K,y;K=y=w.$.noConflict(!0);(function(a,b){function c(b,c){var f=b.nodeName.toLowerCase();if("area"===f){var f=b.parentNode,i=f.name;if(!b.href||!i||"map"!==f.nodeName.toLowerCase())return!1;
f=a("img[usemap=#"+i+"]")[0];return!!f&&d(f)}return(/input|select|textarea|button|object/.test(f)?!b.disabled:"a"==f?b.href||c:c)&&d(b)}function d(b){return!a(b).parents().andSelf().filter(function(){return"hidden"===a.curCSS(this,"visibility")||a.expr.filters.hidden(this)}).length}a.ui=a.ui||{};a.ui.version||(a.extend(a.ui,{version:"@VERSION",keyCode:{ALT:18,BACKSPACE:8,CAPS_LOCK:20,COMMA:188,COMMAND:91,COMMAND_LEFT:91,COMMAND_RIGHT:93,CONTROL:17,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,
INSERT:45,LEFT:37,MENU:93,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SHIFT:16,SPACE:32,TAB:9,UP:38,WINDOWS:91}}),a.fn.extend({propAttr:a.fn.prop||a.fn.attr,_focus:a.fn.focus,focus:function(b,c){return"number"===typeof b?this.each(function(){var d=this;setTimeout(function(){a(d).focus();c&&c.call(d)},b)}):this._focus.apply(this,arguments)},scrollParent:function(){var b;b=a.browser.msie&&/(static|relative)/.test(this.css("position"))||
/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test(a.curCSS(this,"position",1))&&/(auto|scroll)/.test(a.curCSS(this,"overflow",1)+a.curCSS(this,"overflow-y",1)+a.curCSS(this,"overflow-x",1))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test(a.curCSS(this,"overflow",1)+a.curCSS(this,"overflow-y",1)+a.curCSS(this,"overflow-x",1))}).eq(0);return/fixed/.test(this.css("position"))||!b.length?a(document):b},zIndex:function(c){if(c!==
b)return this.css("zIndex",c);if(this.length)for(var c=a(this[0]),d;c.length&&c[0]!==document;){d=c.css("position");if("absolute"===d||"relative"===d||"fixed"===d)if(d=parseInt(c.css("zIndex"),10),!isNaN(d)&&0!==d)return d;c=c.parent()}return 0},disableSelection:function(){return this.bind((a.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(a){a.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),a.each(["Width","Height"],function(c,
d){function f(b,c,d,f){a.each(i,function(){c-=parseFloat(a.curCSS(b,"padding"+this,!0))||0;d&&(c-=parseFloat(a.curCSS(b,"border"+this+"Width",!0))||0);f&&(c-=parseFloat(a.curCSS(b,"margin"+this,!0))||0)});return c}var i="Width"===d?["Left","Right"]:["Top","Bottom"],n=d.toLowerCase(),q={innerWidth:a.fn.innerWidth,innerHeight:a.fn.innerHeight,outerWidth:a.fn.outerWidth,outerHeight:a.fn.outerHeight};a.fn["inner"+d]=function(c){return c===b?q["inner"+d].call(this):this.each(function(){a(this).css(n,f(this,
c)+"px")})};a.fn["outer"+d]=function(b,c){return"number"!==typeof b?q["outer"+d].call(this,b):this.each(function(){a(this).css(n,f(this,b,!0,c)+"px")})}}),a.extend(a.expr[":"],{data:function(b,c,d){return!!a.data(b,d[3])},focusable:function(b){return c(b,!isNaN(a.attr(b,"tabindex")))},tabbable:function(b){var d=a.attr(b,"tabindex"),f=isNaN(d);return(f||0<=d)&&c(b,!f)}}),a(function(){var b=document.body,c=b.appendChild(c=document.createElement("div"));c.offsetHeight;a.extend(c.style,{minHeight:"100px",
height:"auto",padding:0,borderWidth:0});a.support.minHeight=100===c.offsetHeight;a.support.selectstart="onselectstart"in c;b.removeChild(c).style.display="none"}),a.extend(a.ui,{plugin:{add:function(b,c,d){var b=a.ui[b].prototype,i;for(i in d)b.plugins[i]=b.plugins[i]||[],b.plugins[i].push([c,d[i]])},call:function(a,b,c){if((b=a.plugins[b])&&a.element[0].parentNode)for(var d=0;d<b.length;d++)a.options[b[d][0]]&&b[d][1].apply(a.element,c)}},contains:function(a,b){return document.compareDocumentPosition?
a.compareDocumentPosition(b)&16:a!==b&&a.contains(b)},hasScroll:function(b,c){if("hidden"===a(b).css("overflow"))return!1;var d=c&&"left"===c?"scrollLeft":"scrollTop",i=!1;if(0<b[d])return!0;b[d]=1;i=0<b[d];b[d]=0;return i},isOverAxis:function(a,b,c){return a>b&&a<b+c},isOver:function(b,c,d,i,n,q){return a.ui.isOverAxis(b,d,n)&&a.ui.isOverAxis(c,i,q)}}))})(K);(function(a,b){if(a.cleanData){var c=a.cleanData;a.cleanData=function(b){for(var d=0,f;null!=(f=b[d]);d++)try{a(f).triggerHandler("remove")}catch(i){}c(b)}}else{var d=
a.fn.remove;a.fn.remove=function(b,c){return this.each(function(){c||(!b||a.filter(b,[this]).length)&&a("*",this).add([this]).each(function(){try{a(this).triggerHandler("remove")}catch(b){}});return d.call(a(this),b,c)})}}a.widget=function(b,c,d){var i=b.split(".")[0],n,b=b.split(".")[1];n=i+"-"+b;d||(d=c,c=a.Widget);a.expr[":"][n]=function(c){return!!a.data(c,b)};a[i]=a[i]||{};a[i][b]=function(a,b){arguments.length&&this._createWidget(a,b)};c=new c;c.options=a.extend(!0,{},c.options);a[i][b].prototype=
a.extend(!0,c,{namespace:i,widgetName:b,widgetEventPrefix:a[i][b].prototype.widgetEventPrefix||b,widgetBaseClass:n},d);a.widget.bridge(b,a[i][b])};a.widget.bridge=function(c,d){a.fn[c]=function(f){var i="string"===typeof f,n=Array.prototype.slice.call(arguments,1),q=this,f=!i&&n.length?a.extend.apply(null,[!0,f].concat(n)):f;if(i&&"_"===f.charAt(0))return q;i?this.each(function(){var d=a.data(this,c),h=d&&a.isFunction(d[f])?d[f].apply(d,n):d;if(h!==d&&h!==b)return q=h,!1}):this.each(function(){var b=
a.data(this,c);b?b.option(f||{})._init():a.data(this,c,new d(f,this))});return q}};a.Widget=function(a,b){arguments.length&&this._createWidget(a,b)};a.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",options:{disabled:!1},_createWidget:function(b,c){a.data(c,this.widgetName,this);this.element=a(c);this.options=a.extend(!0,{},this.options,this._getCreateOptions(),b);var d=this;this.element.bind("remove."+this.widgetName,function(){d.destroy()});this._create();this._trigger("create");this._init()},
_getCreateOptions:function(){return a.metadata&&a.metadata.get(this.element[0])[this.widgetName]},_create:function(){},_init:function(){},destroy:function(){this.element.unbind("."+this.widgetName).removeData(this.widgetName);this.widget().unbind("."+this.widgetName).removeAttr("aria-disabled").removeClass(this.widgetBaseClass+"-disabled ui-state-disabled")},widget:function(){return this.element},option:function(c,d){var f=c;if(0===arguments.length)return a.extend({},this.options);if("string"===typeof c){if(d===
b)return this.options[c];f={};f[c]=d}this._setOptions(f);return this},_setOptions:function(b){var c=this;a.each(b,function(a,b){c._setOption(a,b)});return this},_setOption:function(a,b){this.options[a]=b;"disabled"===a&&this.widget()[b?"addClass":"removeClass"](this.widgetBaseClass+"-disabled ui-state-disabled").attr("aria-disabled",b);return this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_trigger:function(b,c,d){var i,n=this.options[b],
d=d||{},c=a.Event(c);c.type=(b===this.widgetEventPrefix?b:this.widgetEventPrefix+b).toLowerCase();c.target=this.element[0];if(b=c.originalEvent)for(i in b)i in c||(c[i]=b[i]);this.element.trigger(c,d);return!(a.isFunction(n)&&!1===n.call(this.element[0],c,d)||c.isDefaultPrevented())}}})(K);(function(a){var b=!1;a(document).mouseup(function(){b=!1});a.widget("ui.mouse",{options:{cancel:":input,option",distance:1,delay:0},_mouseInit:function(){var b=this;this.element.bind("mousedown."+this.widgetName,
function(a){return b._mouseDown(a)}).bind("click."+this.widgetName,function(d){if(!0===a.data(d.target,b.widgetName+".preventClickEvent"))return a.removeData(d.target,b.widgetName+".preventClickEvent"),d.stopImmediatePropagation(),!1});this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName);a(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(c){if(!b){this._mouseStarted&&this._mouseUp(c);
this._mouseDownEvent=c;var d=this,e=1==c.which,h="string"==typeof this.options.cancel&&c.target.nodeName?a(c.target).closest(this.options.cancel).length:!1;if(!e||h||!this._mouseCapture(c))return!0;this.mouseDelayMet=!this.options.delay;this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){d.mouseDelayMet=!0},this.options.delay));if(this._mouseDistanceMet(c)&&this._mouseDelayMet(c)&&(this._mouseStarted=!1!==this._mouseStart(c),!this._mouseStarted))return c.preventDefault(),!0;!0===a.data(c.target,
this.widgetName+".preventClickEvent")&&a.removeData(c.target,this.widgetName+".preventClickEvent");this._mouseMoveDelegate=function(a){return d._mouseMove(a)};this._mouseUpDelegate=function(a){return d._mouseUp(a)};a(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate);c.preventDefault();return b=!0}},_mouseMove:function(b){if(a.browser.msie&&!(9<=document.documentMode)&&!b.button)return this._mouseUp(b);if(this._mouseStarted)return this._mouseDrag(b),
b.preventDefault();this._mouseDistanceMet(b)&&this._mouseDelayMet(b)&&((this._mouseStarted=!1!==this._mouseStart(this._mouseDownEvent,b))?this._mouseDrag(b):this._mouseUp(b));return!this._mouseStarted},_mouseUp:function(b){a(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate);this._mouseStarted&&(this._mouseStarted=!1,b.target==this._mouseDownEvent.target&&a.data(b.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(b));
return!1},_mouseDistanceMet:function(a){return Math.max(Math.abs(this._mouseDownEvent.pageX-a.pageX),Math.abs(this._mouseDownEvent.pageY-a.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}})})(K);(function(a){a.widget("ui.draggable",a.ui.mouse,{widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",
cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1},_create:function(){"original"==this.options.helper&&!/^(?:r|a|f)/.test(this.element.css("position"))&&(this.element[0].style.position="relative");this.options.addClasses&&this.element.addClass("ui-draggable");this.options.disabled&&this.element.addClass("ui-draggable-disabled");
this._mouseInit()},destroy:function(){if(this.element.data("draggable"))return this.element.removeData("draggable").unbind(".draggable").removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),this._mouseDestroy(),this},_mouseCapture:function(b){var c=this.options;if(this.helper||c.disabled||a(b.target).is(".ui-resizable-handle"))return!1;this.handle=this._getHandle(b);if(!this.handle)return!1;c.iframeFix&&a(!0===c.iframeFix?"iframe":c.iframeFix).each(function(){a('<div class="ui-draggable-iframeFix" style="background: #fff;"></div>').css({width:this.offsetWidth+
"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1E3}).css(a(this).offset()).appendTo("body")});return!0},_mouseStart:function(b){var c=this.options;this.helper=this._createHelper(b);this._cacheHelperProportions();a.ui.ddmanager&&(a.ui.ddmanager.current=this);this._cacheMargins();this.cssPosition=this.helper.css("position");this.scrollParent=this.helper.scrollParent();this.offset=this.positionAbs=this.element.offset();this.offset={top:this.offset.top-this.margins.top,
left:this.offset.left-this.margins.left};a.extend(this.offset,{click:{left:b.pageX-this.offset.left,top:b.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()});this.originalPosition=this.position=this._generatePosition(b);this.originalPageX=b.pageX;this.originalPageY=b.pageY;c.cursorAt&&this._adjustOffsetFromHelper(c.cursorAt);c.containment&&this._setContainment();if(!1===this._trigger("start",b))return this._clear(),!1;this._cacheHelperProportions();a.ui.ddmanager&&
!c.dropBehaviour&&a.ui.ddmanager.prepareOffsets(this,b);this.helper.addClass("ui-draggable-dragging");this._mouseDrag(b,!0);a.ui.ddmanager&&a.ui.ddmanager.dragStart(this,b);return!0},_mouseDrag:function(b,c){this.position=this._generatePosition(b);this.positionAbs=this._convertPositionTo("absolute");if(!c){var d=this._uiHash();if(!1===this._trigger("drag",b,d))return this._mouseUp({}),!1;this.position=d.position}if(!this.options.axis||"y"!=this.options.axis)this.helper[0].style.left=this.position.left+
"px";if(!this.options.axis||"x"!=this.options.axis)this.helper[0].style.top=this.position.top+"px";a.ui.ddmanager&&a.ui.ddmanager.drag(this,b);return!1},_mouseStop:function(b){var c=!1;a.ui.ddmanager&&!this.options.dropBehaviour&&(c=a.ui.ddmanager.drop(this,b));this.dropped&&(c=this.dropped,this.dropped=!1);if((!this.element[0]||!this.element[0].parentNode)&&"original"==this.options.helper)return!1;if("invalid"==this.options.revert&&!c||"valid"==this.options.revert&&c||!0===this.options.revert||a.isFunction(this.options.revert)&&
this.options.revert.call(this.element,c)){var d=this;a(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){!1!==d._trigger("stop",b)&&d._clear()})}else!1!==this._trigger("stop",b)&&this._clear();return!1},_mouseUp:function(b){!0===this.options.iframeFix&&a("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)});a.ui.ddmanager&&a.ui.ddmanager.dragStop(this,b);return a.ui.mouse.prototype._mouseUp.call(this,b)},cancel:function(){this.helper.is(".ui-draggable-dragging")?
this._mouseUp({}):this._clear();return this},_getHandle:function(b){var c=!this.options.handle||!a(this.options.handle,this.element).length?!0:!1;a(this.options.handle,this.element).find("*").andSelf().each(function(){this==b.target&&(c=!0)});return c},_createHelper:function(b){var c=this.options,b=a.isFunction(c.helper)?a(c.helper.apply(this.element[0],[b])):"clone"==c.helper?this.element.clone().removeAttr("id"):this.element;b.parents("body").length||b.appendTo("parent"==c.appendTo?this.element[0].parentNode:
c.appendTo);b[0]!=this.element[0]&&!/(fixed|absolute)/.test(b.css("position"))&&b.css("position","absolute");return b},_adjustOffsetFromHelper:function(b){"string"==typeof b&&(b=b.split(" "));a.isArray(b)&&(b={left:+b[0],top:+b[1]||0});"left"in b&&(this.offset.click.left=b.left+this.margins.left);"right"in b&&(this.offset.click.left=this.helperProportions.width-b.right+this.margins.left);"top"in b&&(this.offset.click.top=b.top+this.margins.top);"bottom"in b&&(this.offset.click.top=this.helperProportions.height-
b.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var b=this.offsetParent.offset();"absolute"==this.cssPosition&&this.scrollParent[0]!=document&&a.ui.contains(this.scrollParent[0],this.offsetParent[0])&&(b.left+=this.scrollParent.scrollLeft(),b.top+=this.scrollParent.scrollTop());if(this.offsetParent[0]==document.body||this.offsetParent[0].tagName&&"html"==this.offsetParent[0].tagName.toLowerCase()&&a.browser.msie)b={top:0,left:0};return{top:b.top+
(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:b.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"==this.cssPosition){var a=this.element.position();return{top:a.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:a.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),
10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var b=this.options;"parent"==b.containment&&(b.containment=this.helper[0].parentNode);if("document"==b.containment||"window"==b.containment)this.containment=["document"==b.containment?
0:a(w).scrollLeft()-this.offset.relative.left-this.offset.parent.left,"document"==b.containment?0:a(w).scrollTop()-this.offset.relative.top-this.offset.parent.top,("document"==b.containment?0:a(w).scrollLeft())+a("document"==b.containment?document:w).width()-this.helperProportions.width-this.margins.left,("document"==b.containment?0:a(w).scrollTop())+(a("document"==b.containment?document:w).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];if(!/^(document|window|parent)$/.test(b.containment)&&
b.containment.constructor!=Array){var b=a(b.containment),c=b[0];if(c){b.offset();var d="hidden"!=a(c).css("overflow");this.containment=[(parseInt(a(c).css("borderLeftWidth"),10)||0)+(parseInt(a(c).css("paddingLeft"),10)||0),(parseInt(a(c).css("borderTopWidth"),10)||0)+(parseInt(a(c).css("paddingTop"),10)||0),(d?Math.max(c.scrollWidth,c.offsetWidth):c.offsetWidth)-(parseInt(a(c).css("borderLeftWidth"),10)||0)-(parseInt(a(c).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-
this.margins.right,(d?Math.max(c.scrollHeight,c.offsetHeight):c.offsetHeight)-(parseInt(a(c).css("borderTopWidth"),10)||0)-(parseInt(a(c).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom];this.relative_container=b}}else b.containment.constructor==Array&&(this.containment=b.containment)},_convertPositionTo:function(b,c){c||(c=this.position);var d="absolute"==b?1:-1,e="absolute"==this.cssPosition&&!(this.scrollParent[0]!=document&&a.ui.contains(this.scrollParent[0],
this.offsetParent[0]))?this.offsetParent:this.scrollParent,h=/(html|body)/i.test(e[0].tagName);return{top:c.top+this.offset.relative.top*d+this.offset.parent.top*d-(a.browser.safari&&526>a.browser.version&&"fixed"==this.cssPosition?0:("fixed"==this.cssPosition?-this.scrollParent.scrollTop():h?0:e.scrollTop())*d),left:c.left+this.offset.relative.left*d+this.offset.parent.left*d-(a.browser.safari&&526>a.browser.version&&"fixed"==this.cssPosition?0:("fixed"==this.cssPosition?-this.scrollParent.scrollLeft():
h?0:e.scrollLeft())*d)}},_generatePosition:function(b){var c=this.options,d="absolute"==this.cssPosition&&!(this.scrollParent[0]!=document&&a.ui.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,e=/(html|body)/i.test(d[0].tagName),h=b.pageX,f=b.pageY;if(this.originalPosition){var i;this.containment&&(this.relative_container?(i=this.relative_container.offset(),i=[this.containment[0]+i.left,this.containment[1]+i.top,this.containment[2]+i.left,this.containment[3]+
i.top]):i=this.containment,b.pageX-this.offset.click.left<i[0]&&(h=i[0]+this.offset.click.left),b.pageY-this.offset.click.top<i[1]&&(f=i[1]+this.offset.click.top),b.pageX-this.offset.click.left>i[2]&&(h=i[2]+this.offset.click.left),b.pageY-this.offset.click.top>i[3]&&(f=i[3]+this.offset.click.top));c.grid&&(f=c.grid[1]?this.originalPageY+Math.round((f-this.originalPageY)/c.grid[1])*c.grid[1]:this.originalPageY,f=i?!(f-this.offset.click.top<i[1]||f-this.offset.click.top>i[3])?f:!(f-this.offset.click.top<
i[1])?f-c.grid[1]:f+c.grid[1]:f,h=c.grid[0]?this.originalPageX+Math.round((h-this.originalPageX)/c.grid[0])*c.grid[0]:this.originalPageX,h=i?!(h-this.offset.click.left<i[0]||h-this.offset.click.left>i[2])?h:!(h-this.offset.click.left<i[0])?h-c.grid[0]:h+c.grid[0]:h)}return{top:f-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(a.browser.safari&&526>a.browser.version&&"fixed"==this.cssPosition?0:"fixed"==this.cssPosition?-this.scrollParent.scrollTop():e?0:d.scrollTop()),left:h-
this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(a.browser.safari&&526>a.browser.version&&"fixed"==this.cssPosition?0:"fixed"==this.cssPosition?-this.scrollParent.scrollLeft():e?0:d.scrollLeft())}},_clear:function(){this.helper.removeClass("ui-draggable-dragging");this.helper[0]!=this.element[0]&&!this.cancelHelperRemoval&&this.helper.remove();this.helper=null;this.cancelHelperRemoval=!1},_trigger:function(b,c,d){d=d||this._uiHash();a.ui.plugin.call(this,b,[c,d]);"drag"==
b&&(this.positionAbs=this._convertPositionTo("absolute"));return a.Widget.prototype._trigger.call(this,b,c,d)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}});a.extend(a.ui.draggable,{version:"@VERSION"});a.ui.plugin.add("draggable","connectToSortable",{start:function(b,c){var d=a(this).data("draggable"),e=d.options,h=a.extend({},c,{item:d.element});d.sortables=[];a(e.connectToSortable).each(function(){var c=
a.data(this,"sortable");c&&!c.options.disabled&&(d.sortables.push({instance:c,shouldRevert:c.options.revert}),c.refreshPositions(),c._trigger("activate",b,h))})},stop:function(b,c){var d=a(this).data("draggable"),e=a.extend({},c,{item:d.element});a.each(d.sortables,function(){this.instance.isOver?(this.instance.isOver=0,d.cancelHelperRemoval=!0,this.instance.cancelHelperRemoval=!1,this.shouldRevert&&(this.instance.options.revert=!0),this.instance._mouseStop(b),this.instance.options.helper=this.instance.options._helper,
"original"==d.options.helper&&this.instance.currentItem.css({top:"auto",left:"auto"})):(this.instance.cancelHelperRemoval=!1,this.instance._trigger("deactivate",b,e))})},drag:function(b,c){var d=a(this).data("draggable"),e=this;a.each(d.sortables,function(){this.instance.positionAbs=d.positionAbs;this.instance.helperProportions=d.helperProportions;this.instance.offset.click=d.offset.click;this.instance._intersectsWith(this.instance.containerCache)?(this.instance.isOver||(this.instance.isOver=1,this.instance.currentItem=
a(e).clone().removeAttr("id").appendTo(this.instance.element).data("sortable-item",!0),this.instance.options._helper=this.instance.options.helper,this.instance.options.helper=function(){return c.helper[0]},b.target=this.instance.currentItem[0],this.instance._mouseCapture(b,!0),this.instance._mouseStart(b,!0,!0),this.instance.offset.click.top=d.offset.click.top,this.instance.offset.click.left=d.offset.click.left,this.instance.offset.parent.left-=d.offset.parent.left-this.instance.offset.parent.left,
this.instance.offset.parent.top-=d.offset.parent.top-this.instance.offset.parent.top,d._trigger("toSortable",b),d.dropped=this.instance.element,d.currentItem=d.element,this.instance.fromOutside=d),this.instance.currentItem&&this.instance._mouseDrag(b)):this.instance.isOver&&(this.instance.isOver=0,this.instance.cancelHelperRemoval=!0,this.instance.options.revert=!1,this.instance._trigger("out",b,this.instance._uiHash(this.instance)),this.instance._mouseStop(b,!0),this.instance.options.helper=this.instance.options._helper,
this.instance.currentItem.remove(),this.instance.placeholder&&this.instance.placeholder.remove(),d._trigger("fromSortable",b),d.dropped=!1)})}});a.ui.plugin.add("draggable","cursor",{start:function(){var b=a("body"),c=a(this).data("draggable").options;b.css("cursor")&&(c._cursor=b.css("cursor"));b.css("cursor",c.cursor)},stop:function(){var b=a(this).data("draggable").options;b._cursor&&a("body").css("cursor",b._cursor)}});a.ui.plugin.add("draggable","opacity",{start:function(b,c){var d=a(c.helper),
e=a(this).data("draggable").options;d.css("opacity")&&(e._opacity=d.css("opacity"));d.css("opacity",e.opacity)},stop:function(b,c){var d=a(this).data("draggable").options;d._opacity&&a(c.helper).css("opacity",d._opacity)}});a.ui.plugin.add("draggable","scroll",{start:function(){var b=a(this).data("draggable");b.scrollParent[0]!=document&&"HTML"!=b.scrollParent[0].tagName&&(b.overflowOffset=b.scrollParent.offset())},drag:function(b){var c=a(this).data("draggable"),d=c.options,e=!1;if(c.scrollParent[0]!=
document&&"HTML"!=c.scrollParent[0].tagName){if(!d.axis||"x"!=d.axis)c.overflowOffset.top+c.scrollParent[0].offsetHeight-b.pageY<d.scrollSensitivity?c.scrollParent[0].scrollTop=e=c.scrollParent[0].scrollTop+d.scrollSpeed:b.pageY-c.overflowOffset.top<d.scrollSensitivity&&(c.scrollParent[0].scrollTop=e=c.scrollParent[0].scrollTop-d.scrollSpeed);if(!d.axis||"y"!=d.axis)c.overflowOffset.left+c.scrollParent[0].offsetWidth-b.pageX<d.scrollSensitivity?c.scrollParent[0].scrollLeft=e=c.scrollParent[0].scrollLeft+
d.scrollSpeed:b.pageX-c.overflowOffset.left<d.scrollSensitivity&&(c.scrollParent[0].scrollLeft=e=c.scrollParent[0].scrollLeft-d.scrollSpeed)}else{if(!d.axis||"x"!=d.axis)b.pageY-a(document).scrollTop()<d.scrollSensitivity?e=a(document).scrollTop(a(document).scrollTop()-d.scrollSpeed):a(w).height()-(b.pageY-a(document).scrollTop())<d.scrollSensitivity&&(e=a(document).scrollTop(a(document).scrollTop()+d.scrollSpeed));if(!d.axis||"y"!=d.axis)b.pageX-a(document).scrollLeft()<d.scrollSensitivity?e=a(document).scrollLeft(a(document).scrollLeft()-
d.scrollSpeed):a(w).width()-(b.pageX-a(document).scrollLeft())<d.scrollSensitivity&&(e=a(document).scrollLeft(a(document).scrollLeft()+d.scrollSpeed))}!1!==e&&a.ui.ddmanager&&!d.dropBehaviour&&a.ui.ddmanager.prepareOffsets(c,b)}});a.ui.plugin.add("draggable","snap",{start:function(){var b=a(this).data("draggable"),c=b.options;b.snapElements=[];a(c.snap.constructor!=String?c.snap.items||":data(draggable)":c.snap).each(function(){var c=a(this),e=c.offset();this!=b.element[0]&&b.snapElements.push({item:this,
width:c.outerWidth(),height:c.outerHeight(),top:e.top,left:e.left})})},drag:function(b,c){for(var d=a(this).data("draggable"),e=d.options,h=e.snapTolerance,f=c.offset.left,i=f+d.helperProportions.width,n=c.offset.top,q=n+d.helperProportions.height,k=d.snapElements.length-1;0<=k;k--){var s=d.snapElements[k].left,r=s+d.snapElements[k].width,J=d.snapElements[k].top,u=J+d.snapElements[k].height;if(s-h<f&&f<r+h&&J-h<n&&n<u+h||s-h<f&&f<r+h&&J-h<q&&q<u+h||s-h<i&&i<r+h&&J-h<n&&n<u+h||s-h<i&&i<r+h&&J-h<q&&
q<u+h){if("inner"!=e.snapMode){var m=Math.abs(J-q)<=h,o=Math.abs(u-n)<=h,A=Math.abs(s-i)<=h,w=Math.abs(r-f)<=h;m&&(c.position.top=d._convertPositionTo("relative",{top:J-d.helperProportions.height,left:0}).top-d.margins.top);o&&(c.position.top=d._convertPositionTo("relative",{top:u,left:0}).top-d.margins.top);A&&(c.position.left=d._convertPositionTo("relative",{top:0,left:s-d.helperProportions.width}).left-d.margins.left);w&&(c.position.left=d._convertPositionTo("relative",{top:0,left:r}).left-d.margins.left)}var y=
m||o||A||w;"outer"!=e.snapMode&&(m=Math.abs(J-n)<=h,o=Math.abs(u-q)<=h,A=Math.abs(s-f)<=h,w=Math.abs(r-i)<=h,m&&(c.position.top=d._convertPositionTo("relative",{top:J,left:0}).top-d.margins.top),o&&(c.position.top=d._convertPositionTo("relative",{top:u-d.helperProportions.height,left:0}).top-d.margins.top),A&&(c.position.left=d._convertPositionTo("relative",{top:0,left:s}).left-d.margins.left),w&&(c.position.left=d._convertPositionTo("relative",{top:0,left:r-d.helperProportions.width}).left-d.margins.left));
!d.snapElements[k].snapping&&(m||o||A||w||y)&&d.options.snap.snap&&d.options.snap.snap.call(d.element,b,a.extend(d._uiHash(),{snapItem:d.snapElements[k].item}));d.snapElements[k].snapping=m||o||A||w||y}else d.snapElements[k].snapping&&d.options.snap.release&&d.options.snap.release.call(d.element,b,a.extend(d._uiHash(),{snapItem:d.snapElements[k].item})),d.snapElements[k].snapping=!1}}});a.ui.plugin.add("draggable","stack",{start:function(){var b=a(this).data("draggable").options,b=a.makeArray(a(b.stack)).sort(function(b,
c){return(parseInt(a(b).css("zIndex"),10)||0)-(parseInt(a(c).css("zIndex"),10)||0)});if(b.length){var c=parseInt(b[0].style.zIndex)||0;a(b).each(function(a){this.style.zIndex=c+a});this[0].style.zIndex=c+b.length}}});a.ui.plugin.add("draggable","zIndex",{start:function(b,c){var d=a(c.helper),e=a(this).data("draggable").options;d.css("zIndex")&&(e._zIndex=d.css("zIndex"));d.css("zIndex",e.zIndex)},stop:function(b,c){var d=a(this).data("draggable").options;d._zIndex&&a(c.helper).css("zIndex",d._zIndex)}})})(K);
(function(a){a.widget("ui.droppable",{widgetEventPrefix:"drop",options:{accept:"*",activeClass:!1,addClasses:!0,greedy:!1,hoverClass:!1,scope:"default",tolerance:"intersect"},_create:function(){var b=this.options,c=b.accept;this.isover=0;this.isout=1;this.accept=a.isFunction(c)?c:function(a){return a.is(c)};this.proportions={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight};a.ui.ddmanager.droppables[b.scope]=a.ui.ddmanager.droppables[b.scope]||[];a.ui.ddmanager.droppables[b.scope].push(this);
b.addClasses&&this.element.addClass("ui-droppable")},destroy:function(){for(var b=a.ui.ddmanager.droppables[this.options.scope],c=0;c<b.length;c++)b[c]==this&&b.splice(c,1);this.element.removeClass("ui-droppable ui-droppable-disabled").removeData("droppable").unbind(".droppable");return this},_setOption:function(b,c){"accept"==b&&(this.accept=a.isFunction(c)?c:function(a){return a.is(c)});a.Widget.prototype._setOption.apply(this,arguments)},_activate:function(b){var c=a.ui.ddmanager.current;this.options.activeClass&&
this.element.addClass(this.options.activeClass);c&&this._trigger("activate",b,this.ui(c))},_deactivate:function(b){var c=a.ui.ddmanager.current;this.options.activeClass&&this.element.removeClass(this.options.activeClass);c&&this._trigger("deactivate",b,this.ui(c))},_over:function(b){var c=a.ui.ddmanager.current;if(c&&(c.currentItem||c.element)[0]!=this.element[0])if(this.accept.call(this.element[0],c.currentItem||c.element))this.options.hoverClass&&this.element.addClass(this.options.hoverClass),this._trigger("over",
b,this.ui(c))},_out:function(b){var c=a.ui.ddmanager.current;if(c&&(c.currentItem||c.element)[0]!=this.element[0])if(this.accept.call(this.element[0],c.currentItem||c.element))this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("out",b,this.ui(c))},_drop:function(b,c){var d=c||a.ui.ddmanager.current;if(!d||(d.currentItem||d.element)[0]==this.element[0])return!1;var e=!1;this.element.find(":data(droppable)").not(".ui-draggable-dragging").each(function(){var b=a.data(this,
"droppable");if(b.options.greedy&&!b.options.disabled&&b.options.scope==d.options.scope&&b.accept.call(b.element[0],d.currentItem||d.element)&&a.ui.intersect(d,a.extend(b,{offset:b.element.offset()}),b.options.tolerance))return e=!0,!1});if(e)return!1;return this.accept.call(this.element[0],d.currentItem||d.element)?(this.options.activeClass&&this.element.removeClass(this.options.activeClass),this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("drop",b,this.ui(d)),
this.element):!1},ui:function(a){return{draggable:a.currentItem||a.element,helper:a.helper,position:a.position,offset:a.positionAbs}}});a.extend(a.ui.droppable,{version:"@VERSION"});a.ui.intersect=function(b,c,d){if(!c.offset)return!1;var e=(b.positionAbs||b.position.absolute).left,h=e+b.helperProportions.width,f=(b.positionAbs||b.position.absolute).top,i=f+b.helperProportions.height,n=c.offset.left,k=n+c.proportions.width,C=c.offset.top,s=C+c.proportions.height;switch(d){case "fit":return n<=e&&
h<=k&&C<=f&&i<=s;case "intersect":return n<e+b.helperProportions.width/2&&h-b.helperProportions.width/2<k&&C<f+b.helperProportions.height/2&&i-b.helperProportions.height/2<s;case "pointer":return a.ui.isOver((b.positionAbs||b.position.absolute).top+(b.clickOffset||b.offset.click).top,(b.positionAbs||b.position.absolute).left+(b.clickOffset||b.offset.click).left,C,n,c.proportions.height,c.proportions.width);case "touch":return(f>=C&&f<=s||i>=C&&i<=s||f<C&&i>s)&&(e>=n&&e<=k||h>=n&&h<=k||e<n&&h>k);default:return!1}};
a.ui.ddmanager={current:null,droppables:{"default":[]},prepareOffsets:function(b,c){var d=a.ui.ddmanager.droppables[b.options.scope]||[],e=c?c.type:null,h=(b.currentItem||b.element).find(":data(droppable)").andSelf(),f=0;a:for(;f<d.length;f++)if(!(d[f].options.disabled||b&&!d[f].accept.call(d[f].element[0],b.currentItem||b.element))){for(var i=0;i<h.length;i++)if(h[i]==d[f].element[0]){d[f].proportions.height=0;continue a}d[f].visible="none"!=d[f].element.css("display");d[f].visible&&("mousedown"==
e&&d[f]._activate.call(d[f],c),d[f].offset=d[f].element.offset(),d[f].proportions={width:d[f].element[0].offsetWidth,height:d[f].element[0].offsetHeight})}},drop:function(b,c){var d=!1;a.each(a.ui.ddmanager.droppables[b.options.scope]||[],function(){if(this.options&&(!this.options.disabled&&this.visible&&a.ui.intersect(b,this,this.options.tolerance)&&(d=this._drop.call(this,c)||d),!this.options.disabled&&this.visible&&this.accept.call(this.element[0],b.currentItem||b.element)))this.isout=1,this.isover=
0,this._deactivate.call(this,c)});return d},dragStart:function(b,c){b.element.parents(":not(body,html)").bind("scroll.droppable",function(){b.options.refreshPositions||a.ui.ddmanager.prepareOffsets(b,c)})},drag:function(b,c){b.options.refreshPositions&&a.ui.ddmanager.prepareOffsets(b,c);a.each(a.ui.ddmanager.droppables[b.options.scope]||[],function(){if(!this.options.disabled&&!this.greedyChild&&this.visible){var d=a.ui.intersect(b,this,this.options.tolerance);if(d=!d&&1==this.isover?"isout":d&&0==
this.isover?"isover":null){var e;if(this.options.greedy){var h=this.element.parents(":data(droppable):eq(0)");h.length&&(e=a.data(h[0],"droppable"),e.greedyChild="isover"==d?1:0)}e&&"isover"==d&&(e.isover=0,e.isout=1,e._out.call(e,c));this[d]=1;this["isout"==d?"isover":"isout"]=0;this["isover"==d?"_over":"_out"].call(this,c);e&&"isout"==d&&(e.isout=0,e.isover=1,e._over.call(e,c))}}})},dragStop:function(b,c){b.element.parents(":not(body,html)").unbind("scroll.droppable");b.options.refreshPositions||
a.ui.ddmanager.prepareOffsets(b,c)}}})(K);(function(a){a.widget("ui.sortable",a.ui.mouse,{widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1E3},_create:function(){var a=this.options;this.containerCache=
{};this.element.addClass("ui-sortable");this.refresh();this.floating=this.items.length?"x"===a.axis||/left|right/.test(this.items[0].item.css("float"))||/inline|table-cell/.test(this.items[0].item.css("display")):!1;this.offset=this.element.offset();this._mouseInit();this.ready=!0},destroy:function(){a.Widget.prototype.destroy.call(this);this.element.removeClass("ui-sortable ui-sortable-disabled");this._mouseDestroy();for(var b=this.items.length-1;0<=b;b--)this.items[b].item.removeData(this.widgetName+
"-item");return this},_setOption:function(b,c){"disabled"===b?(this.options[b]=c,this.widget()[c?"addClass":"removeClass"]("ui-sortable-disabled")):a.Widget.prototype._setOption.apply(this,arguments)},_mouseCapture:function(b,c){var d=this;if(this.reverting||this.options.disabled||"static"==this.options.type)return!1;this._refreshItems(b);var e=null,h=this;a(b.target).parents().each(function(){if(a.data(this,d.widgetName+"-item")==h)return e=a(this),!1});a.data(b.target,d.widgetName+"-item")==h&&
(e=a(b.target));if(!e)return!1;if(this.options.handle&&!c){var f=!1;a(this.options.handle,e).find("*").andSelf().each(function(){this==b.target&&(f=!0)});if(!f)return!1}this.currentItem=e;this._removeCurrentsFromItems();return!0},_mouseStart:function(b,c,d){c=this.options;this.currentContainer=this;this.refreshPositions();this.helper=this._createHelper(b);this._cacheHelperProportions();this._cacheMargins();this.scrollParent=this.helper.scrollParent();this.offset=this.currentItem.offset();this.offset=
{top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left};this.helper.css("position","absolute");this.cssPosition=this.helper.css("position");a.extend(this.offset,{click:{left:b.pageX-this.offset.left,top:b.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()});this.originalPosition=this._generatePosition(b);this.originalPageX=b.pageX;this.originalPageY=b.pageY;c.cursorAt&&this._adjustOffsetFromHelper(c.cursorAt);this.domPosition={prev:this.currentItem.prev()[0],
parent:this.currentItem.parent()[0]};this.helper[0]!=this.currentItem[0]&&this.currentItem.hide();this._createPlaceholder();c.containment&&this._setContainment();c.cursor&&(a("body").css("cursor")&&(this._storedCursor=a("body").css("cursor")),a("body").css("cursor",c.cursor));c.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",c.opacity));c.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",
c.zIndex));this.scrollParent[0]!=document&&"HTML"!=this.scrollParent[0].tagName&&(this.overflowOffset=this.scrollParent.offset());this._trigger("start",b,this._uiHash());this._preserveHelperProportions||this._cacheHelperProportions();if(!d)for(d=this.containers.length-1;0<=d;d--)this.containers[d]._trigger("activate",b,this._uiHash(this));a.ui.ddmanager&&(a.ui.ddmanager.current=this);a.ui.ddmanager&&!c.dropBehaviour&&a.ui.ddmanager.prepareOffsets(this,b);this.dragging=!0;this.helper.addClass("ui-sortable-helper");
this._mouseDrag(b);return!0},_mouseDrag:function(b){this.position=this._generatePosition(b);this.positionAbs=this._convertPositionTo("absolute");this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs);if(this.options.scroll){var c=this.options,d=!1;this.scrollParent[0]!=document&&"HTML"!=this.scrollParent[0].tagName?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-b.pageY<c.scrollSensitivity?this.scrollParent[0].scrollTop=d=this.scrollParent[0].scrollTop+c.scrollSpeed:b.pageY-this.overflowOffset.top<
c.scrollSensitivity&&(this.scrollParent[0].scrollTop=d=this.scrollParent[0].scrollTop-c.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-b.pageX<c.scrollSensitivity?this.scrollParent[0].scrollLeft=d=this.scrollParent[0].scrollLeft+c.scrollSpeed:b.pageX-this.overflowOffset.left<c.scrollSensitivity&&(this.scrollParent[0].scrollLeft=d=this.scrollParent[0].scrollLeft-c.scrollSpeed)):(b.pageY-a(document).scrollTop()<c.scrollSensitivity?d=a(document).scrollTop(a(document).scrollTop()-
c.scrollSpeed):a(w).height()-(b.pageY-a(document).scrollTop())<c.scrollSensitivity&&(d=a(document).scrollTop(a(document).scrollTop()+c.scrollSpeed)),b.pageX-a(document).scrollLeft()<c.scrollSensitivity?d=a(document).scrollLeft(a(document).scrollLeft()-c.scrollSpeed):a(w).width()-(b.pageX-a(document).scrollLeft())<c.scrollSensitivity&&(d=a(document).scrollLeft(a(document).scrollLeft()+c.scrollSpeed)));!1!==d&&a.ui.ddmanager&&!c.dropBehaviour&&a.ui.ddmanager.prepareOffsets(this,b)}this.positionAbs=
this._convertPositionTo("absolute");if(!this.options.axis||"y"!=this.options.axis)this.helper[0].style.left=this.position.left+"px";if(!this.options.axis||"x"!=this.options.axis)this.helper[0].style.top=this.position.top+"px";for(c=this.items.length-1;0<=c;c--){var d=this.items[c],e=d.item[0],h=this._intersectsWithPointer(d);if(h&&e!=this.currentItem[0]&&this.placeholder[1==h?"next":"prev"]()[0]!=e&&!a.ui.contains(this.placeholder[0],e)&&("semi-dynamic"==this.options.type?!a.ui.contains(this.element[0],
e):1)){this.direction=1==h?"down":"up";if("pointer"==this.options.tolerance||this._intersectsWithSides(d))this._rearrange(b,d);else break;this._trigger("change",b,this._uiHash());break}}this._contactContainers(b);a.ui.ddmanager&&a.ui.ddmanager.drag(this,b);this._trigger("sort",b,this._uiHash());this.lastPositionAbs=this.positionAbs;return!1},_mouseStop:function(b,c){if(b){a.ui.ddmanager&&!this.options.dropBehaviour&&a.ui.ddmanager.drop(this,b);if(this.options.revert){var d=this,e=d.placeholder.offset();
d.reverting=!0;a(this.helper).animate({left:e.left-this.offset.parent.left-d.margins.left+(this.offsetParent[0]==document.body?0:this.offsetParent[0].scrollLeft),top:e.top-this.offset.parent.top-d.margins.top+(this.offsetParent[0]==document.body?0:this.offsetParent[0].scrollTop)},parseInt(this.options.revert,10)||500,function(){d._clear(b)})}else this._clear(b,c);return!1}},cancel:function(){if(this.dragging){this._mouseUp({target:null});"original"==this.options.helper?this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):
this.currentItem.show();for(var b=this.containers.length-1;0<=b;b--)this.containers[b]._trigger("deactivate",null,this._uiHash(this)),this.containers[b].containerCache.over&&(this.containers[b]._trigger("out",null,this._uiHash(this)),this.containers[b].containerCache.over=0)}this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),"original"!=this.options.helper&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),a.extend(this,{helper:null,
dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?a(this.domPosition.prev).after(this.currentItem):a(this.domPosition.parent).prepend(this.currentItem));return this},serialize:function(b){var c=this._getItemsAsjQuery(b&&b.connected),d=[],b=b||{};a(c).each(function(){var c=(a(b.item||this).attr(b.attribute||"id")||"").match(b.expression||/(.+)[-=_](.+)/);c&&d.push((b.key||c[1]+"[]")+"="+(b.key&&b.expression?c[1]:c[2]))});!d.length&&b.key&&d.push(b.key+"=");return d.join("&")},toArray:function(b){var c=
this._getItemsAsjQuery(b&&b.connected),d=[],b=b||{};c.each(function(){d.push(a(b.item||this).attr(b.attribute||"id")||"")});return d},_intersectsWith:function(a){var c=this.positionAbs.left,d=c+this.helperProportions.width,e=this.positionAbs.top,h=e+this.helperProportions.height,f=a.left,i=f+a.width,n=a.top,k=n+a.height,C=this.offset.click.top,s=this.offset.click.left;return"pointer"==this.options.tolerance||this.options.forcePointerForContainers||"pointer"!=this.options.tolerance&&this.helperProportions[this.floating?
"width":"height"]>a[this.floating?"width":"height"]?e+C>n&&e+C<k&&c+s>f&&c+s<i:f<c+this.helperProportions.width/2&&d-this.helperProportions.width/2<i&&n<e+this.helperProportions.height/2&&h-this.helperProportions.height/2<k},_intersectsWithPointer:function(b){var c=a.ui.isOverAxis(this.positionAbs.top+this.offset.click.top,b.top,b.height),b=a.ui.isOverAxis(this.positionAbs.left+this.offset.click.left,b.left,b.width),c=c&&b,b=this._getDragVerticalDirection(),d=this._getDragHorizontalDirection();return!c?
!1:this.floating?d&&"right"==d||"down"==b?2:1:b&&("down"==b?2:1)},_intersectsWithSides:function(b){var c=a.ui.isOverAxis(this.positionAbs.top+this.offset.click.top,b.top+b.height/2,b.height),b=a.ui.isOverAxis(this.positionAbs.left+this.offset.click.left,b.left+b.width/2,b.width),d=this._getDragVerticalDirection(),e=this._getDragHorizontalDirection();return this.floating&&e?"right"==e&&b||"left"==e&&!b:d&&("down"==d&&c||"up"==d&&!c)},_getDragVerticalDirection:function(){var a=this.positionAbs.top-
this.lastPositionAbs.top;return 0!=a&&(0<a?"down":"up")},_getDragHorizontalDirection:function(){var a=this.positionAbs.left-this.lastPositionAbs.left;return 0!=a&&(0<a?"right":"left")},refresh:function(a){this._refreshItems(a);this.refreshPositions();return this},_connectWith:function(){var a=this.options;return a.connectWith.constructor==String?[a.connectWith]:a.connectWith},_getItemsAsjQuery:function(b){var c=[],d=[],e=this._connectWith();if(e&&b)for(b=e.length-1;0<=b;b--)for(var h=a(e[b]),f=h.length-
1;0<=f;f--){var i=a.data(h[f],this.widgetName);i&&i!=this&&!i.options.disabled&&d.push([a.isFunction(i.options.items)?i.options.items.call(i.element):a(i.options.items,i.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),i])}d.push([a.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):a(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]);for(b=d.length-1;0<=b;b--)d[b][0].each(function(){c.push(this)});
return a(c)},_removeCurrentsFromItems:function(){for(var a=this.currentItem.find(":data("+this.widgetName+"-item)"),c=0;c<this.items.length;c++)for(var d=0;d<a.length;d++)a[d]==this.items[c].item[0]&&this.items.splice(c,1)},_refreshItems:function(b){this.items=[];this.containers=[this];var c=this.items,d=[[a.isFunction(this.options.items)?this.options.items.call(this.element[0],b,{item:this.currentItem}):a(this.options.items,this.element),this]],e=this._connectWith();if(e&&this.ready)for(var h=e.length-
1;0<=h;h--)for(var f=a(e[h]),i=f.length-1;0<=i;i--){var n=a.data(f[i],this.widgetName);n&&n!=this&&!n.options.disabled&&(d.push([a.isFunction(n.options.items)?n.options.items.call(n.element[0],b,{item:this.currentItem}):a(n.options.items,n.element),n]),this.containers.push(n))}for(h=d.length-1;0<=h;h--){b=d[h][1];e=d[h][0];i=0;for(f=e.length;i<f;i++)n=a(e[i]),n.data(this.widgetName+"-item",b),c.push({item:n,instance:b,width:0,height:0,left:0,top:0})}},refreshPositions:function(b){this.offsetParent&&
this.helper&&(this.offset.parent=this._getParentOffset());for(var c=this.items.length-1;0<=c;c--){var d=this.items[c];if(!(d.instance!=this.currentContainer&&this.currentContainer&&d.item[0]!=this.currentItem[0])){var e=this.options.toleranceElement?a(this.options.toleranceElement,d.item):d.item;b||(d.width=e.outerWidth(),d.height=e.outerHeight());e=e.offset();d.left=e.left;d.top=e.top}}if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);
else for(c=this.containers.length-1;0<=c;c--)e=this.containers[c].element.offset(),this.containers[c].containerCache.left=e.left,this.containers[c].containerCache.top=e.top,this.containers[c].containerCache.width=this.containers[c].element.outerWidth(),this.containers[c].containerCache.height=this.containers[c].element.outerHeight();return this},_createPlaceholder:function(b){var c=b||this,d=c.options;if(!d.placeholder||d.placeholder.constructor==String){var e=d.placeholder;d.placeholder={element:function(){var b=
a(document.createElement(c.currentItem[0].nodeName)).addClass(e||c.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper").html("&nbsp;")[0];e||(b.style.visibility="hidden");return b},update:function(a,b){if(!e||d.forcePlaceholderSize)b.height()||b.height(c.currentItem.innerHeight()-parseInt(c.currentItem.css("paddingTop")||0,10)-parseInt(c.currentItem.css("paddingBottom")||0,10)),b.width()||b.width(c.currentItem.innerWidth()-parseInt(c.currentItem.css("paddingLeft")||
0,10)-parseInt(c.currentItem.css("paddingRight")||0,10))}}}c.placeholder=a(d.placeholder.element.call(c.element,c.currentItem));c.currentItem.after(c.placeholder);d.placeholder.update(c,c.placeholder)},_contactContainers:function(b){for(var c=null,d=null,e=this.containers.length-1;0<=e;e--)if(!a.ui.contains(this.currentItem[0],this.containers[e].element[0]))if(this._intersectsWith(this.containers[e].containerCache)){if(!c||!a.ui.contains(this.containers[e].element[0],c.element[0]))c=this.containers[e],
d=e}else this.containers[e].containerCache.over&&(this.containers[e]._trigger("out",b,this._uiHash(this)),this.containers[e].containerCache.over=0);if(c)if(1===this.containers.length)this.containers[d]._trigger("over",b,this._uiHash(this)),this.containers[d].containerCache.over=1;else if(this.currentContainer!=this.containers[d]){for(var c=1E4,e=null,h=this.positionAbs[this.containers[d].floating?"left":"top"],f=this.items.length-1;0<=f;f--)if(a.ui.contains(this.containers[d].element[0],this.items[f].item[0])){var i=
this.items[f][this.containers[d].floating?"left":"top"];Math.abs(i-h)<c&&(c=Math.abs(i-h),e=this.items[f])}if(e||this.options.dropOnEmpty)this.currentContainer=this.containers[d],e?this._rearrange(b,e,null,!0):this._rearrange(b,null,this.containers[d].element,!0),this._trigger("change",b,this._uiHash()),this.containers[d]._trigger("change",b,this._uiHash(this)),this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[d]._trigger("over",b,this._uiHash(this)),this.containers[d].containerCache.over=
1}},_createHelper:function(b){var c=this.options,b=a.isFunction(c.helper)?a(c.helper.apply(this.element[0],[b,this.currentItem])):"clone"==c.helper?this.currentItem.clone():this.currentItem;b.parents("body").length||a("parent"!=c.appendTo?c.appendTo:this.currentItem[0].parentNode)[0].appendChild(b[0]);b[0]==this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")});
(""==b[0].style.width||c.forceHelperSize)&&b.width(this.currentItem.width());(""==b[0].style.height||c.forceHelperSize)&&b.height(this.currentItem.height());return b},_adjustOffsetFromHelper:function(b){"string"==typeof b&&(b=b.split(" "));a.isArray(b)&&(b={left:+b[0],top:+b[1]||0});"left"in b&&(this.offset.click.left=b.left+this.margins.left);"right"in b&&(this.offset.click.left=this.helperProportions.width-b.right+this.margins.left);"top"in b&&(this.offset.click.top=b.top+this.margins.top);"bottom"in
b&&(this.offset.click.top=this.helperProportions.height-b.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var b=this.offsetParent.offset();"absolute"==this.cssPosition&&this.scrollParent[0]!=document&&a.ui.contains(this.scrollParent[0],this.offsetParent[0])&&(b.left+=this.scrollParent.scrollLeft(),b.top+=this.scrollParent.scrollTop());if(this.offsetParent[0]==document.body||this.offsetParent[0].tagName&&"html"==this.offsetParent[0].tagName.toLowerCase()&&
a.browser.msie)b={top:0,left:0};return{top:b.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:b.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"==this.cssPosition){var a=this.currentItem.position();return{top:a.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:a.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins=
{left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var b=this.options;"parent"==b.containment&&(b.containment=this.helper[0].parentNode);if("document"==b.containment||"window"==b.containment)this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-
this.offset.parent.top,a("document"==b.containment?document:w).width()-this.helperProportions.width-this.margins.left,(a("document"==b.containment?document:w).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];if(!/^(document|window|parent)$/.test(b.containment)){var c=a(b.containment)[0],b=a(b.containment).offset(),d="hidden"!=a(c).css("overflow");this.containment=[b.left+(parseInt(a(c).css("borderLeftWidth"),10)||0)+(parseInt(a(c).css("paddingLeft"),
10)||0)-this.margins.left,b.top+(parseInt(a(c).css("borderTopWidth"),10)||0)+(parseInt(a(c).css("paddingTop"),10)||0)-this.margins.top,b.left+(d?Math.max(c.scrollWidth,c.offsetWidth):c.offsetWidth)-(parseInt(a(c).css("borderLeftWidth"),10)||0)-(parseInt(a(c).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,b.top+(d?Math.max(c.scrollHeight,c.offsetHeight):c.offsetHeight)-(parseInt(a(c).css("borderTopWidth"),10)||0)-(parseInt(a(c).css("paddingBottom"),10)||0)-this.helperProportions.height-
this.margins.top]}},_convertPositionTo:function(b,c){c||(c=this.position);var d="absolute"==b?1:-1,e="absolute"==this.cssPosition&&!(this.scrollParent[0]!=document&&a.ui.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,h=/(html|body)/i.test(e[0].tagName);return{top:c.top+this.offset.relative.top*d+this.offset.parent.top*d-(a.browser.safari&&"fixed"==this.cssPosition?0:("fixed"==this.cssPosition?-this.scrollParent.scrollTop():h?0:e.scrollTop())*d),left:c.left+
this.offset.relative.left*d+this.offset.parent.left*d-(a.browser.safari&&"fixed"==this.cssPosition?0:("fixed"==this.cssPosition?-this.scrollParent.scrollLeft():h?0:e.scrollLeft())*d)}},_generatePosition:function(b){var c=this.options,d="absolute"==this.cssPosition&&!(this.scrollParent[0]!=document&&a.ui.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,e=/(html|body)/i.test(d[0].tagName);"relative"==this.cssPosition&&!(this.scrollParent[0]!=document&&this.scrollParent[0]!=
this.offsetParent[0])&&(this.offset.relative=this._getRelativeOffset());var h=b.pageX,f=b.pageY;this.originalPosition&&(this.containment&&(b.pageX-this.offset.click.left<this.containment[0]&&(h=this.containment[0]+this.offset.click.left),b.pageY-this.offset.click.top<this.containment[1]&&(f=this.containment[1]+this.offset.click.top),b.pageX-this.offset.click.left>this.containment[2]&&(h=this.containment[2]+this.offset.click.left),b.pageY-this.offset.click.top>this.containment[3]&&(f=this.containment[3]+
this.offset.click.top)),c.grid&&(f=this.originalPageY+Math.round((f-this.originalPageY)/c.grid[1])*c.grid[1],f=this.containment?!(f-this.offset.click.top<this.containment[1]||f-this.offset.click.top>this.containment[3])?f:!(f-this.offset.click.top<this.containment[1])?f-c.grid[1]:f+c.grid[1]:f,h=this.originalPageX+Math.round((h-this.originalPageX)/c.grid[0])*c.grid[0],h=this.containment?!(h-this.offset.click.left<this.containment[0]||h-this.offset.click.left>this.containment[2])?h:!(h-this.offset.click.left<
this.containment[0])?h-c.grid[0]:h+c.grid[0]:h));return{top:f-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(a.browser.safari&&"fixed"==this.cssPosition?0:"fixed"==this.cssPosition?-this.scrollParent.scrollTop():e?0:d.scrollTop()),left:h-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(a.browser.safari&&"fixed"==this.cssPosition?0:"fixed"==this.cssPosition?-this.scrollParent.scrollLeft():e?0:d.scrollLeft())}},_rearrange:function(a,c,d,e){d?d[0].appendChild(this.placeholder[0]):
c.item[0].parentNode.insertBefore(this.placeholder[0],"down"==this.direction?c.item[0]:c.item[0].nextSibling);this.counter=this.counter?++this.counter:1;var h=this,f=this.counter;w.setTimeout(function(){f==h.counter&&h.refreshPositions(!e)},0)},_clear:function(b,c){this.reverting=!1;var d=[];!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem);this._noFinalSort=null;if(this.helper[0]==this.currentItem[0]){for(var e in this._storedCSS)if("auto"==this._storedCSS[e]||
"static"==this._storedCSS[e])this._storedCSS[e]="";this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else this.currentItem.show();this.fromOutside&&!c&&d.push(function(a){this._trigger("receive",a,this._uiHash(this.fromOutside))});(this.fromOutside||this.domPosition.prev!=this.currentItem.prev().not(".ui-sortable-helper")[0]||this.domPosition.parent!=this.currentItem.parent()[0])&&!c&&d.push(function(a){this._trigger("update",a,this._uiHash())});if(!a.ui.contains(this.element[0],
this.currentItem[0])){c||d.push(function(a){this._trigger("remove",a,this._uiHash())});for(e=this.containers.length-1;0<=e;e--)a.ui.contains(this.containers[e].element[0],this.currentItem[0])&&!c&&(d.push(function(a){return function(b){a._trigger("receive",b,this._uiHash(this))}}.call(this,this.containers[e])),d.push(function(a){return function(b){a._trigger("update",b,this._uiHash(this))}}.call(this,this.containers[e])))}for(e=this.containers.length-1;0<=e;e--)c||d.push(function(a){return function(b){a._trigger("deactivate",
b,this._uiHash(this))}}.call(this,this.containers[e])),this.containers[e].containerCache.over&&(d.push(function(a){return function(b){a._trigger("out",b,this._uiHash(this))}}.call(this,this.containers[e])),this.containers[e].containerCache.over=0);this._storedCursor&&a("body").css("cursor",this._storedCursor);this._storedOpacity&&this.helper.css("opacity",this._storedOpacity);this._storedZIndex&&this.helper.css("zIndex","auto"==this._storedZIndex?"":this._storedZIndex);this.dragging=!1;if(this.cancelHelperRemoval){if(!c){this._trigger("beforeStop",
b,this._uiHash());for(e=0;e<d.length;e++)d[e].call(this,b);this._trigger("stop",b,this._uiHash())}return!1}c||this._trigger("beforeStop",b,this._uiHash());this.placeholder[0].parentNode.removeChild(this.placeholder[0]);this.helper[0]!=this.currentItem[0]&&this.helper.remove();this.helper=null;if(!c){for(e=0;e<d.length;e++)d[e].call(this,b);this._trigger("stop",b,this._uiHash())}this.fromOutside=!1;return!0},_trigger:function(){!1===a.Widget.prototype._trigger.apply(this,arguments)&&this.cancel()},
_uiHash:function(b){var c=b||this;return{helper:c.helper,placeholder:c.placeholder||a([]),position:c.position,originalPosition:c.originalPosition,offset:c.positionAbs,item:c.currentItem,sender:b?b.element:null}}});a.extend(a.ui.sortable,{version:"@VERSION"})})(K);var Da={recursiveNodes:function(a){var b;b=a.nodeName&&a.parentNode&&a!=document.body?this.recursiveNodes(a.parentNode):[];b.push(a);return b},escapeCssNames:function(a){if(a)try{return a.replace(/\s*sg_\w+\s*/g,"").replace(/\\/g,"\\\\").replace(/\./g,
"\\.").replace(/#/g,"\\#").replace(/\>/g,"\\>").replace(/\,/g,"\\,").replace(/\:/g,"\\:")}catch(b){return console.log("---"),console.log("exception in escapeCssNames"),console.log(a),console.log("---"),""}else return""},childElemNumber:function(a,b,c){for(var d=0;a.previousSibling&&(a=a.previousSibling);)1==a.nodeType&&(!b||K(a).is(c))&&d++;return d},pathOf:function(a,b){for(var c=this.recursiveNodes(a),d=this,e="",h="",f=0;f<c.length;f++){var i=c[f],h="";if(i){f&&(e+="> ");var h=h+i.nodeName.toLowerCase(),
n=i.id&&d.escapeCssNames(new String(i.id));n&&0<n.length&&(h+="#"+n);i.className&&K.each(i.className.split(/ /),function(){var a=d.escapeCssNames(this);this&&0<a.length&&(h+="."+a)});h+=b?":eq("+d.childElemNumber(i,b,h)+")":":nth-child("+(d.childElemNumber(i,b)+1)+")";e+=h+" "}}" "==e.charAt(e.length-1)&&(e=e.substring(0,e.length-1));return e},tokenizeCss:function(a){var b=!1,c="",d=[];K.each(a.replace(/,/," , ").replace(/\s+/g," ").split(""),function(){if(b)b=!1;else if("\\"==this)b=!0;else if("."==
this||" "==this||"#"==this||">"==this||":"==this||","==this)0<c.length&&d.push(c),c="";c+=this;if(" "==this||","==this)d.push(c),c=""});0<c.length&&d.push(c);return d},simplifyCss:function(a){for(var b=K(a).data("_sscp_marker",!0),a=this.getPathFor(a),c=this.tokenizeCss(a),d=0;4>d;d++)for(var e=0;e<c.length;e++){var h=c[e].substring(0,1);if(!this.wouldLeaveFreeFloatingNthChild(c,e)&&(0==d&&":"==h||1==d&&":"!=h&&"."!=h&&"#"!=h&&" "!=h&&">"!=h||2==d&&"."==h||3==d&&"#"==h)){h=c[e];c[e]="";var f=this.cleanCss(this.fixChildSelectors(c.join("")));
if(""==f)c[e]=h;else{var i=K(f);1===i.size()&&!0===i.data("_sscp_marker")?a=f:c[e]=h}}}b.removeData("_sscp_marker");return this.cleanCss(a)},wouldLeaveFreeFloatingNthChild:function(a,b){return 0<=b-1&&":"==a[b-1].substring(0,1)&&(0>b-2||" "==a[b-2])&&(b+1>=a.length||" "==a[b+1])||b+1<a.length&&":"==a[b+1].substring(0,1)&&(b+2>=a.length||" "==a[b+2])&&(0>b-1||" "==a[b-1])},fixChildSelectors:function(a){return a.replace(/\s*>(\s*>)+\s*/g," ").replace(/^\s*>|>\s*$/g,"")},cleanCss:function(a){return a.replace(/\>/,
" > ").replace(/,/," , ").replace(/\s+/g," ").replace(/^\s+|\s+$/g,"").replace(/,$/,"")},getPathFor:function(a){a=K(a).get(0);return!a||!a.nodeName?"":this.pathOf(a,!0)},predictCss:function(a){return this.simplifyCss(a)}};(function(a){function b(b){var c=b.data;b.isDefaultPrevented()||(b.preventDefault(),a(this).ajaxSubmit(c))}function c(b){var c=b.target,d=a(c);if(!d.is(":submit,input:image")){c=d.closest(":submit");if(0===c.length)return;c=c[0]}var e=this;e.clk=c;"image"==c.type&&(void 0!==b.offsetX?
(e.clk_x=b.offsetX,e.clk_y=b.offsetY):"function"==typeof a.fn.offset?(d=d.offset(),e.clk_x=b.pageX-d.left,e.clk_y=b.pageY-d.top):(e.clk_x=b.pageX-c.offsetLeft,e.clk_y=b.pageY-c.offsetTop));setTimeout(function(){e.clk=e.clk_x=e.clk_y=null},100)}function d(){if(a.fn.ajaxSubmit.debug){var b="[jquery.form] "+Array.prototype.join.call(arguments,"");w.console&&w.console.log?w.console.log(b):w.opera&&w.opera.postError&&w.opera.postError(b)}}var e,h;e=void 0!==a("<input type='file'/>").get(0).files;h=void 0!==
w.FormData;a.fn.ajaxSubmit=function(b){function c(d){for(var e=new FormData,i=0;i<d.length;i++)e.append(d[i].name,d[i].value);if(b.extraData)for(var h in b.extraData)b.extraData.hasOwnProperty(h)&&e.append(h,b.extraData[h]);b.data=null;d=a.extend(!0,{},a.ajaxSettings,b,{contentType:!1,processData:!1,cache:!1,type:"POST"});b.uploadProgress&&(d.xhr=function(){var a=K.ajaxSettings.xhr();a.upload&&(a.upload.onprogress=function(a){var c=0;a.lengthComputable&&(c=parseInt(100*(a.position/a.total),10));b.uploadProgress(a,
a.position,a.total,c)});return a});d.data=null;var j=d.beforeSend;d.beforeSend=function(a,c){c.data=e;j&&j.call(c,a,b)};a.ajax(d)}function n(c){function e(){function b(){try{var a=(v.contentWindow?v.contentWindow.document:v.contentDocument?v.contentDocument:v.document).readyState;d("state = "+a);a&&"uninitialized"==a.toLowerCase()&&setTimeout(b,50)}catch(c){d("Server abort: ",c," (",c.name,")"),i(t),g&&clearTimeout(g),g=void 0}}var c=s.attr("target"),f=s.attr("action");h.setAttribute("target",C);
k||h.setAttribute("method","POST");f!=z.url&&h.setAttribute("action",z.url);!z.skipEncodingOverride&&(!k||/post/i.test(k))&&s.attr({encoding:"multipart/form-data",enctype:"multipart/form-data"});z.timeout&&(g=setTimeout(function(){m=!0;i(x)},z.timeout));var j=[];try{if(z.extraData)for(var n in z.extraData)z.extraData.hasOwnProperty(n)&&j.push(a('<input type="hidden" name="'+n+'">').attr("value",z.extraData[n]).appendTo(h)[0]);z.iframeTarget||(u.appendTo("body"),v.attachEvent?v.attachEvent("onload",
i):v.addEventListener("load",i,!1));setTimeout(b,15);h.submit()}finally{h.setAttribute("action",f),c?h.setAttribute("target",c):s.removeAttr("target"),a(j).remove()}}function i(b){if(!r.aborted&&!o){try{G=v.contentWindow?v.contentWindow.document:v.contentDocument?v.contentDocument:v.document}catch(c){d("cannot access response document: ",c),b=t}if(b===x&&r)r.abort("timeout");else if(b==t&&r)r.abort("server abort");else if(G&&G.location.href!=z.iframeSrc||m){v.detachEvent?v.detachEvent("onload",i):
v.removeEventListener("load",i,!1);var b="success",f;try{if(m)throw"timeout";var e="xml"==z.dataType||G.XMLDocument||a.isXMLDoc(G);d("isXml="+e);if(!e&&w.opera&&(null===G.body||!G.body.innerHTML)&&--J){d("requeing onLoad callback, DOM not available");setTimeout(i,250);return}var h=G.body?G.body:G.documentElement;r.responseText=h?h.innerHTML:null;r.responseXML=G.XMLDocument?G.XMLDocument:G;e&&(z.dataType="xml");r.getResponseHeader=function(a){return{"content-type":z.dataType}[a]};h&&(r.status=Number(h.getAttribute("status"))||
r.status,r.statusText=h.getAttribute("statusText")||r.statusText);var j=(z.dataType||"").toLowerCase(),l=/(json|script|text)/.test(j);if(l||z.textarea){var n=G.getElementsByTagName("textarea")[0];if(n)r.responseText=n.value,r.status=Number(n.getAttribute("status"))||r.status,r.statusText=n.getAttribute("statusText")||r.statusText;else if(l){var k=G.getElementsByTagName("pre")[0],q=G.getElementsByTagName("body")[0];k?r.responseText=k.textContent?k.textContent:k.innerText:q&&(r.responseText=q.textContent?
q.textContent:q.innerText)}}else"xml"==j&&!r.responseXML&&r.responseText&&(r.responseXML=y(r.responseText));try{E=ua(r,j,z)}catch(D){b="parsererror",r.error=f=D||b}}catch(s){d("error caught: ",s),b="error",r.error=f=s||b}r.aborted&&(d("upload aborted"),b=null);r.status&&(b=200<=r.status&&300>r.status||304===r.status?"success":"error");"success"===b?(z.success&&z.success.call(z.context,E,"success",r),B&&a.event.trigger("ajaxSuccess",[r,z])):b&&(void 0===f&&(f=r.statusText),z.error&&z.error.call(z.context,
r,b,f),B&&a.event.trigger("ajaxError",[r,z,f]));B&&a.event.trigger("ajaxComplete",[r,z]);B&&!--a.active&&a.event.trigger("ajaxStop");z.complete&&z.complete.call(z.context,r,b);o=!0;z.timeout&&clearTimeout(g);setTimeout(function(){z.iframeTarget||u.remove();r.responseXML=null},100)}}}var h=s[0],j,n,z,B,C,u,v,r,m,g;j=!!a.fn.prop;if(c)if(j)for(n=0;n<c.length;n++)j=a(h[c[n].name]),j.prop("disabled",!1);else for(n=0;n<c.length;n++)j=a(h[c[n].name]),j.removeAttr("disabled");if(a(":input[name=submit],:input[id=submit]",
h).length)alert('Error: Form elements must not have name or id of "submit".');else if(z=a.extend(!0,{},a.ajaxSettings,b),z.context=z.context||z,C="jqFormIO"+(new Date).getTime(),z.iframeTarget?(u=a(z.iframeTarget),(j=u.attr("name"))?C=j:u.attr("name",C)):(u=a('<iframe name="'+C+'" src="'+z.iframeSrc+'" />'),u.css({position:"absolute",top:"-1000px",left:"-1000px"})),v=u[0],r={aborted:0,responseText:null,responseXML:null,status:0,statusText:"n/a",getAllResponseHeaders:function(){},getResponseHeader:function(){},
setRequestHeader:function(){},abort:function(b){var c="timeout"===b?"timeout":"aborted";d("aborting upload... "+c);this.aborted=1;u.attr("src",z.iframeSrc);r.error=c;z.error&&z.error.call(z.context,r,c,b);B&&a.event.trigger("ajaxError",[r,z,c]);z.complete&&z.complete.call(z.context,r,c)}},(B=z.global)&&0===a.active++&&a.event.trigger("ajaxStart"),B&&a.event.trigger("ajaxSend",[r,z]),z.beforeSend&&!1===z.beforeSend.call(z.context,r,z))z.global&&a.active--;else if(!r.aborted){if(c=h.clk)if((j=c.name)&&
!c.disabled)z.extraData=z.extraData||{},z.extraData[j]=c.value,"image"==c.type&&(z.extraData[j+".x"]=h.clk_x,z.extraData[j+".y"]=h.clk_y);var x=1,t=2,c=a("meta[name=csrf-token]").attr("content");if((j=a("meta[name=csrf-param]").attr("content"))&&c)z.extraData=z.extraData||{},z.extraData[j]=c;z.forceSync?e():setTimeout(e,10);var E,G,J=50,o,y=a.parseXML||function(a,b){w.ActiveXObject?(b=new ActiveXObject("Microsoft.XMLDOM"),b.async="false",b.loadXML(a)):b=(new DOMParser).parseFromString(a,"text/xml");
return b&&b.documentElement&&"parsererror"!=b.documentElement.nodeName?b:null},aa=a.parseJSON||function(a){return w.eval("("+a+")")},ua=function(b,c,d){var f=b.getResponseHeader("content-type")||"",e="xml"===c||!c&&0<=f.indexOf("xml"),b=e?b.responseXML:b.responseText;e&&"parsererror"===b.documentElement.nodeName&&a.error&&a.error("parsererror");d&&d.dataFilter&&(b=d.dataFilter(b,c));"string"===typeof b&&("json"===c||!c&&0<=f.indexOf("json")?b=aa(b):("script"===c||!c&&0<=f.indexOf("javascript"))&&
a.globalEval(b));return b}}}if(!this.length)return d("ajaxSubmit: skipping submit process - no element selected"),this;var k,C,s=this;"function"==typeof b&&(b={success:b});k=this.attr("method");C=this.attr("action");(C=(C="string"===typeof C?a.trim(C):"")||w.location.href||"")&&(C=(C.match(/^([^#]+)/)||[])[1]);b=a.extend(!0,{url:C,success:a.ajaxSettings.success,type:k||"GET",iframeSrc:/^https/i.test(w.location.href||"")?"javascript:false":"about:blank"},b);C={};this.trigger("form-pre-serialize",[this,
b,C]);if(C.veto)return d("ajaxSubmit: submit vetoed via form-pre-serialize trigger"),this;if(b.beforeSerialize&&!1===b.beforeSerialize(this,b))return d("ajaxSubmit: submit aborted via beforeSerialize callback"),this;var r=b.traditional;void 0===r&&(r=a.ajaxSettings.traditional);var J,u=this.formToArray(b.semantic);b.data&&(b.extraData=b.data,J=a.param(b.data,r));if(b.beforeSubmit&&!1===b.beforeSubmit(u,this,b))return d("ajaxSubmit: submit aborted via beforeSubmit callback"),this;this.trigger("form-submit-validate",
[u,this,b,C]);if(C.veto)return d("ajaxSubmit: submit vetoed via form-submit-validate trigger"),this;C=a.param(u,r);J&&(C=C?C+"&"+J:J);"GET"==b.type.toUpperCase()?(b.url+=(0<=b.url.indexOf("?")?"&":"?")+C,b.data=null):b.data=C;var m=[];b.resetForm&&m.push(function(){s.resetForm()});b.clearForm&&m.push(function(){s.clearForm(b.includeHidden)});if(!b.dataType&&b.target){var o=b.success||function(){};m.push(function(c){var d=b.replaceTarget?"replaceWith":"html";a(b.target)[d](c).each(o,arguments)})}else b.success&&
m.push(b.success);b.success=function(a,c,d){for(var e=b.context||b,h=0,i=m.length;h<i;h++)m[h].apply(e,[a,c,d||s,s])};J=0<a("input:file:enabled[value]",this).length;C="multipart/form-data"==s.attr("enctype")||"multipart/form-data"==s.attr("encoding");r=e&&h;d("fileAPI :"+r);!1!==b.iframe&&(b.iframe||(J||C)&&!r)?b.closeKeepAlive?a.get(b.closeKeepAlive,function(){n(u)}):n(u):(J||C)&&r?c(u):a.ajax(b);this.trigger("form-submit-notify",[this,b]);return this};a.fn.ajaxForm=function(f){f=f||{};f.delegation=
f.delegation&&a.isFunction(a.fn.on);if(!f.delegation&&0===this.length){var e=this.selector,h=this.context;if(!a.isReady&&e)return d("DOM not ready, queuing ajaxForm"),a(function(){a(e,h).ajaxForm(f)}),this;d("terminating; zero elements found by selector"+(a.isReady?"":" (DOM not ready)"));return this}return f.delegation?(a(document).off("submit.form-plugin",this.selector,b).off("click.form-plugin",this.selector,c).on("submit.form-plugin",this.selector,f,b).on("click.form-plugin",this.selector,f,c),
this):this.ajaxFormUnbind().bind("submit.form-plugin",f,b).bind("click.form-plugin",f,c)};a.fn.ajaxFormUnbind=function(){return this.unbind("submit.form-plugin click.form-plugin")};a.fn.formToArray=function(b){var c=[];if(0===this.length)return c;var d=this[0],h=b?d.getElementsByTagName("*"):d.elements;if(!h)return c;var k,s,r,m,u,o;for(k=0,o=h.length;k<o;k++)if(u=h[k],r=u.name)if(b&&d.clk&&"image"==u.type)!u.disabled&&d.clk==u&&(c.push({name:r,value:a(u).val(),type:u.type}),c.push({name:r+".x",value:d.clk_x},
{name:r+".y",value:d.clk_y}));else if((m=a.fieldValue(u,!0))&&m.constructor==Array)for(s=0,u=m.length;s<u;s++)c.push({name:r,value:m[s]});else if(e&&"file"==u.type&&!u.disabled){m=u.files;for(s=0;s<m.length;s++)c.push({name:r,value:m[s],type:u.type})}else null!==m&&"undefined"!=typeof m&&c.push({name:r,value:m,type:u.type});if(!b&&d.clk&&(b=a(d.clk),h=b[0],(r=h.name)&&!h.disabled&&"image"==h.type))c.push({name:r,value:b.val()}),c.push({name:r+".x",value:d.clk_x},{name:r+".y",value:d.clk_y});return c};
a.fn.formSerialize=function(b){return a.param(this.formToArray(b))};a.fn.fieldSerialize=function(b){var c=[];this.each(function(){var d=this.name;if(d){var e=a.fieldValue(this,b);if(e&&e.constructor==Array)for(var h=0,k=e.length;h<k;h++)c.push({name:d,value:e[h]});else null!==e&&"undefined"!=typeof e&&c.push({name:this.name,value:e})}});return a.param(c)};a.fn.fieldValue=function(b){for(var c=[],d=0,e=this.length;d<e;d++){var h=a.fieldValue(this[d],b);null===h||"undefined"==typeof h||h.constructor==
Array&&!h.length||(h.constructor==Array?a.merge(c,h):c.push(h))}return c};a.fieldValue=function(b,c){var d=b.name,e=b.type,h=b.tagName.toLowerCase();void 0===c&&(c=!0);if(c&&(!d||b.disabled||"reset"==e||"button"==e||("checkbox"==e||"radio"==e)&&!b.checked||("submit"==e||"image"==e)&&b.form&&b.form.clk!=b||"select"==h&&-1==b.selectedIndex))return null;if("select"==h){var k=b.selectedIndex;if(0>k)return null;for(var d=[],h=b.options,r=(e="select-one"==e)?k+1:h.length,k=e?k:0;k<r;k++){var m=h[k];if(m.selected){var u=
m.value;u||(u=m.attributes&&m.attributes.value&&!m.attributes.value.specified?m.text:m.value);if(e)return u;d.push(u)}}return d}return a(b).val()};a.fn.clearForm=function(b){return this.each(function(){a("input,select,textarea",this).clearFields(b)})};a.fn.clearFields=a.fn.clearInputs=function(a){var b=/^(?:color|date|datetime|email|month|number|password|range|search|tel|text|time|url|week)$/i;return this.each(function(){var c=this.type,d=this.tagName.toLowerCase();b.test(c)||"textarea"==d||a&&/hidden/.test(c)?
this.value="":"checkbox"==c||"radio"==c?this.checked=!1:"select"==d&&(this.selectedIndex=-1)})};a.fn.resetForm=function(){return this.each(function(){("function"==typeof this.reset||"object"==typeof this.reset&&!this.reset.nodeType)&&this.reset()})};a.fn.enable=function(a){void 0===a&&(a=!0);return this.each(function(){this.disabled=!a})};a.fn.selected=function(b){void 0===b&&(b=!0);return this.each(function(){var c=this.type;"checkbox"==c||"radio"==c?this.checked=b:"option"==this.tagName.toLowerCase()&&
(c=a(this).parent("select"),b&&c[0]&&"select-one"==c[0].type&&c.find("option").selected(!1),this.selected=b)})};a.fn.ajaxSubmit.debug=!1})(K);(function(a){"$:nomunge";var b,c,d=1,e,h=this,f,i=h.postMessage&&!a.browser.opera;a.postMessage=function(b,c,f){c&&(b="string"===typeof b?b:a.param(b),f=f||parent,i?f.postMessage(b,c.replace(/([^:]+:\/\/[^\/]+).*/,"$1")):c&&(f.location=c.replace(/#.*$/,"")+"#"+ +new Date+d++ +"&"+b))};a.receiveMessage=f=function(d,k,m){if(i)if(d&&(e&&f(),e=function(b){if("string"===
typeof k&&b.origin!==k||a.isFunction(k)&&!1===k(b.origin))return!1;d(b)}),h.addEventListener)h[d?"addEventListener":"removeEventListener"]("message",e,!1);else h[d?"attachEvent":"detachEvent"]("onmessage",e);else b&&clearInterval(b),b=null,d&&(b=setInterval(function(){var a=document.location.hash,b=/^#?\d+&/;a!==c&&b.test(a)&&(c=a,d({data:a.replace(b,"")}))},"number"===typeof k?k:"number"===typeof m?m:100))}})(K);(function(a){function b(a){return"object"==typeof a?a:{top:a,left:a}}var c=a.scrollTo=
function(b,c,h){a(w).scrollTo(b,c,h)};c.defaults={axis:"xy",duration:1.3<=parseFloat(a.fn.jquery)?0:1};c.window=function(){return a(w)._scrollable()};a.fn._scrollable=function(){return this.map(function(){if(this.nodeName&&-1==a.inArray(this.nodeName.toLowerCase(),["iframe","#document","html","body"]))return this;var b=(this.contentWindow||this).document||this.ownerDocument||this;return a.browser.safari||"BackCompat"==b.compatMode?b.body:b.documentElement})};a.fn.scrollTo=function(d,e,h){"object"==
typeof e&&(h=e,e=0);"function"==typeof h&&(h={onAfter:h});"max"==d&&(d=9E9);h=a.extend({},c.defaults,h);e=e||h.speed||h.duration;h.queue=h.queue&&1<h.axis.length;h.queue&&(e/=2);h.offset=b(h.offset);h.over=b(h.over);return this._scrollable().each(function(){function f(a){k.animate(s,e,h.easing,a&&function(){a.call(this,d,h)})}var i=this,k=a(i),q=d,m,s={},r=k.is("html,body");switch(typeof q){case "number":case "string":if(/^([+-]=)?\d+(\.\d+)?(px|%)?$/.test(q)){q=b(q);break}q=a(q,this);case "object":if(q.is||
q.style)m=(q=a(q)).offset()}a.each(h.axis.split(""),function(a,b){var d="x"==b?"Left":"Top",e=d.toLowerCase(),o="scroll"+d,w=i[o],y=c.max(i,b);m?(s[o]=m[e]+(r?0:w-k.offset()[e]),h.margin&&(s[o]-=parseInt(q.css("margin"+d))||0,s[o]-=parseInt(q.css("border"+d+"Width"))||0),s[o]+=h.offset[e]||0,h.over[e]&&(s[o]+=q["x"==b?"width":"height"]()*h.over[e])):(d=q[e],s[o]=d.slice&&"%"==d.slice(-1)?parseFloat(d)/100*y:d);/^\d+$/.test(s[o])&&(s[o]=0>=s[o]?0:Math.min(s[o],y));!a&&h.queue&&(w!=s[o]&&f(h.onAfterFirst),
delete s[o])});f(h.onAfter)}).end()};c.max=function(b,c){var h="x"==c?"Width":"Height",f="scroll"+h;if(!a(b).is("html,body"))return b[f]-a(b)[h.toLowerCase()]();var h="client"+h,i=b.ownerDocument.documentElement,k=b.ownerDocument.body;return Math.max(i[f],k[f])-Math.min(i[h],k[h])}})(K);(function(){K.fn.bounds=function(){var a={left:Number.POSITIVE_INFINITY,top:Number.POSITIVE_INFINITY,right:Number.NEGATIVE_INFINITY,bottom:Number.NEGATIVE_INFINITY,width:Number.NaN,height:Number.NaN};this.each(function(b,
c){var d=y(c),e=d.offset();e.right=e.left+y(d).width();e.bottom=e.top+y(d).height();e.left<a.left&&(a.left=e.left);e.top<a.top&&(a.top=e.top);e.right>a.right&&(a.right=e.right);e.bottom>a.bottom&&(a.bottom=e.bottom)});a.width=a.right-a.left;a.height=a.bottom-a.top;return a}})();(function(a){a.visibleInDocument=function(b){if(K.expr.filters.hidden(b))return!1;b=a(b).offset();return 0<=b.left&&0<=b.top};a.belowthefold=function(b,c){return a(w).height()+a(w).scrollTop()<=a(b).offset().top-c.threshold};
a.abovethetop=function(b,c){return a(w).scrollTop()>=a(b).offset().top+a(b).height()-c.threshold};a.rightofscreen=function(b,c){return a(w).width()+a(w).scrollLeft()<=a(b).offset().left-c.threshold};a.leftofscreen=function(b,c){return a(w).scrollLeft()>=a(b).offset().left+a(b).width()-c.threshold};a.inviewport=function(b,c){return!a.rightofscreen(b,c)&&!a.leftofscreen(b,c)&&!a.belowthefold(b,c)&&!a.abovethetop(b,c)};a.extend(a.expr[":"],{"visible-in-document":function(b){return a.visibleInDocument(b)},
"below-the-fold":function(b){return a.belowthefold(b,{threshold:0})},"above-the-top":function(b){return a.abovethetop(b,{threshold:0})},"left-of-screen":function(b){return a.leftofscreen(b,{threshold:0})},"right-of-screen":function(b){return a.rightofscreen(b,{threshold:0})},"in-viewport":function(b){return a.inviewport(b,{threshold:0})},icontains:function(a,c,d){return 0<=(a.textContent||a.innerText||"").toLowerCase().indexOf((d[3]||"").toLowerCase())},exact:function(a,c,d){return(a.textContent||
a.innerText||"")===(d[3]||"")}})})(K);(function(a){function b(){function b(a){"remove"===a&&this.each(function(a,b){var c=e(b);c&&c.remove()});this.find("span.mceEditor,div.mceEditor").each(function(a,b){var c=tinyMCE.get(b.id.replace(/_parent$/,""));c&&c.remove()})}function d(a){var e;if(a!==c)b.call(this),this.each(function(b,c){var d;(d=tinyMCE.get(c.id))&&d.setContent(a)});else if(0<this.length&&(e=tinyMCE.get(this[0].id)))return e.getContent()}function e(a){var b=null;a&&a.id&&h.tinymce&&(b=
tinyMCE.get(a.id));return b}function k(a){return!(!a||!a.length||!h.tinymce||!a.is(":tinymce"))}var m={};a.each(["text","html","val"],function(b,f){var h=m[f]=a.fn[f],o="text"===f;a.fn[f]=function(b){if(!k(this))return h.apply(this,arguments);if(b!==c)return d.call(this.filter(":tinymce"),b),h.apply(this.not(":tinymce"),arguments),this;var f="",s=arguments;(o?this:this.eq(0)).each(function(b,c){var d=e(c);f+=d?o?d.getContent().replace(/<(?:"[^"]*"|'[^']*'|[^'">])*>/g,""):d.getContent():h.apply(a(c),
s)});return f}});a.each(["append","prepend"],function(b,d){var f=m[d]=a.fn[d],h="prepend"===d;a.fn[d]=function(a){if(!k(this))return f.apply(this,arguments);if(a!==c)return this.filter(":tinymce").each(function(b,c){var d=e(c);d&&d.setContent(h?a+d.getContent():d.getContent()+a)}),f.apply(this.not(":tinymce"),arguments),this}});a.each(["remove","replaceWith","replaceAll","empty"],function(c,d){var e=m[d]=a.fn[d];a.fn[d]=function(){b.call(this,d);return e.apply(this,arguments)}});m.attr=a.fn.attr;
a.fn.attr=function(b,f,h){if(!b||"value"!==b||!k(this))return m.attr.call(this,b,f,h);if(f!==c)return d.call(this.filter(":tinymce"),f),m.attr.call(this.not(":tinymce"),b,f,h),this;var o=this[0],w=e(o);return w?w.getContent():m.attr.call(a(o),b,f,h)}}var c,d,e=[],h=w;a.fn.tinymce=function(c){function i(){var d=[],e=0;b&&(b(),b=null);k.each(function(a,b){var h;h=b.id;var i=c.oninit;h||(b.id=h=tinymce.DOM.uniqueId());h=new tinymce.Editor(h,c);d.push(h);h.onInit.add(function(){var a,b=i;k.css("visibility",
"");i&&++e==d.length&&(tinymce.is(b,"string")&&(a=-1===b.indexOf(".")?null:tinymce.resolve(b.replace(/\.\w+$/,"")),b=tinymce.resolve(b)),b.apply(a||tinymce,d))})});a.each(d,function(a,b){b.render()})}var k=this,q,m,s,r,o="",u="";if(!k.length)return k;if(!c)return tinyMCE.get(k[0].id);k.css("visibility","hidden");!h.tinymce&&!d&&(q=c.script_url)?(d=1,m=q.substring(0,q.lastIndexOf("/")),/_(src|dev)\.js/g.test(q)&&(u="_src"),s=q.lastIndexOf("?"),-1!=s&&(o=q.substring(s+1)),h.tinyMCEPreInit=h.tinyMCEPreInit||
{base:m,suffix:u,query:o},-1!=q.indexOf("gzip")&&(r=c.language||"en",q=q+(/\?/.test(q)?"&":"?")+"js=true&core=true&suffix="+escape(u)+"&themes="+escape(c.theme)+"&plugins="+escape(c.plugins)+"&languages="+r,h.tinyMCE_GZ||(tinyMCE_GZ={start:function(){function b(a){tinymce.ScriptLoader.markDone(tinyMCE.baseURI.toAbsolute(a))}tinymce.suffix=u;b("langs/"+r+".js");b("themes/"+c.theme+"/editor_template"+u+".js");b("themes/"+c.theme+"/langs/"+r+".js");a.each(c.plugins.split(","),function(a,c){c&&(b("plugins/"+
c+"/editor_plugin"+u+".js"),b("plugins/"+c+"/langs/"+r+".js"))})},end:function(){}})),a.ajax({type:"GET",url:q,dataType:"script",cache:!0,success:function(){tinymce.dom.Event.domLoaded=1;d=2;c.script_loaded&&c.script_loaded();i();a.each(e,function(a,b){b()})}})):1===d?e.push(i):i();return k};a.extend(a.expr[":"],{tinymce:function(a){return!(!a.id||!tinyMCE.get(a.id))}})})(K);var m={VERSION:"1.0.beta.6",helpers:{},partials:{},registerHelper:function(a,b,c){c&&(b.not=c);this.helpers[a]=b},registerPartial:function(a,
b){this.partials[a]=b}};m.registerHelper("helperMissing",function(a){if(2!==arguments.length)throw Error("Could not find property '"+a+"'");});var ia=Object.prototype.toString;m.registerHelper("blockHelperMissing",function(a,b){var c=b.inverse||function(){},d=b.fn,e="",h=ia.call(a);"[object Function]"===h&&(a=a.call(this));if(!0===a)return d(this);if(!1===a||null==a)return c(this);if("[object Array]"===h){if(0<a.length){c=0;for(h=a.length;c<h;c++)e+=d(a[c])}else e=c(this);return e}return d(a)});m.registerHelper("each",
function(a,b){var c=b.fn,d=b.inverse,e="";if(a&&0<a.length)for(var d=0,h=a.length;d<h;d++)e+=c(a[d]);else e=d(this);return e});m.registerHelper("if",function(a,b){"[object Function]"===ia.call(a)&&(a=a.call(this));return!a||m.Utils.isEmpty(a)?b.inverse(this):b.fn(this)});m.registerHelper("unless",function(a,b){var c=b.fn;b.fn=b.inverse;b.inverse=c;return m.helpers["if"].call(this,a,b)});m.registerHelper("with",function(a,b){return b.fn(a)});m.registerHelper("log",function(a){m.log(a)});var ga=function(){var a=
{trace:function(){},yy:{},symbols_:{error:2,root:3,program:4,EOF:5,statements:6,simpleInverse:7,statement:8,openInverse:9,closeBlock:10,openBlock:11,mustache:12,partial:13,CONTENT:14,COMMENT:15,OPEN_BLOCK:16,inMustache:17,CLOSE:18,OPEN_INVERSE:19,OPEN_ENDBLOCK:20,path:21,OPEN:22,OPEN_UNESCAPED:23,OPEN_PARTIAL:24,params:25,hash:26,param:27,STRING:28,INTEGER:29,BOOLEAN:30,hashSegments:31,hashSegment:32,ID:33,EQUALS:34,pathSegments:35,SEP:36,$accept:0,$end:1},terminals_:{2:"error",5:"EOF",14:"CONTENT",
15:"COMMENT",16:"OPEN_BLOCK",18:"CLOSE",19:"OPEN_INVERSE",20:"OPEN_ENDBLOCK",22:"OPEN",23:"OPEN_UNESCAPED",24:"OPEN_PARTIAL",28:"STRING",29:"INTEGER",30:"BOOLEAN",33:"ID",34:"EQUALS",36:"SEP"},productions_:[0,[3,2],[4,3],[4,1],[4,0],[6,1],[6,2],[8,3],[8,3],[8,1],[8,1],[8,1],[8,1],[11,3],[9,3],[10,3],[12,3],[12,3],[13,3],[13,4],[7,2],[17,3],[17,2],[17,2],[17,1],[25,2],[25,1],[27,1],[27,1],[27,1],[27,1],[26,1],[31,2],[31,1],[32,3],[32,3],[32,3],[32,3],[21,1],[35,3],[35,1]],performAction:function(a,
b,e,h,f,i){a=i.length-1;switch(f){case 1:return i[a-1];case 2:this.$=new h.ProgramNode(i[a-2],i[a]);break;case 3:this.$=new h.ProgramNode(i[a]);break;case 4:this.$=new h.ProgramNode([]);break;case 5:this.$=[i[a]];break;case 6:i[a-1].push(i[a]);this.$=i[a-1];break;case 7:this.$=new h.InverseNode(i[a-2],i[a-1],i[a]);break;case 8:this.$=new h.BlockNode(i[a-2],i[a-1],i[a]);break;case 9:this.$=i[a];break;case 10:this.$=i[a];break;case 11:this.$=new h.ContentNode(i[a]);break;case 12:this.$=new h.CommentNode(i[a]);
break;case 13:this.$=new h.MustacheNode(i[a-1][0],i[a-1][1]);break;case 14:this.$=new h.MustacheNode(i[a-1][0],i[a-1][1]);break;case 15:this.$=i[a-1];break;case 16:this.$=new h.MustacheNode(i[a-1][0],i[a-1][1]);break;case 17:this.$=new h.MustacheNode(i[a-1][0],i[a-1][1],!0);break;case 18:this.$=new h.PartialNode(i[a-1]);break;case 19:this.$=new h.PartialNode(i[a-2],i[a-1]);break;case 21:this.$=[[i[a-2]].concat(i[a-1]),i[a]];break;case 22:this.$=[[i[a-1]].concat(i[a]),null];break;case 23:this.$=[[i[a-
1]],i[a]];break;case 24:this.$=[[i[a]],null];break;case 25:i[a-1].push(i[a]);this.$=i[a-1];break;case 26:this.$=[i[a]];break;case 27:this.$=i[a];break;case 28:this.$=new h.StringNode(i[a]);break;case 29:this.$=new h.IntegerNode(i[a]);break;case 30:this.$=new h.BooleanNode(i[a]);break;case 31:this.$=new h.HashNode(i[a]);break;case 32:i[a-1].push(i[a]);this.$=i[a-1];break;case 33:this.$=[i[a]];break;case 34:this.$=[i[a-2],i[a]];break;case 35:this.$=[i[a-2],new h.StringNode(i[a])];break;case 36:this.$=
[i[a-2],new h.IntegerNode(i[a])];break;case 37:this.$=[i[a-2],new h.BooleanNode(i[a])];break;case 38:this.$=new h.IdNode(i[a]);break;case 39:i[a-2].push(i[a]);this.$=i[a-2];break;case 40:this.$=[i[a]]}},table:[{3:1,4:2,5:[2,4],6:3,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],22:[1,13],23:[1,14],24:[1,15]},{1:[3]},{5:[1,16]},{5:[2,3],7:17,8:18,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,19],20:[2,3],22:[1,13],23:[1,14],24:[1,15]},{5:[2,5],14:[2,5],15:[2,5],16:[2,5],19:[2,
5],20:[2,5],22:[2,5],23:[2,5],24:[2,5]},{4:20,6:3,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,4],22:[1,13],23:[1,14],24:[1,15]},{4:21,6:3,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,4],22:[1,13],23:[1,14],24:[1,15]},{5:[2,9],14:[2,9],15:[2,9],16:[2,9],19:[2,9],20:[2,9],22:[2,9],23:[2,9],24:[2,9]},{5:[2,10],14:[2,10],15:[2,10],16:[2,10],19:[2,10],20:[2,10],22:[2,10],23:[2,10],24:[2,10]},{5:[2,11],14:[2,11],15:[2,11],16:[2,11],19:[2,11],20:[2,11],22:[2,
11],23:[2,11],24:[2,11]},{5:[2,12],14:[2,12],15:[2,12],16:[2,12],19:[2,12],20:[2,12],22:[2,12],23:[2,12],24:[2,12]},{17:22,21:23,33:[1,25],35:24},{17:26,21:23,33:[1,25],35:24},{17:27,21:23,33:[1,25],35:24},{17:28,21:23,33:[1,25],35:24},{21:29,33:[1,25],35:24},{1:[2,1]},{6:30,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],22:[1,13],23:[1,14],24:[1,15]},{5:[2,6],14:[2,6],15:[2,6],16:[2,6],19:[2,6],20:[2,6],22:[2,6],23:[2,6],24:[2,6]},{17:22,18:[1,31],21:23,33:[1,25],35:24},{10:32,20:[1,
33]},{10:34,20:[1,33]},{18:[1,35]},{18:[2,24],21:40,25:36,26:37,27:38,28:[1,41],29:[1,42],30:[1,43],31:39,32:44,33:[1,45],35:24},{18:[2,38],28:[2,38],29:[2,38],30:[2,38],33:[2,38],36:[1,46]},{18:[2,40],28:[2,40],29:[2,40],30:[2,40],33:[2,40],36:[2,40]},{18:[1,47]},{18:[1,48]},{18:[1,49]},{18:[1,50],21:51,33:[1,25],35:24},{5:[2,2],8:18,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,2],22:[1,13],23:[1,14],24:[1,15]},{14:[2,20],15:[2,20],16:[2,20],19:[2,20],22:[2,20],23:[2,20],24:[2,
20]},{5:[2,7],14:[2,7],15:[2,7],16:[2,7],19:[2,7],20:[2,7],22:[2,7],23:[2,7],24:[2,7]},{21:52,33:[1,25],35:24},{5:[2,8],14:[2,8],15:[2,8],16:[2,8],19:[2,8],20:[2,8],22:[2,8],23:[2,8],24:[2,8]},{14:[2,14],15:[2,14],16:[2,14],19:[2,14],20:[2,14],22:[2,14],23:[2,14],24:[2,14]},{18:[2,22],21:40,26:53,27:54,28:[1,41],29:[1,42],30:[1,43],31:39,32:44,33:[1,45],35:24},{18:[2,23]},{18:[2,26],28:[2,26],29:[2,26],30:[2,26],33:[2,26]},{18:[2,31],32:55,33:[1,56]},{18:[2,27],28:[2,27],29:[2,27],30:[2,27],33:[2,
27]},{18:[2,28],28:[2,28],29:[2,28],30:[2,28],33:[2,28]},{18:[2,29],28:[2,29],29:[2,29],30:[2,29],33:[2,29]},{18:[2,30],28:[2,30],29:[2,30],30:[2,30],33:[2,30]},{18:[2,33],33:[2,33]},{18:[2,40],28:[2,40],29:[2,40],30:[2,40],33:[2,40],34:[1,57],36:[2,40]},{33:[1,58]},{14:[2,13],15:[2,13],16:[2,13],19:[2,13],20:[2,13],22:[2,13],23:[2,13],24:[2,13]},{5:[2,16],14:[2,16],15:[2,16],16:[2,16],19:[2,16],20:[2,16],22:[2,16],23:[2,16],24:[2,16]},{5:[2,17],14:[2,17],15:[2,17],16:[2,17],19:[2,17],20:[2,17],22:[2,
17],23:[2,17],24:[2,17]},{5:[2,18],14:[2,18],15:[2,18],16:[2,18],19:[2,18],20:[2,18],22:[2,18],23:[2,18],24:[2,18]},{18:[1,59]},{18:[1,60]},{18:[2,21]},{18:[2,25],28:[2,25],29:[2,25],30:[2,25],33:[2,25]},{18:[2,32],33:[2,32]},{34:[1,57]},{21:61,28:[1,62],29:[1,63],30:[1,64],33:[1,25],35:24},{18:[2,39],28:[2,39],29:[2,39],30:[2,39],33:[2,39],36:[2,39]},{5:[2,19],14:[2,19],15:[2,19],16:[2,19],19:[2,19],20:[2,19],22:[2,19],23:[2,19],24:[2,19]},{5:[2,15],14:[2,15],15:[2,15],16:[2,15],19:[2,15],20:[2,
15],22:[2,15],23:[2,15],24:[2,15]},{18:[2,34],33:[2,34]},{18:[2,35],33:[2,35]},{18:[2,36],33:[2,36]},{18:[2,37],33:[2,37]}],defaultActions:{16:[2,1],37:[2,23],53:[2,21]},parseError:function(a){throw Error(a);},parse:function(a){var b=[0],e=[null],h=[],f=this.table,i="",k=0,q=0,m=0;this.lexer.setInput(a);this.lexer.yy=this.yy;this.yy.lexer=this.lexer;"undefined"==typeof this.lexer.yylloc&&(this.lexer.yylloc={});a=this.lexer.yylloc;h.push(a);"function"===typeof this.yy.parseError&&(this.parseError=
this.yy.parseError);for(var s,r,o,u,w={},y,A;;){o=b[b.length-1];this.defaultActions[o]?u=this.defaultActions[o]:(null==s&&(s=void 0,s=this.lexer.lex()||1,"number"!==typeof s&&(s=this.symbols_[s]||s)),u=f[o]&&f[o][s]);if(("undefined"===typeof u||!u.length||!u[0])&&!m){A=[];for(y in f[o])this.terminals_[y]&&2<y&&A.push("'"+this.terminals_[y]+"'");var K="",K=this.lexer.showPosition?"Parse error on line "+(k+1)+":\n"+this.lexer.showPosition()+"\nExpecting "+A.join(", ")+", got '"+this.terminals_[s]+"'":
"Parse error on line "+(k+1)+": Unexpected "+(1==s?"end of input":"'"+(this.terminals_[s]||s)+"'");this.parseError(K,{text:this.lexer.match,token:this.terminals_[s]||s,line:this.lexer.yylineno,loc:a,expected:A})}if(u[0]instanceof Array&&1<u.length)throw Error("Parse Error: multiple actions possible at state: "+o+", token: "+s);switch(u[0]){case 1:b.push(s);e.push(this.lexer.yytext);h.push(this.lexer.yylloc);b.push(u[1]);s=null;r?(s=r,r=null):(q=this.lexer.yyleng,i=this.lexer.yytext,k=this.lexer.yylineno,
a=this.lexer.yylloc,0<m&&m--);break;case 2:A=this.productions_[u[1]][1];w.$=e[e.length-A];w._$={first_line:h[h.length-(A||1)].first_line,last_line:h[h.length-1].last_line,first_column:h[h.length-(A||1)].first_column,last_column:h[h.length-1].last_column};o=this.performAction.call(w,i,q,k,this.yy,u[1],e,h);if("undefined"!==typeof o)return o;A&&(b=b.slice(0,-2*A),e=e.slice(0,-1*A),h=h.slice(0,-1*A));b.push(this.productions_[u[1]][0]);e.push(w.$);h.push(w._$);u=f[b[b.length-2]][b[b.length-1]];b.push(u);
break;case 3:return!0}}return!0}},b=function(){return{EOF:1,parseError:function(a,b){if(this.yy.parseError)this.yy.parseError(a,b);else throw Error(a);},setInput:function(a){this._input=a;this._more=this._less=this.done=!1;this.yylineno=this.yyleng=0;this.yytext=this.matched=this.match="";this.conditionStack=["INITIAL"];this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0};return this},input:function(){var a=this._input[0];this.yytext+=a;this.yyleng++;this.match+=a;this.matched+=a;a.match(/\n/)&&
this.yylineno++;this._input=this._input.slice(1);return a},unput:function(a){this._input=a+this._input;return this},more:function(){this._more=!0;return this},pastInput:function(){var a=this.matched.substr(0,this.matched.length-this.match.length);return(20<a.length?"...":"")+a.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var a=this.match;20>a.length&&(a+=this._input.substr(0,20-a.length));return(a.substr(0,20)+(20<a.length?"...":"")).replace(/\n/g,"")},showPosition:function(){var a=this.pastInput(),
b=Array(a.length+1).join("-");return a+this.upcomingInput()+"\n"+b+"^"},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var a,b;this._more||(this.match=this.yytext="");for(var e=this._currentRules(),h=0;h<e.length;h++)if(a=this._input.match(this.rules[e[h]])){if(b=a[0].match(/\n.*/g))this.yylineno+=b.length;this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:b?b[b.length-1].length-1:this.yylloc.last_column+
a[0].length};this.yytext+=a[0];this.match+=a[0];this.matches=a;this.yyleng=this.yytext.length;this._more=!1;this._input=this._input.slice(a[0].length);this.matched+=a[0];if(a=this.performAction.call(this,this.yy,this,e[h],this.conditionStack[this.conditionStack.length-1]))return a;return}if(""===this._input)return this.EOF;this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var a=this.next();
return"undefined"!==typeof a?a:this.lex()},begin:function(a){this.conditionStack.push(a)},popState:function(){return this.conditionStack.pop()},_currentRules:function(){return this.conditions[this.conditionStack[this.conditionStack.length-1]].rules},topState:function(){return this.conditionStack[this.conditionStack.length-2]},pushState:function(a){this.begin(a)},performAction:function(a,b,e){switch(e){case 0:"\\"!==b.yytext.slice(-1)&&this.begin("mu");"\\"===b.yytext.slice(-1)&&(b.yytext=b.yytext.substr(0,
b.yyleng-1),this.begin("emu"));if(b.yytext)return 14;break;case 1:return 14;case 2:return this.popState(),14;case 3:return 24;case 4:return 16;case 5:return 20;case 6:return 19;case 7:return 19;case 8:return 23;case 9:return 23;case 10:return b.yytext=b.yytext.substr(3,b.yyleng-5),this.popState(),15;case 11:return 22;case 12:return 34;case 13:return 33;case 14:return 33;case 15:return 36;case 17:return this.popState(),18;case 18:return this.popState(),18;case 19:return b.yytext=b.yytext.substr(1,
b.yyleng-2).replace(/\\"/g,'"'),28;case 20:return 30;case 21:return 30;case 22:return 29;case 23:return 33;case 24:return b.yytext=b.yytext.substr(1,b.yyleng-2),33;case 25:return"INVALID";case 26:return 5}},rules:[/^[^\x00]*?(?=(\{\{))/,/^[^\x00]+/,/^[^\x00]{2,}?(?=(\{\{))/,/^\{\{>/,/^\{\{#/,/^\{\{\//,/^\{\{\^/,/^\{\{\s*else\b/,/^\{\{\{/,/^\{\{&/,/^\{\{![\s\S]*?\}\}/,/^\{\{/,/^=/,/^\.(?=[} ])/,/^\.\./,/^[\/.]/,/^\s+/,/^\}\}\}/,/^\}\}/,/^"(\\["]|[^"])*"/,/^true(?=[}\s])/,/^false(?=[}\s])/,/^[0-9]+(?=[}\s])/,
/^[a-zA-Z0-9_$-]+(?=[=}\s\/.])/,/^\[[^\]]*\]/,/^./,/^$/],conditions:{mu:{rules:[3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26],inclusive:!1},emu:{rules:[2],inclusive:!1},INITIAL:{rules:[0,1,26],inclusive:!0}}}}();a.lexer=b;return a}();"undefined"!==typeof require&&"undefined"!==typeof exports&&(exports.parser=ga,exports.parse=function(){return ga.parse.apply(ga,arguments)},exports.main=function(a){if(!a[1])throw Error("Usage: "+a[0]+" FILE");a="undefined"!==typeof process?require("fs").readFileSync(require("path").join(process.cwd(),
a[1]),"utf8"):require("file").path(require("file").cwd()).join(a[1]).read({charset:"utf-8"});return exports.parser.parse(a)},"undefined"!==typeof module&&require.main===module&&exports.main("undefined"!==typeof process?process.argv.slice(1):require("system").args));m.Parser=ga;m.parse=function(a){m.Parser.yy=m.AST;return m.Parser.parse(a)};m.print=function(a){return(new m.PrintVisitor).accept(a)};m.logger={DEBUG:0,INFO:1,WARN:2,ERROR:3,level:3,log:function(){}};m.log=function(a,b){m.logger.log(a,
b)};(function(){m.AST={};m.AST.ProgramNode=function(a,c){this.type="program";this.statements=a;c&&(this.inverse=new m.AST.ProgramNode(c))};m.AST.MustacheNode=function(a,c,d){this.type="mustache";this.id=a[0];this.params=a.slice(1);this.hash=c;this.escaped=!d};m.AST.PartialNode=function(a,c){this.type="partial";this.id=a;this.context=c};var a=function(a,c){if(a.original!==c.original)throw new m.Exception(a.original+" doesn't match "+c.original);};m.AST.BlockNode=function(b,c,d){a(b.id,d);this.type=
"block";this.mustache=b;this.program=c};m.AST.InverseNode=function(b,c,d){a(b.id,d);this.type="inverse";this.mustache=b;this.program=c};m.AST.ContentNode=function(a){this.type="content";this.string=a};m.AST.HashNode=function(a){this.type="hash";this.pairs=a};m.AST.IdNode=function(a){this.type="ID";this.original=a.join(".");for(var c=[],d=0,e=0,h=a.length;e<h;e++){var f=a[e];".."===f?d++:"."===f||"this"===f?this.isScoped=!0:c.push(f)}this.parts=c;this.string=c.join(".");this.depth=d;this.isSimple=
1===c.length&&0===d};m.AST.StringNode=function(a){this.type="STRING";this.string=a};m.AST.IntegerNode=function(a){this.type="INTEGER";this.integer=a};m.AST.BooleanNode=function(a){this.type="BOOLEAN";this.bool=a};m.AST.CommentNode=function(a){this.type="comment";this.comment=a}})();m.Exception=function(a){var b=Error.prototype.constructor.apply(this,arguments),c;for(c in b)b.hasOwnProperty(c)&&(this[c]=b[c]);this.message=b.message};m.Exception.prototype=Error();m.SafeString=function(a){this.string=
a};m.SafeString.prototype.toString=function(){return this.string.toString()};(function(){var a={"<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},b=/&(?!\w+;)|[<>"'`]/g,c=/[&<>"'`]/,d=function(b){return a[b]||"&amp;"};m.Utils={escapeExpression:function(a){return a instanceof m.SafeString?a.toString():null==a||!1===a?"":!c.test(a)?a:a.replace(b,d)},isEmpty:function(a){return"undefined"===typeof a?!0:null===a?!0:!1===a?!0:"[object Array]"===Object.prototype.toString.call(a)&&0===a.length?
!0:!1}}})();m.Compiler=function(){};m.JavaScriptCompiler=function(){};(function(a,b){a.OPCODE_MAP={appendContent:1,getContext:2,lookupWithHelpers:3,lookup:4,append:5,invokeMustache:6,appendEscaped:7,pushString:8,truthyOrFallback:9,functionOrFallback:10,invokeProgram:11,invokePartial:12,push:13,assignToHash:15,pushStringParam:16};a.MULTI_PARAM_OPCODES={appendContent:1,getContext:1,lookupWithHelpers:2,lookup:1,invokeMustache:3,pushString:1,truthyOrFallback:1,functionOrFallback:1,invokeProgram:3,invokePartial:1,
push:1,assignToHash:1,pushStringParam:1};a.DISASSEMBLE_MAP={};for(var c in a.OPCODE_MAP)a.DISASSEMBLE_MAP[a.OPCODE_MAP[c]]=c;a.multiParamSize=function(b){return a.MULTI_PARAM_OPCODES[a.DISASSEMBLE_MAP[b]]};a.prototype={compiler:a,disassemble:function(){for(var b=this.opcodes,c,d=[],e,h=0,k=b.length;h<k;h++)if(c=b[h],"DECLARE"===c)e=b[++h],c=b[++h],d.push("DECLARE "+e+" = "+c);else{e=a.DISASSEMBLE_MAP[c];for(var m=a.multiParamSize(c),o=[],u=0;u<m;u++)c=b[++h],"string"===typeof c&&(c='"'+c.replace("\n",
"\\n")+'"'),o.push(c);e=e+" "+o.join(" ");d.push(e)}return d.join("\n")},guid:0,compile:function(a,b){this.children=[];this.depths={list:[]};this.options=b;var c=this.options.knownHelpers;this.options.knownHelpers={helperMissing:!0,blockHelperMissing:!0,each:!0,"if":!0,unless:!0,"with":!0,log:!0};if(c)for(var d in c)this.options.knownHelpers[d]=c[d];return this.program(a)},accept:function(a){return this[a.type](a)},program:function(a){var a=a.statements,b;this.opcodes=[];for(var c=0,d=a.length;c<
d;c++)b=a[c],this[b.type](b);this.isSimple=1===d;this.depths.list=this.depths.list.sort(function(a,b){return a-b});return this},compileProgram:function(a){var a=(new this.compiler).compile(a,this.options),b=this.guid++;this.usePartial=this.usePartial||a.usePartial;this.children[b]=a;for(var c=0,d=a.depths.list.length;c<d;c++)depth=a.depths.list[c],2>depth||this.addDepth(depth-1);return b},block:function(a){var b=a.mustache,c=this.setupStackForMustache(b),d=this.compileProgram(a.program);a.program.inverse&&
(a=this.compileProgram(a.program.inverse),this.declare("inverse",a));this.opcode("invokeProgram",d,c.length,!!b.hash);this.declare("inverse",null);this.opcode("append")},inverse:function(a){var b=this.setupStackForMustache(a.mustache);this.declare("inverse",this.compileProgram(a.program));this.opcode("invokeProgram",null,b.length,!!a.mustache.hash);this.declare("inverse",null);this.opcode("append")},hash:function(a){var a=a.pairs,b,c;this.opcode("push","{}");for(var d=0,e=a.length;d<e;d++)b=a[d],
c=b[1],this.accept(c),this.opcode("assignToHash",b[0])},partial:function(a){var b=a.id;this.usePartial=!0;a.context?this.ID(a.context):this.opcode("push","depth0");this.opcode("invokePartial",b.original);this.opcode("append")},content:function(a){this.opcode("appendContent",a.string)},mustache:function(a){this.opcode("invokeMustache",this.setupStackForMustache(a).length,a.id.original,!!a.hash);a.escaped&&!this.options.noEscape?this.opcode("appendEscaped"):this.opcode("append")},ID:function(a){this.addDepth(a.depth);
this.opcode("getContext",a.depth);this.opcode("lookupWithHelpers",a.parts[0]||null,a.isScoped||!1);for(var b=1,c=a.parts.length;b<c;b++)this.opcode("lookup",a.parts[b])},STRING:function(a){this.opcode("pushString",a.string)},INTEGER:function(a){this.opcode("push",a.integer)},BOOLEAN:function(a){this.opcode("push",a.bool)},comment:function(){},pushParams:function(a){for(var b=a.length,c;b--;)if(c=a[b],this.options.stringParams)c.depth&&this.addDepth(c.depth),this.opcode("getContext",c.depth||0),this.opcode("pushStringParam",
c.string);else this[c.type](c)},opcode:function(b,c,d,e){this.opcodes.push(a.OPCODE_MAP[b]);void 0!==c&&this.opcodes.push(c);void 0!==d&&this.opcodes.push(d);void 0!==e&&this.opcodes.push(e)},declare:function(a,b){this.opcodes.push("DECLARE");this.opcodes.push(a);this.opcodes.push(b)},addDepth:function(a){0!==a&&!this.depths[a]&&(this.depths[a]=!0,this.depths.list.push(a))},setupStackForMustache:function(a){var b=a.params;this.pushParams(b);a.hash&&this.hash(a.hash);this.ID(a.id);return b}};b.prototype=
{nameLookup:function(a,c){return/^[0-9]+$/.test(c)?a+"["+c+"]":b.isValidJavaScriptVariableName(c)?a+"."+c:a+"['"+c+"']"},appendToBuffer:function(a){return this.environment.isSimple?"return "+a+";":"buffer += "+a+";"},initializeBuffer:function(){return this.quotedString("")},namespace:"Handlebars",compile:function(a,b,c,d){this.environment=a;this.options=b||{};this.name=this.environment.name;this.isChild=!!c;this.context=c||{programs:[],aliases:{self:"this"},registers:{list:[]}};this.preamble();this.stackSlot=
0;this.stackVars=[];this.compileChildren(a,b);a=a.opcodes;this.i=0;for(h=a.length;this.i<h;this.i++)a=this.nextOpcode(0),"DECLARE"===a[0]?(this.i+=2,this[a[1]]=a[2]):(this.i+=a[1].length,this[a[0]].apply(this,a[1]));return this.createFunctionContext(d)},nextOpcode:function(b){var c=this.environment.opcodes,d=c[this.i+b],e,h;if("DECLARE"===d)return e=c[this.i+1],b=c[this.i+2],["DECLARE",e,b];e=a.DISASSEMBLE_MAP[d];d=a.multiParamSize(d);h=[];for(var k=0;k<d;k++)h.push(c[this.i+k+1+b]);return[e,h]},
eat:function(a){this.i+=a.length},preamble:function(){var a=[];this.useRegister("foundHelper");if(this.isChild)a.push("");else{var b=this.namespace,c="helpers = helpers || "+b+".helpers;";this.environment.usePartial&&(c=c+" partials = partials || "+b+".partials;");a.push(c)}this.environment.isSimple?a.push(""):a.push(", buffer = "+this.initializeBuffer());this.lastContext=0;this.source=a},createFunctionContext:function(a){var b=this.stackVars;this.isChild||(b=b.concat(this.context.registers.list));
0<b.length&&(this.source[1]=this.source[1]+", "+b.join(", "));if(!this.isChild)for(var c in this.context.aliases)this.source[1]=this.source[1]+", "+c+"="+this.context.aliases[c];this.source[1]&&(this.source[1]="var "+this.source[1].substring(2)+";");this.isChild||(this.source[1]+="\n"+this.context.programs.join("\n")+"\n");this.environment.isSimple||this.source.push("return buffer;");b=this.isChild?["depth0","data"]:["Handlebars","depth0","helpers","partials","data"];c=0;for(var d=this.environment.depths.list.length;c<
d;c++)b.push("depth"+this.environment.depths.list[c]);if(a)return b.push(this.source.join("\n  ")),Function.apply(this,b);a="function "+(this.name||"")+"("+b.join(",")+") {\n  "+this.source.join("\n  ")+"}";m.log(m.logger.DEBUG,a+"\n\n");return a},appendContent:function(a){this.source.push(this.appendToBuffer(this.quotedString(a)))},append:function(){var a=this.popStack();this.source.push("if("+a+" || "+a+" === 0) { "+this.appendToBuffer(a)+" }");this.environment.isSimple&&this.source.push("else { "+
this.appendToBuffer("''")+" }")},appendEscaped:function(){var a=this.nextOpcode(1),b="";this.context.aliases.escapeExpression="this.escapeExpression";"appendContent"===a[0]&&(b=" + "+this.quotedString(a[1][0]),this.eat(a));this.source.push(this.appendToBuffer("escapeExpression("+this.popStack()+")"+b))},getContext:function(a){this.lastContext!==a&&(this.lastContext=a)},lookupWithHelpers:function(a,b){if(a){var c=this.nextStack();this.usingKnownHelper=!1;!b&&this.options.knownHelpers[a]?(c=c+" = "+
this.nameLookup("helpers",a,"helper"),this.usingKnownHelper=!0):b||this.options.knownHelpersOnly?c=c+" = "+this.nameLookup("depth"+this.lastContext,a,"context"):(this.register("foundHelper",this.nameLookup("helpers",a,"helper")),c=c+" = foundHelper || "+this.nameLookup("depth"+this.lastContext,a,"context"));this.source.push(c+";")}else this.pushStack("depth"+this.lastContext)},lookup:function(a){var b=this.topStack();this.source.push(b+" = ("+b+" === null || "+b+" === undefined || "+b+" === false ? "+
b+" : "+this.nameLookup(b,a,"context")+");")},pushStringParam:function(a){this.pushStack("depth"+this.lastContext);this.pushString(a)},pushString:function(a){this.pushStack(this.quotedString(a))},push:function(a){this.pushStack(a)},invokeMustache:function(a,b,c){this.populateParams(a,this.quotedString(b),"{}",null,c,function(a,b,c){this.usingKnownHelper||(this.context.aliases.helperMissing="helpers.helperMissing",this.context.aliases.undef="void 0",this.source.push("else if("+c+"=== undef) { "+a+
" = helperMissing.call("+b+"); }"),a!==c&&this.source.push("else { "+a+" = "+c+"; }"))})},invokeProgram:function(a,b,c){var d=this.programExpression(this.inverse),a=this.programExpression(a);this.populateParams(b,null,a,d,c,function(a,b){this.usingKnownHelper||(this.context.aliases.blockHelperMissing="helpers.blockHelperMissing",this.source.push("else { "+a+" = blockHelperMissing.call("+b+"); }"))})},populateParams:function(a,b,c,d,e,h){var k=e||this.options.stringParams||d||this.options.data,m=this.popStack(),
o=[],w;k?(this.register("tmp1",c),w="tmp1"):w="{ hash: {} }";k&&this.source.push("tmp1.hash = "+(e?this.popStack():"{}")+";");this.options.stringParams&&this.source.push("tmp1.contexts = [];");for(k=0;k<a;k++)e=this.popStack(),o.push(e),this.options.stringParams&&this.source.push("tmp1.contexts.push("+this.popStack()+");");d&&(this.source.push("tmp1.fn = tmp1;"),this.source.push("tmp1.inverse = "+d+";"));this.options.data&&this.source.push("tmp1.data = data;");o.push(w);this.populateCall(o,m,b||m,
h,"{}"!==c)},populateCall:function(a,b,c,d,e){var h=["depth0"].concat(a).join(", "),a=["depth0"].concat(c).concat(a).join(", "),c=this.nextStack();this.usingKnownHelper?this.source.push(c+" = "+b+".call("+h+");"):(this.context.aliases.functionType='"function"',this.source.push("if("+(e?"foundHelper && ":"")+"typeof "+b+" === functionType) { "+c+" = "+b+".call("+h+"); }"));d.call(this,c,a,b);this.usingKnownHelper=!1},invokePartial:function(a){params=[this.nameLookup("partials",a,"partial"),"'"+a+"'",
this.popStack(),"helpers","partials"];this.options.data&&params.push("data");this.pushStack("self.invokePartial("+params.join(", ")+");")},assignToHash:function(a){var b=this.popStack();this.source.push(this.topStack()+"['"+a+"'] = "+b+";")},compiler:b,compileChildren:function(a,b){for(var c=a.children,d,e,h=0,k=c.length;h<k;h++){d=c[h];e=new this.compiler;this.context.programs.push("");var m=this.context.programs.length;d.index=m;d.name="program"+m;this.context.programs[m]=e.compile(d,b,this.context)}},
programExpression:function(a){if(null==a)return"self.noop";for(var b=this.environment.children[a],a=b.depths.list,b=[b.index,b.name,"data"],c=0,d=a.length;c<d;c++)depth=a[c],1===depth?b.push("depth0"):b.push("depth"+(depth-1));if(0===a.length)return"self.program("+b.join(", ")+")";b.shift();return"self.programWithDepth("+b.join(", ")+")"},register:function(a,b){this.useRegister(a);this.source.push(a+" = "+b+";")},useRegister:function(a){this.context.registers[a]||(this.context.registers[a]=!0,this.context.registers.list.push(a))},
pushStack:function(a){this.source.push(this.nextStack()+" = "+a+";");return"stack"+this.stackSlot},nextStack:function(){this.stackSlot++;this.stackSlot>this.stackVars.length&&this.stackVars.push("stack"+this.stackSlot);return"stack"+this.stackSlot},popStack:function(){return"stack"+this.stackSlot--},topStack:function(){return"stack"+this.stackSlot},quotedString:function(a){return'"'+a.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\n/g,"\\n").replace(/\r/g,"\\r")+'"'}};c="break,else,new,var,case,finally,return,void,catch,for,switch,while,continue,function,this,with,default,if,throw,delete,in,try,do,instanceof,typeof,abstract,enum,int,short,boolean,export,interface,static,byte,extends,long,super,char,final,native,synchronized,class,float,package,throws,const,goto,private,transient,debugger,implements,protected,volatile,double,import,public,let,yield".split(",");
for(var d=b.RESERVED_WORDS={},e=0,h=c.length;e<h;e++)d[c[e]]=!0;b.isValidJavaScriptVariableName=function(a){return!b.RESERVED_WORDS[a]&&/^[a-zA-Z_$][0-9a-zA-Z_$]+$/.test(a)?!0:!1}})(m.Compiler,m.JavaScriptCompiler);m.precompile=function(a,b){var b=b||{},c=m.parse(a),c=(new m.Compiler).compile(c,b);return(new m.JavaScriptCompiler).compile(c,b)};m.compile=function(a,b){var b=b||{},c;return function(d,e){if(!c){var h=m.parse(a),h=(new m.Compiler).compile(h,b),h=(new m.JavaScriptCompiler).compile(h,b,
void 0,!0);c=m.template(h)}return c.call(this,d,e)}};m.VM={template:function(a){var b={escapeExpression:m.Utils.escapeExpression,invokePartial:m.VM.invokePartial,programs:[],program:function(a,b,e){var h=this.programs[a];if(e)return m.VM.program(b,e);h||(h=this.programs[a]=m.VM.program(b));return h},programWithDepth:m.VM.programWithDepth,noop:m.VM.noop};return function(c,d){d=d||{};return a.call(b,m,c,d.helpers,d.partials,d.data)}},programWithDepth:function(a,b,c){var d=Array.prototype.slice.call(arguments,
2);return function(c,h){h=h||{};return a.apply(this,[c,h.data||b].concat(d))}},program:function(a,b){return function(c,d){d=d||{};return a(c,d.data||b)}},noop:function(){return""},invokePartial:function(a,b,c,d,e,h){options={helpers:d,partials:e,data:h};if(void 0===a)throw new m.Exception("The partial "+b+" could not be found");if(a instanceof Function)return a(c,options);if(m.compile)return e[b]=m.compile(a),e[b](c,options);throw new m.Exception("The partial "+b+" could not be compiled when running in runtime-only mode");
}};m.template=m.VM.template;(function(){function a(b,c,d){if(b===c)return 0!==b||1/b==1/c;if(null==b||null==c)return b===c;b._chain&&(b=b._wrapped);c._chain&&(c=c._wrapped);if(b.isEqual&&j.isFunction(b.isEqual))return b.isEqual(c);if(c.isEqual&&j.isFunction(c.isEqual))return c.isEqual(b);var e=k.call(b);if(e!=k.call(c))return!1;switch(e){case "[object String]":return b==""+c;case "[object Number]":return b!=+b?c!=+c:0==b?1/b==1/c:b==+c;case "[object Date]":case "[object Boolean]":return+b==+c;case "[object RegExp]":return b.source==
c.source&&b.global==c.global&&b.multiline==c.multiline&&b.ignoreCase==c.ignoreCase}if("object"!=typeof b||"object"!=typeof c)return!1;for(var f=d.length;f--;)if(d[f]==b)return!0;d.push(b);var f=0,g=!0;if("[object Array]"==e){if(f=b.length,g=f==c.length)for(;f--&&(g=f in b==f in c&&a(b[f],c[f],d)););}else{if("constructor"in b!="constructor"in c||b.constructor!=c.constructor)return!1;for(var h in b)if(j.has(b,h)&&(f++,!(g=j.has(c,h)&&a(b[h],c[h],d))))break;if(g){for(h in c)if(j.has(c,h)&&!f--)break;
g=!f}}d.pop();return g}var b=this,c=b._,d={},e=Array.prototype,h=Object.prototype,f=e.slice,i=e.unshift,k=h.toString,m=h.hasOwnProperty,o=e.forEach,s=e.map,r=e.reduce,w=e.reduceRight,u=e.filter,y=e.every,K=e.some,A=e.indexOf,N=e.lastIndexOf,h=Array.isArray,M=Object.keys,l=Function.prototype.bind,j=function(a){return new O(a)};b._=j;j.VERSION="1.3.1";var D=j.each=j.forEach=function(a,b,c){if(null!=a)if(o&&a.forEach===o)a.forEach(b,c);else if(a.length===+a.length)for(var e=0,f=a.length;e<f&&!(e in a&&
b.call(c,a[e],e,a)===d);e++);else for(e in a)if(j.has(a,e)&&b.call(c,a[e],e,a)===d)break};j.map=j.collect=function(a,b,c){var d=[];if(null==a)return d;if(s&&a.map===s)return a.map(b,c);D(a,function(a,e,f){d[d.length]=b.call(c,a,e,f)});a.length===+a.length&&(d.length=a.length);return d};j.reduce=j.foldl=j.inject=function(a,b,c,d){var e=2<arguments.length;null==a&&(a=[]);if(r&&a.reduce===r)return d&&(b=j.bind(b,d)),e?a.reduce(b,c):a.reduce(b);D(a,function(a,f,g){e?c=b.call(d,c,a,f,g):(c=a,e=!0)});if(!e)throw new TypeError("Reduce of empty array with no initial value");
return c};j.reduceRight=j.foldr=function(a,b,c,d){var e=2<arguments.length;null==a&&(a=[]);if(w&&a.reduceRight===w)return d&&(b=j.bind(b,d)),e?a.reduceRight(b,c):a.reduceRight(b);var f=j.toArray(a).reverse();d&&!e&&(b=j.bind(b,d));return e?j.reduce(f,b,c,d):j.reduce(f,b)};j.find=j.detect=function(a,b,c){var d;z(a,function(a,e,f){if(b.call(c,a,e,f))return d=a,!0});return d};j.filter=j.select=function(a,b,c){var d=[];if(null==a)return d;if(u&&a.filter===u)return a.filter(b,c);D(a,function(a,e,f){b.call(c,
a,e,f)&&(d[d.length]=a)});return d};j.reject=function(a,b,c){var d=[];if(null==a)return d;D(a,function(a,e,f){b.call(c,a,e,f)||(d[d.length]=a)});return d};j.every=j.all=function(a,b,c){var e=!0;if(null==a)return e;if(y&&a.every===y)return a.every(b,c);D(a,function(a,f,g){if(!(e=e&&b.call(c,a,f,g)))return d});return e};var z=j.some=j.any=function(a,b,c){b||(b=j.identity);var e=!1;if(null==a)return e;if(K&&a.some===K)return a.some(b,c);D(a,function(a,f,g){if(e||(e=b.call(c,a,f,g)))return d});return!!e};
j.include=j.contains=function(a,b){var c=!1;if(null==a)return c;return A&&a.indexOf===A?-1!=a.indexOf(b):c=z(a,function(a){return a===b})};j.invoke=function(a,b){var c=f.call(arguments,2);return j.map(a,function(a){return(j.isFunction(b)?b||a:a[b]).apply(a,c)})};j.pluck=function(a,b){return j.map(a,function(a){return a[b]})};j.max=function(a,b,c){if(!b&&j.isArray(a))return Math.max.apply(Math,a);if(!b&&j.isEmpty(a))return-Infinity;var d={computed:-Infinity};D(a,function(a,e,f){e=b?b.call(c,a,e,f):
a;e>=d.computed&&(d={value:a,computed:e})});return d.value};j.min=function(a,b,c){if(!b&&j.isArray(a))return Math.min.apply(Math,a);if(!b&&j.isEmpty(a))return Infinity;var d={computed:Infinity};D(a,function(a,e,f){e=b?b.call(c,a,e,f):a;e<d.computed&&(d={value:a,computed:e})});return d.value};j.shuffle=function(a){var b=[],c;D(a,function(a,d){0==d?b[0]=a:(c=Math.floor(Math.random()*(d+1)),b[d]=b[c],b[c]=a)});return b};j.sortBy=function(a,b,c){return j.pluck(j.map(a,function(a,d,e){return{value:a,criteria:b.call(c,
a,d,e)}}).sort(function(a,b){var c=a.criteria,d=b.criteria;return c<d?-1:c>d?1:0}),"value")};j.groupBy=function(a,b){var c={},d=j.isFunction(b)?b:function(a){return a[b]};D(a,function(a,b){var e=d(a,b);(c[e]||(c[e]=[])).push(a)});return c};j.sortedIndex=function(a,b,c){c||(c=j.identity);for(var d=0,e=a.length;d<e;){var f=d+e>>1;c(a[f])<c(b)?d=f+1:e=f}return d};j.toArray=function(a){return!a?[]:a.toArray?a.toArray():j.isArray(a)||j.isArguments(a)?f.call(a):j.values(a)};j.size=function(a){return j.toArray(a).length};
j.first=j.head=function(a,b,c){return null!=b&&!c?f.call(a,0,b):a[0]};j.initial=function(a,b,c){return f.call(a,0,a.length-(null==b||c?1:b))};j.last=function(a,b,c){return null!=b&&!c?f.call(a,Math.max(a.length-b,0)):a[a.length-1]};j.rest=j.tail=function(a,b,c){return f.call(a,null==b||c?1:b)};j.compact=function(a){return j.filter(a,function(a){return!!a})};j.flatten=function(a,b){return j.reduce(a,function(a,c){if(j.isArray(c))return a.concat(b?c:j.flatten(c));a[a.length]=c;return a},[])};j.without=
function(a){return j.difference(a,f.call(arguments,1))};j.uniq=j.unique=function(a,b,c){var c=c?j.map(a,c):a,d=[];j.reduce(c,function(c,e,f){if(0==f||(!0===b?j.last(c)!=e:!j.include(c,e)))c[c.length]=e,d[d.length]=a[f];return c},[]);return d};j.union=function(){return j.uniq(j.flatten(arguments,!0))};j.intersection=j.intersect=function(a){var b=f.call(arguments,1);return j.filter(j.uniq(a),function(a){return j.every(b,function(b){return 0<=j.indexOf(b,a)})})};j.difference=function(a){var b=j.flatten(f.call(arguments,
1));return j.filter(a,function(a){return!j.include(b,a)})};j.zip=function(){for(var a=f.call(arguments),b=j.max(j.pluck(a,"length")),c=Array(b),d=0;d<b;d++)c[d]=j.pluck(a,""+d);return c};j.indexOf=function(a,b,c){if(null==a)return-1;var d;if(c)return c=j.sortedIndex(a,b),a[c]===b?c:-1;if(A&&a.indexOf===A)return a.indexOf(b);for(c=0,d=a.length;c<d;c++)if(c in a&&a[c]===b)return c;return-1};j.lastIndexOf=function(a,b){if(null==a)return-1;if(N&&a.lastIndexOf===N)return a.lastIndexOf(b);for(var c=a.length;c--;)if(c in
a&&a[c]===b)return c;return-1};j.range=function(a,b,c){1>=arguments.length&&(b=a||0,a=0);for(var c=arguments[2]||1,d=Math.max(Math.ceil((b-a)/c),0),e=0,f=Array(d);e<d;)f[e++]=a,a+=c;return f};var B=function(){};j.bind=function(a,b){var c,d;if(a.bind===l&&l)return l.apply(a,f.call(arguments,1));if(!j.isFunction(a))throw new TypeError;d=f.call(arguments,2);return c=function(){if(!(this instanceof c))return a.apply(b,d.concat(f.call(arguments)));B.prototype=a.prototype;var e=new B,g=a.apply(e,d.concat(f.call(arguments)));
return Object(g)===g?g:e}};j.bindAll=function(a){var b=f.call(arguments,1);0==b.length&&(b=j.functions(a));D(b,function(b){a[b]=j.bind(a[b],a)});return a};j.memoize=function(a,b){var c={};b||(b=j.identity);return function(){var d=b.apply(this,arguments);return j.has(c,d)?c[d]:c[d]=a.apply(this,arguments)}};j.delay=function(a,b){var c=f.call(arguments,2);return setTimeout(function(){return a.apply(a,c)},b)};j.defer=function(a){return j.delay.apply(j,[a,1].concat(f.call(arguments,1)))};j.throttle=function(a,
b){var c,d,e,f,g,h=j.debounce(function(){g=f=!1},b);return function(){c=this;d=arguments;e||(e=setTimeout(function(){e=null;g&&a.apply(c,d);h()},b));f?g=!0:a.apply(c,d);h();f=!0}};j.debounce=function(a,b){var c;return function(){var d=this,e=arguments;clearTimeout(c);c=setTimeout(function(){c=null;a.apply(d,e)},b)}};j.once=function(a){var b=!1,c;return function(){if(b)return c;b=!0;return c=a.apply(this,arguments)}};j.wrap=function(a,b){return function(){var c=[a].concat(f.call(arguments,0));return b.apply(this,
c)}};j.compose=function(){var a=arguments;return function(){for(var b=arguments,c=a.length-1;0<=c;c--)b=[a[c].apply(this,b)];return b[0]}};j.after=function(a,b){return 0>=a?b():function(){if(1>--a)return b.apply(this,arguments)}};j.keys=M||function(a){if(a!==Object(a))throw new TypeError("Invalid object");var b=[],c;for(c in a)j.has(a,c)&&(b[b.length]=c);return b};j.values=function(a){return j.map(a,j.identity)};j.functions=j.methods=function(a){var b=[],c;for(c in a)j.isFunction(a[c])&&b.push(c);
return b.sort()};j.extend=function(a){D(f.call(arguments,1),function(b){for(var c in b)a[c]=b[c]});return a};j.defaults=function(a){D(f.call(arguments,1),function(b){for(var c in b)null==a[c]&&(a[c]=b[c])});return a};j.clone=function(a){return!j.isObject(a)?a:j.isArray(a)?a.slice():j.extend({},a)};j.tap=function(a,b){b(a);return a};j.isEqual=function(b,c){return a(b,c,[])};j.isEmpty=function(a){if(j.isArray(a)||j.isString(a))return 0===a.length;for(var b in a)if(j.has(a,b))return!1;return!0};j.isElement=
function(a){return!!(a&&1==a.nodeType)};j.isArray=h||function(a){return"[object Array]"==k.call(a)};j.isObject=function(a){return a===Object(a)};j.isArguments=function(a){return"[object Arguments]"==k.call(a)};j.isArguments(arguments)||(j.isArguments=function(a){return!(!a||!j.has(a,"callee"))});j.isFunction=function(a){return"[object Function]"==k.call(a)};j.isString=function(a){return"[object String]"==k.call(a)};j.isNumber=function(a){return"[object Number]"==k.call(a)};j.isNaN=function(a){return a!==
a};j.isBoolean=function(a){return!0===a||!1===a||"[object Boolean]"==k.call(a)};j.isDate=function(a){return"[object Date]"==k.call(a)};j.isRegExp=function(a){return"[object RegExp]"==k.call(a)};j.isNull=function(a){return null===a};j.isUndefined=function(a){return void 0===a};j.has=function(a,b){return m.call(a,b)};j.noConflict=function(){b._=c;return this};j.identity=function(a){return a};j.times=function(a,b,c){for(var d=0;d<a;d++)b.call(c,d)};j.escape=function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,
"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/\//g,"&#x2F;")};j.mixin=function(a){D(j.functions(a),function(b){g(b,j[b]=a[b])})};var W=0;j.uniqueId=function(a){var b=W++;return a?a+b:b};j.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var Y=/.^/,v=function(a){return a.replace(/\\\\/g,"\\").replace(/\\'/g,"'")};j.template=function(a,b){var c=j.templateSettings,c="var __p=[],print=function(){__p.push.apply(__p,arguments);};with(obj||{}){__p.push('"+
a.replace(/\\/g,"\\\\").replace(/'/g,"\\'").replace(c.escape||Y,function(a,b){return"',_.escape("+v(b)+"),'"}).replace(c.interpolate||Y,function(a,b){return"',"+v(b)+",'"}).replace(c.evaluate||Y,function(a,b){return"');"+v(b).replace(/[\r\n\t]/g," ")+";__p.push('"}).replace(/\r/g,"\\r").replace(/\n/g,"\\n").replace(/\t/g,"\\t")+"');}return __p.join('');",d=new Function("obj","_",c);return b?d(b,j):function(a){return d.call(this,a,j)}};j.chain=function(a){return j(a).chain()};var O=function(a){this._wrapped=
a};j.prototype=O.prototype;var L=function(a,b){return b?j(a).chain():a},g=function(a,b){O.prototype[a]=function(){var a=f.call(arguments);i.call(a,this._wrapped);return L(b.apply(j,a),this._chain)}};j.mixin(j);D("pop,push,reverse,shift,sort,splice,unshift".split(","),function(a){var b=e[a];O.prototype[a]=function(){var c=this._wrapped;b.apply(c,arguments);var d=c.length;("shift"==a||"splice"==a)&&0===d&&delete c[0];return L(c,this._chain)}});D(["concat","join","slice"],function(a){var b=e[a];O.prototype[a]=
function(){return L(b.apply(this._wrapped,arguments),this._chain)}});O.prototype.chain=function(){this._chain=!0;return this};O.prototype.value=function(){return this._wrapped}}).call(this);(function(){var a=this,b=a.Backbone,c=Array.prototype.slice,d=Array.prototype.splice,e;e="undefined"!==typeof exports?exports:a.Backbone={};e.VERSION="0.9.0";var h=a._,f=K;e.noConflict=function(){a.Backbone=b;return this};e.emulateHTTP=!1;e.emulateJSON=!1;e.Events={on:function(a,b,c){for(var d,a=a.split(/\s+/),
e=this._callbacks||(this._callbacks={});d=a.shift();){d=e[d]||(e[d]={});var f=d.tail||(d.tail=d.next={});f.callback=b;f.context=c;d.tail=f.next={}}return this},off:function(a,b,c){var d,e,f;if(a){if(e=this._callbacks)for(a=a.split(/\s+/);d=a.shift();)if(f=e[d],delete e[d],b&&f)for(;(f=f.next)&&f.next;)if(!(f.callback===b&&(!c||f.context===c)))this.on(d,f.callback,f.context)}else delete this._callbacks;return this},trigger:function(a){var b,d,e,f;if(!(e=this._callbacks))return this;f=e.all;for((a=
a.split(/\s+/)).push(null);b=a.shift();)f&&a.push({next:f.next,tail:f.tail,event:b}),(d=e[b])&&a.push({next:d.next,tail:d.tail});for(f=c.call(arguments,1);d=a.pop();){b=d.tail;for(e=d.event?[d.event].concat(f):f;(d=d.next)!==b;)d.callback.apply(d.context||this,e)}return this}};e.Events.bind=e.Events.on;e.Events.unbind=e.Events.off;e.Model=function(a,b){var c;a||(a={});b&&b.parse&&(a=this.parse(a));if(c=N(this,"defaults"))a=h.extend({},c,a);b&&b.collection&&(this.collection=b.collection);this.attributes=
{};this._escapedAttributes={};this.cid=h.uniqueId("c");this._changed={};if(!this.set(a,{silent:!0}))throw Error("Can't create an invalid model");this._changed={};this._previousAttributes=h.clone(this.attributes);this.initialize.apply(this,arguments)};h.extend(e.Model.prototype,e.Events,{idAttribute:"id",initialize:function(){},toJSON:function(){return h.clone(this.attributes)},get:function(a){return this.attributes[a]},escape:function(a){var b;if(b=this._escapedAttributes[a])return b;b=this.attributes[a];
return this._escapedAttributes[a]=h.escape(null==b?"":""+b)},has:function(a){return null!=this.attributes[a]},set:function(a,b,c){var d,f;h.isObject(a)||null==a?(d=a,c=b):(d={},d[a]=b);c||(c={});if(!d)return this;d instanceof e.Model&&(d=d.attributes);if(c.unset)for(f in d)d[f]=void 0;if(this.validate&&!this._performValidation(d,c))return!1;this.idAttribute in d&&(this.id=d[this.idAttribute]);var b=this.attributes,i=this._escapedAttributes,k=this._previousAttributes||{},n=this._changing;this._changing=
!0;for(f in d)if(a=d[f],h.isEqual(b[f],a)||delete i[f],c.unset?delete b[f]:b[f]=a,delete this._changed[f],!h.isEqual(k[f],a)||h.has(b,f)!=h.has(k,f))this._changed[f]=a;n||(!c.silent&&this.hasChanged()&&this.change(c),this._changing=!1);return this},unset:function(a,b){(b||(b={})).unset=!0;return this.set(a,null,b)},clear:function(a){(a||(a={})).unset=!0;return this.set(h.clone(this.attributes),a)},fetch:function(a){var a=a?h.clone(a):{},b=this,c=a.success;a.success=function(d,e,f){if(!b.set(b.parse(d,
f),a))return!1;c&&c(b,d)};a.error=e.wrapError(a.error,b,a);return(this.sync||e.sync).call(this,"read",this,a)},save:function(a,b,c){var d;h.isObject(a)||null==a?(d=a,c=b):(d={},d[a]=b);c=c?h.clone(c):{};if(d&&!this[c.wait?"_performValidation":"set"](d,c))return!1;var f=this,i=c.success;c.success=function(a,b,e){b=f.parse(a,e);c.wait&&(b=h.extend(d||{},b));if(!f.set(b,c))return!1;i?i(f,a):f.trigger("sync",f,a,c)};c.error=e.wrapError(c.error,f,c);a=this.isNew()?"create":"update";return(this.sync||e.sync).call(this,
a,this,c)},destroy:function(a){var a=a?h.clone(a):{},b=this,c=a.success,d=function(){b.trigger("destroy",b,b.collection,a)};if(this.isNew())return d();a.success=function(e){a.wait&&d();c?c(b,e):b.trigger("sync",b,e,a)};a.error=e.wrapError(a.error,b,a);var f=(this.sync||e.sync).call(this,"delete",this,a);a.wait||d();return f},url:function(){var a=N(this.collection,"url")||N(this,"urlRoot")||Q();return this.isNew()?a:a+("/"==a.charAt(a.length-1)?"":"/")+encodeURIComponent(this.id)},parse:function(a){return a},
clone:function(){return new this.constructor(this.attributes)},isNew:function(){return null==this.id},change:function(a){for(var b in this._changed)this.trigger("change:"+b,this,this._changed[b],a);this.trigger("change",this,a);this._previousAttributes=h.clone(this.attributes);this._changed={}},hasChanged:function(a){return a?h.has(this._changed,a):!h.isEmpty(this._changed)},changedAttributes:function(a){if(!a)return this.hasChanged()?h.clone(this._changed):!1;var b,c=!1,d=this._previousAttributes,
e;for(e in a)if(!h.isEqual(d[e],b=a[e]))(c||(c={}))[e]=b;return c},previous:function(a){return!a||!this._previousAttributes?null:this._previousAttributes[a]},previousAttributes:function(){return h.clone(this._previousAttributes)},_performValidation:function(a,b){var c=this.validate(h.extend({},this.attributes,a),b);return c?(b.error?b.error(this,c,b):this.trigger("error",this,c,b),!1):!0}});e.Collection=function(a,b){b||(b={});b.comparator&&(this.comparator=b.comparator);this._reset();this.initialize.apply(this,
arguments);a&&this.reset(a,{silent:!0,parse:b.parse})};h.extend(e.Collection.prototype,e.Events,{model:e.Model,initialize:function(){},toJSON:function(){return this.map(function(a){return a.toJSON()})},add:function(a,b){var c,e,f,i,k,n={},m={};b||(b={});a=h.isArray(a)?a.slice():[a];for(c=0,e=a.length;c<e;c++){if(!(f=a[c]=this._prepareModel(a[c],b)))throw Error("Can't add an invalid model to a collection");if(n[i=f.cid]||this._byCid[i]||null!=(k=f.id)&&(m[k]||this._byId[k]))throw Error("Can't add the same model to a collection twice");
n[i]=m[k]=f}for(c=0;c<e;c++)(f=a[c]).on("all",this._onModelEvent,this),this._byCid[f.cid]=f,null!=f.id&&(this._byId[f.id]=f);this.length+=e;d.apply(this.models,[null!=b.at?b.at:this.models.length,0].concat(a));this.comparator&&this.sort({silent:!0});if(b.silent)return this;for(c=0,e=this.models.length;c<e;c++)if(n[(f=this.models[c]).cid])b.index=c,f.trigger("add",f,this,b);return this},remove:function(a,b){var c,d,e,f;b||(b={});a=h.isArray(a)?a.slice():[a];for(c=0,d=a.length;c<d;c++)if(f=this.getByCid(a[c])||
this.get(a[c]))delete this._byId[f.id],delete this._byCid[f.cid],e=this.indexOf(f),this.models.splice(e,1),this.length--,b.silent||(b.index=e,f.trigger("remove",f,this,b)),this._removeReference(f);return this},get:function(a){return null==a?null:this._byId[null!=a.id?a.id:a]},getByCid:function(a){return a&&this._byCid[a.cid||a]},at:function(a){return this.models[a]},sort:function(a){a||(a={});if(!this.comparator)throw Error("Cannot sort a set without a comparator");var b=h.bind(this.comparator,this);
1==this.comparator.length?this.models=this.sortBy(b):this.models.sort(b);a.silent||this.trigger("reset",this,a);return this},pluck:function(a){return h.map(this.models,function(b){return b.get(a)})},reset:function(a,b){a||(a=[]);b||(b={});for(var c=0,d=this.models.length;c<d;c++)this._removeReference(this.models[c]);this._reset();this.add(a,{silent:!0,parse:b.parse});b.silent||this.trigger("reset",this,b);return this},fetch:function(a){a=a?h.clone(a):{};void 0===a.parse&&(a.parse=!0);var b=this,c=
a.success;a.success=function(d,e,f){b[a.add?"add":"reset"](b.parse(d,f),a);c&&c(b,d)};a.error=e.wrapError(a.error,b,a);return(this.sync||e.sync).call(this,"read",this,a)},create:function(a,b){var c=this,b=b?h.clone(b):{},a=this._prepareModel(a,b);if(!a)return!1;b.wait||c.add(a,b);var d=b.success;b.success=function(e,f){b.wait&&c.add(e,b);d?d(e,f):e.trigger("sync",a,f,b)};a.save(null,b);return a},parse:function(a){return a},chain:function(){return h(this.models).chain()},_reset:function(){this.length=
0;this.models=[];this._byId={};this._byCid={}},_prepareModel:function(a,b){a instanceof e.Model?a.collection||(a.collection=this):(b.collection=this,a=new this.model(a,b),a.validate&&!a._performValidation(a.attributes,b)&&(a=!1));return a},_removeReference:function(a){this==a.collection&&delete a.collection;a.off("all",this._onModelEvent,this)},_onModelEvent:function(a,b,c,d){("add"==a||"remove"==a)&&c!=this||("destroy"==a&&this.remove(b,d),b&&a==="change:"+b.idAttribute&&(delete this._byId[b.previous(b.idAttribute)],
this._byId[b.id]=b),this.trigger.apply(this,arguments))}});h.each("forEach,each,map,reduce,reduceRight,find,detect,filter,select,reject,every,all,some,any,include,contains,invoke,max,min,sortBy,sortedIndex,toArray,size,first,initial,rest,last,without,indexOf,shuffle,lastIndexOf,isEmpty,groupBy".split(","),function(a){e.Collection.prototype[a]=function(){return h[a].apply(h,[this.models].concat(h.toArray(arguments)))}});e.Router=function(a){a||(a={});a.routes&&(this.routes=a.routes);this._bindRoutes();
this.initialize.apply(this,arguments)};var i=/:\w+/g,k=/\*\w+/g,m=/[-[\]{}()+?.,\\^$|#\s]/g;h.extend(e.Router.prototype,e.Events,{initialize:function(){},route:function(a,b,c){e.history||(e.history=new e.History);h.isRegExp(a)||(a=this._routeToRegExp(a));c||(c=this[b]);e.history.route(a,h.bind(function(d){d=this._extractParameters(a,d);c&&c.apply(this,d);this.trigger.apply(this,["route:"+b].concat(d));e.history.trigger("route",this,b,d)},this));return this},navigate:function(a,b){e.history.navigate(a,
b)},_bindRoutes:function(){if(this.routes){var a=[],b;for(b in this.routes)a.unshift([b,this.routes[b]]);b=0;for(var c=a.length;b<c;b++)this.route(a[b][0],a[b][1],this[a[b][1]])}},_routeToRegExp:function(a){a=a.replace(m,"\\$&").replace(i,"([^/]+)").replace(k,"(.*?)");return RegExp("^"+a+"$")},_extractParameters:function(a,b){return a.exec(b).slice(1)}});e.History=function(){this.handlers=[];h.bindAll(this,"checkUrl")};var o=/^[#\/]/,s=/msie [\w.]+/,r=!1;h.extend(e.History.prototype,e.Events,{interval:50,
getFragment:function(a,b){if(null==a)if(this._hasPushState||b){var a=w.location.pathname,c=w.location.search;c&&(a+=c)}else a=w.location.hash;a=decodeURIComponent(a.replace(o,""));a.indexOf(this.options.root)||(a=a.substr(this.options.root.length));return a},start:function(a){if(r)throw Error("Backbone.history has already been started");this.options=h.extend({},{root:"/"},this.options,a);this._wantsHashChange=!1!==this.options.hashChange;this._wantsPushState=!!this.options.pushState;this._hasPushState=
!(!this.options.pushState||!w.history||!w.history.pushState);var a=this.getFragment(),b=document.documentMode;if(b=s.exec(navigator.userAgent.toLowerCase())&&(!b||7>=b))this.iframe=f('<iframe src="javascript:0" tabindex="-1" />').hide().appendTo("body")[0].contentWindow,this.navigate(a);this._hasPushState?f(w).bind("popstate",this.checkUrl):this._wantsHashChange&&"onhashchange"in w&&!b?f(w).bind("hashchange",this.checkUrl):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval));
this.fragment=a;r=!0;a=w.location;b=a.pathname==this.options.root;if(this._wantsHashChange&&this._wantsPushState&&!this._hasPushState&&!b)return this.fragment=this.getFragment(null,!0),w.location.replace(this.options.root+"#"+this.fragment),!0;this._wantsPushState&&this._hasPushState&&b&&a.hash&&(this.fragment=a.hash.replace(o,""),w.history.replaceState({},document.title,a.protocol+"//"+a.host+this.options.root+this.fragment));if(!this.options.silent)return this.loadUrl()},stop:function(){f(w).unbind("popstate",
this.checkUrl).unbind("hashchange",this.checkUrl);clearInterval(this._checkUrlInterval);r=!1},route:function(a,b){this.handlers.unshift({route:a,callback:b})},checkUrl:function(){var a=this.getFragment();a==this.fragment&&this.iframe&&(a=this.getFragment(this.iframe.location.hash));if(a==this.fragment||a==decodeURIComponent(this.fragment))return!1;this.iframe&&this.navigate(a);this.loadUrl()||this.loadUrl(w.location.hash)},loadUrl:function(a){var b=this.fragment=this.getFragment(a);return h.any(this.handlers,
function(a){if(a.route.test(b))return a.callback(b),!0})},navigate:function(a,b){if(!r)return!1;if(!b||!0===b)b={trigger:b};var c=(a||"").replace(o,"");this.fragment==c||this.fragment==decodeURIComponent(c)||(this._hasPushState?(0!=c.indexOf(this.options.root)&&(c=this.options.root+c),this.fragment=c,w.history[b.replace?"replaceState":"pushState"]({},document.title,c)):this._wantsHashChange?(this.fragment=c,this._updateHash(w.location,c,b.replace),this.iframe&&c!=this.getFragment(this.iframe.location.hash)&&
(b.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,c,b.replace))):w.location.assign(this.options.root+a),b.trigger&&this.loadUrl(a))},_updateHash:function(a,b,c){c?a.replace(a.toString().replace(/(javascript:|#).*$/,"")+"#"+b):a.hash=b}});e.View=function(a){this.cid=h.uniqueId("view");this._configure(a||{});this._ensureElement();this.initialize.apply(this,arguments);this.delegateEvents()};var y=/^(\S+)\s*(.*)$/,u="model,collection,el,id,attributes,className,tagName".split(",");
h.extend(e.View.prototype,e.Events,{tagName:"div",$:function(a){return this.$el.find(a)},initialize:function(){},render:function(){return this},remove:function(){this.$el.remove();return this},make:function(a,b,c){a=document.createElement(a);b&&f(a).attr(b);c&&f(a).html(c);return a},setElement:function(a,b){this.$el=f(a);this.el=this.$el[0];!1!==b&&this.delegateEvents()},delegateEvents:function(a){if(a||(a=N(this,"events"))){this.undelegateEvents();for(var b in a){var c=a[b];h.isFunction(c)||(c=this[a[b]]);
if(!c)throw Error('Event "'+a[b]+'" does not exist');var d=b.match(y),e=d[1],d=d[2],c=h.bind(c,this),e=e+(".delegateEvents"+this.cid);""===d?this.$el.bind(e,c):this.$el.delegate(d,e,c)}}},undelegateEvents:function(){this.$el.unbind(".delegateEvents"+this.cid)},_configure:function(a){this.options&&(a=h.extend({},this.options,a));for(var b=0,c=u.length;b<c;b++){var d=u[b];a[d]&&(this[d]=a[d])}this.options=a},_ensureElement:function(){if(this.el)this.setElement(this.el,!1);else{var a=N(this,"attributes")||
{};this.id&&(a.id=this.id);this.className&&(a["class"]=this.className);this.setElement(this.make(this.tagName,a),!1)}}});e.Model.extend=e.Collection.extend=e.Router.extend=e.View.extend=function(a,b){var c=A(this,a,b);c.extend=this.extend;return c};var L={create:"POST",update:"PUT","delete":"DELETE",read:"GET"};e.sync=function(a,b,c){var d=L[a],i={type:d,dataType:"json"};c.url||(i.url=N(b,"url")||Q());if(!c.data&&b&&("create"==a||"update"==a))i.contentType="application/json",i.data=M.stringify(b.toJSON());
e.emulateJSON&&(i.contentType="application/x-www-form-urlencoded",i.data=i.data?{model:i.data}:{});if(e.emulateHTTP&&("PUT"===d||"DELETE"===d))e.emulateJSON&&(i.data._method=d),i.type="POST",i.beforeSend=function(a){a.setRequestHeader("X-HTTP-Method-Override",d)};"GET"!==i.type&&!e.emulateJSON&&(i.processData=!1);return f.ajax(h.extend(i,c))};e.wrapError=function(a,b,c){return function(d,e){e=d===b?e:d;a?a(d,e,c):b.trigger("error",d,e,c)}};var P=function(){},A=function(a,b,c){var d;d=b&&b.hasOwnProperty("constructor")?
b.constructor:function(){a.apply(this,arguments)};h.extend(d,a);P.prototype=a.prototype;d.prototype=new P;b&&h.extend(d.prototype,b);c&&h.extend(d,c);d.prototype.constructor=d;d.__super__=a.prototype;return d},N=function(a,b){return!a||!a[b]?null:h.isFunction(a[b])?a[b]():a[b]},Q=function(){throw Error('A "url" property or function must be specified');}}).call(this);var o=w._.noConflict(),L=w.Backbone.noConflict(),Ea=/^(\S+)\s*(.*)$/,Fa=L.View.extend({delegateViewEvents:function(a){if(a||(a=this.viewEvents)){o.isFunction(a)&&
(a=a.call(this));this.undelegateViewEvents();for(var b in a){var c=this[a[b]];if(!c)throw Error('Event "'+a[b]+'" does not exist');var d=b.match(Ea),e=d[1],d=d[2];""===d?this.bind(e,c,this):this[d].bind(e,c,this)}}},undelegateViewEvents:function(a){this.unbind(a)}}),k=k||{};k.LEARNING_HOST="a.klaviyo.com";k.LEARNING_DOMAIN="http://www.klaviyo.com";k.JS_VERSION=14;k.DEBUG=!1;k=k||{};k.debug=!1;k.log=function(){var a=new k.Cookie,b=-1<document.location.hash.indexOf("#ldbg");if(k.DEBUG||b||"1"===a.get("learnly_dbg"))(b=
w.console)&&"function"===typeof b.log&&b.log.apply(b,arguments),a.set("learnly_dbg","1")};k=k||{};k.global={};k.global.Context=function(a,b,c,d,e,h,f){this.doc=a||document;this.nav=b||navigator;this.scr=c||screen;this.win=d||w;this.loc=e||this.doc.location;this.top=h||top;this.parent=f||parent};k.global.Context.prototype.getDocument=function(){return this.doc};k.global.Context.prototype.getNavigator=function(){return this.nav};k.global.Context.prototype.getScreen=function(){return this.scr};k.global.Context.prototype.getWindow=
function(){return this.win};k.global.Context.prototype.getLocation=function(){return this.loc};k.global.Context.prototype.getProtocol=function(){return"https:"==this.loc.protocol?"https://":"http://"};k.global.Context.prototype.getHostName=function(){return this.loc.hostname};k.global.Context.prototype.getTop=function(){return this.top};k.global.Context.prototype.getParent=function(){return this.parent};k.global.Context.prototype.getReferrer=function(){var a="";try{a=this.top.document.referrer}catch(b){if(parent)try{a=
this.parent.document.referrer}catch(c){a=""}}""===a&&(a=this.doc.referrer);return a};k.global.Context.prototype.getCharacterSet=function(){return this.doc.characterSet?this.doc.characterSet:this.doc.charset?this.doc.charset:""};k.global.Context.prototype.getLanguage=function(){return this.nav.language?this.nav.language:this.nav.browserLanguage?this.nav.browserLanguage:""};k.global.Browser=function(a){var b=(a||new k.global.Context).getNavigator(),a=b.userAgent.toLowerCase(),c={init:function(){this.browser=
this.searchString(this.dataBrowser)||"";this.version=this.searchVersion(b.userAgent)||this.searchVersion(b.appVersion)||"";this.OS=this.searchString(this.dataOS)||""},searchString:function(a){for(var b=0;b<a.length;b++){var c=a[b].string,f=a[b].prop;this.versionSearchString=a[b].versionSearch||a[b].identity;if(c){if(-1!=c.indexOf(a[b].subString))return a[b].identity}else if(f)return a[b].identity}},searchVersion:function(a){var b=a.indexOf(this.versionSearchString);return-1==b?void 0:parseFloat(a.substring(b+
this.versionSearchString.length+1))},dataBrowser:[{string:b.userAgent,subString:"Chrome",identity:"Chrome"},{string:b.userAgent,subString:"OmniWeb",versionSearch:"OmniWeb/",identity:"OmniWeb"},{string:b.vendor,subString:"Apple",identity:"Safari",versionSearch:"Version"},{prop:w.opera,identity:"Opera"},{string:b.vendor,subString:"iCab",identity:"iCab"},{string:b.vendor,subString:"KDE",identity:"Konqueror"},{string:b.userAgent,subString:"Firefox",identity:"Firefox"},{string:b.vendor,subString:"Camino",
identity:"Camino"},{string:b.userAgent,subString:"Netscape",identity:"Netscape"},{string:b.userAgent,subString:"MSIE",identity:"Internet Explorer",versionSearch:"MSIE"},{string:b.userAgent,subString:"Gecko",identity:"Mozilla",versionSearch:"rv"},{string:b.userAgent,subString:"Mozilla",identity:"Netscape",versionSearch:"Mozilla"}],dataOS:[{string:b.platform,subString:"Win",identity:"Windows"},{string:b.platform,subString:"Mac",identity:"Mac"},{string:b.userAgent,subString:"iPhone",identity:"iPhone/iPod"},
{string:b.platform,subString:"Linux",identity:"Linux"}]};c.init();this.version=(a.match(/.+(?:rv|it|ra|ie)[\/: ]([\d.]+)/)||[0,"0"])[1];this.os=c.OS;this.browser=c.browser};k=k||{};k.utils={ID_COUNTER:0};k.utils.generateId=function(){return k.utils.ID_COUNTER++};k.utils.url=function(a){return(k.DEBUG?"http://":(new k.global.Context).getProtocol())+k.LEARNING_HOST+"/"+a};k.utils.resourceUrl=function(a){return(k.DEBUG?"http://":(new k.global.Context).getProtocol())+k.LEARNING_HOST+"/media/"+a};k.utils.formatCssAttributes=
function(a){return a};k.utils.encodeParam=function(a,b){var c=encodeURIComponent;return c instanceof Function?b?encodeURI(a):c(a):escape(a)};k.utils.decodeParam=function(a,b){var c=decodeURIComponent,d,a=a.split("+").join(" ");if(c instanceof Function)try{d=b?decodeURI(a):c(a)}catch(e){d=unescape(a)}else d=unescape(a);return d};k.utils.canSimulateClick=function(){var a;return document.createEvent&&(a=document.createEvent("MouseEvents"))&&a.initMouseEvent&&document.documentElement.dispatchEvent};k.utils.simulateClick=
function(a){if(!a||!k.utils.canSimulateClick())return!1;var b=document.createEvent("MouseEvents");b.initMouseEvent("click",!0,!0,w,0,0,0,0,0,!1,!1,!1,!1,0,null);a.dispatchEvent(b);return!0};var ja={};k.utils.renderTemplate=function(a,b){ja[a]||(ja[a]=m.compile(k.templates[a]));return ja[a](b)};k.utils.addEventListener=function(a,b,c,d){if(a.addEventListener)return a.addEventListener(b,c,d),!0;if(a.attachEvent)return a.attachEvent("on"+b,c);a["on"+b]=c};k.utils.hashDomain=function(a){for(var b=0,c=
a.length-1;0<=c;c--)var d=a.charCodeAt(c),b=(b<<6&268435455)+d+(d<<14),d=b&266338304,b=0!=d?b^d>>21:b;return b};k.utils.extractDomain=function(a){a=a.split(".");2<a.length&&(a=a.slice(1));return"."+a.join(".")};k.utils.utcnow=function(){var a=new Date,b=a.getTime(),a=6E4*a.getTimezoneOffset();return Math.round((b+a)/1E3)};k.utils.poll=function(a,b,c,d){var d=d||0,e=d===c-1;!1===a(e)&&!e&&o.delay(function(){k.utils.poll(a,b,c,d+1)},b)};k.utils.sanitizeSimpleRegExp=function(a){return a.toString().replace(/([\.\?\+\(\)\[\]\{\}])/g,
"\\$1").replace(/\*/g,".*")};k.utils.convertToRegExp=function(a,b){return RegExp("^"+k.utils.sanitizeSimpleRegExp(a)+"$",b||"")};k.utils.slugify=function(a){return a.toLowerCase().replace(/[^\w\s-]/g,"").replace(/[-\s]+/,"-")};k.utils.base64Encode=function(a){var b,c,d,e,h=0,f=0,i=[];if(!a)return a;a=k.utils.utf8Encode(a+"");do b=a.charCodeAt(h++),c=a.charCodeAt(h++),d=a.charCodeAt(h++),e=b<<16|c<<8|d,b=e>>18&63,c=e>>12&63,d=e>>6&63,e&=63,i[f++]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(b)+
"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(c)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(d)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(e);while(h<a.length);i=i.join("");switch(a.length%3){case 1:i=i.slice(0,-2)+"==";break;case 2:i=i.slice(0,-1)+"="}return i};k.utils.utf8Encode=function(a){var a=(a+"").replace(/\r\n/g,"\n").replace(/\r/g,"\n"),b="",c,d,e=0,h;c=d=0;e=a.length;for(h=0;h<e;h++){var f=a.charCodeAt(h),
i=null;128>f?d++:i=127<f&&2048>f?String.fromCharCode(f>>6|192)+String.fromCharCode(f&63|128):String.fromCharCode(f>>12|224)+String.fromCharCode(f>>6&63|128)+String.fromCharCode(f&63|128);null!==i&&(d>c&&(b+=a.substring(c,d)),b+=i,c=d=h+1)}d>c&&(b+=a.substring(c,a.length));return b};k.utils.logError=function(a,b){var b=b||{},c={ts:k.utils.utcnow(),m:a.message||a.toString?a.toString():"-",v:k.JS_VERSION};o.extend(c,b);a.name&&(c.n=a.name);a.fileName&&(c.f=a.fileName);a.lineNumber&&(c.l=a.lineNumber);
try{c.x=a.stack||a.stacktrace||""}catch(d){}k.log("Encountered a JS error");k.log(c)};k=k||{};k.TINYMCE_CONFIG={script_url:k.utils.resourceUrl("js/lib/tinymce.3.4.8/tiny_mce.js"),theme:"advanced",skin:"wp_theme",width:"100%",plugins:"inlinepopups,tabfocus,paste,media,wordpress",theme_advanced_buttons1:"bold,italic,strikethrough,|,bullist,numlist,blockquote,|,justifyleft,justifycenter,justifyright,|,link,unlink,|,wp_adv",theme_advanced_buttons2:"formatselect,underline,justifyfull,forecolor,|,pastetext,pasteword,removeformat,|,charmap,|,outdent,indent,|,undo,redo",
theme_advanced_buttons3:"",theme_advanced_buttons4:"",language:"en",theme_advanced_toolbar_location:"top",theme_advanced_toolbar_align:"left",theme_advanced_statusbar_location:"bottom",theme_advanced_resizing:!0,theme_advanced_resize_horizontal:!1,dialog_type:"modal",formats:{alignleft:[{selector:"p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li",styles:{textAlign:"left"}},{selector:"img,table",classes:"alignleft"}],aligncenter:[{selector:"p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li",styles:{textAlign:"center"}},
{selector:"img,table",classes:"aligncenter"}],alignright:[{selector:"p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li",styles:{textAlign:"right"}},{selector:"img,table",classes:"alignright"}],strikethrough:{inline:"del"}},relative_urls:!1,remove_script_host:!1,convert_urls:!1,apply_source_formatting:!1,remove_linebreaks:!0,gecko_spellcheck:!0,keep_styles:!1,accessibility_focus:!0,media_strict:!1,paste_remove_styles:!0,paste_remove_spans:!0,paste_strip_class_attributes:"all",paste_text_use_dialog:!0,extended_valid_elements:"article[*],aside[*],audio[*],canvas[*],command[*],datalist[*],details[*],embed[*],figcaption[*],figure[*],footer[*],header[*],hgroup[*],keygen[*],mark[*],meter[*],nav[*],output[*],progress[*],section[*],source[*],summary,time[*],video[*],wbr",
content_css:[k.utils.resourceUrl("css/player/bootstrap/bootstrap.css"),k.utils.resourceUrl("css/player/tiny-mce-overrides.css")].join(),body_class:"learnly-scoped"};k=k||{};k.Cookie=function(a){this.context=a||new k.global.Context;this.cookies=[]};k.Cookie.prototype.set=function(a,b,c){var c=c||{},d;c.minsToExpire?(d=new Date,d.setTime(d.getTime()+6E4*c.minsToExpire)):c.daysToExpire&&(d=new Date,d.setTime(d.getTime()+864E5*c.daysToExpire));this._set(a,c.alreadyEncoded?b:k.utils.encodeParam(b,!0),
(!o.isUndefined(d)?";expires="+d.toGMTString():"")+";path="+(c.path?c.path:"/")+(c.domain?";domain="+c.domain:"")+(c.secure?";secure":""))};k.Cookie.prototype._set=function(a,b,c){this.context.getDocument().cookie=a+"="+b+c;this.cookies.push({name:a,value:b,extras:c})};k.Cookie.prototype.get=function(a){return(a=RegExp("(^|;)[ ]*"+a+"=([^;]*)").exec(this.context.getDocument().cookie))?k.utils.decodeParam(a[2],!0):""};k.Cookie.prototype.del=function(a,b){b=b||{};b.daysToExpire=-1;this.get(a)&&this.set(a,
"",b)};k.Cookie.prototype.has=function(){return!o.isUndefined(this.context.getNavigator().cookieEnabled)?(this.set("__l_testcookie","1"),"1"==this.get("__l_testcookie")?"1":"0"):this.context.getNavigator().cookieEnabled?"1":"0"};var pa=k.utils.resourceUrl("html/xd_frame.html");k.communication={};k.communication.AJAXCommunicator=function(){};k.communication.AJAXCommunicator.prototype.request=function(a){return y.ajax(a)};k.communication.XDFrameCommunicator=function(a,b,c){var d=this,c=y("<iframe />").attr({id:a,
src:b+"?origin="+encodeURIComponent(location.protocol+"//"+location.host)}).css({height:0,width:0,position:"absolute",left:"-9999em"}).appendTo(c);this.iframeId=a;this.src=b;this.iframe=c.get(0);this.requests={};this.loaded=!1;this.onLoadFns=[];y.receiveMessage(function(a){"GO"===a.data?(d.loaded=!0,o.each(d.onLoadFns,function(a){a()})):(a=M.parse(a.data),d.requests[a.params.tId]&&(d.requests[a.params.tId](a),delete d.requests[a.params.tId]))},(k.DEBUG?"http:":location.protocol)+"//"+k.LEARNING_HOST)};
k.communication.XDFrameCommunicator.prototype.onLoad=function(a){this.loaded?a():this.onLoadFns.push(a)};k.communication.XDFrameCommunicator.prototype.request=function(a){var b=this,c=o.extend({tId:k.utils.generateId()},a),d=y.Deferred();a.success&&(d.done(a.success),delete a.success);a.error&&(d.fail(a.error),delete a.error);a.complete&&(d.always(a.complete),delete a.complete);this.requests[c.tId]=function(a){k.log("XD response",c.tId,a);d[a.response.success?"resolve":"reject"](a.response,a.textStatus,
a.params)};this.onLoad(function(){y.postMessage(M.stringify(c),b.src,b.iframe.contentWindow)});return d};k.communication.getXDCommunicator=function(a){return new k.communication.XDFrameCommunicator("__learnly_xd_iframe",pa,a)};k.communication.JsonPCommunicator=function(){};k.communication.JsonPCommunicator.prototype.request=function(a){return y.ajax(o.extend({},a,{type:"GET",dataType:"jsonp",url:a.url.replace("api/","api/jsonp/")}))};k.communication.getCommunicator=function(a){var b=new k.global.Context;
return y.support.cors&&"http:"===b.getLocation().protocol?new k.communication.AJAXCommunicator:w.postMessage&&!y.browser.opera?new k.communication.XDFrameCommunicator("__learnly_xd_iframe",pa,a):new k.communication.JsonPCommunicator};k.school={};var P=k.utils.renderTemplate;k.templates={"modal-base.html":'<div class="modal"><div class="modal-header"><a class="close" data-dismiss="modal">&times;</a><h3 /></div><div class="modal-body" /><div class="modal-footer"><div class="pull-right" /></div></div><div class="modal-backdrop" />',
"contextual-step.html":'<div class="contextual-dialog {{#if isEditable}}is-editable{{else}}is-viewing{{/if}}"><div class="dialog-content"><div class="dialog-header"><a href="#" class="close workflow-quit">&times;</a><h3></h3>{{#if isEditable}}<div class="editing-tools"><a href="#" class="btn btn-small workflow-step-edit">Edit</a> <a href="#" class="btn btn-small btn-danger workflow-step-delete">Delete</a></div>{{/if}}</div><div class="dialog-body"></div><div class="dialog-footer"><div class="pull-left"><a href="#" class="workflow-learn-more-show hide">Learn more</a></div><div class="pull-right"></div></div></div><i class="contextual-dialog-arrow"></i></div>',
"modal-step.html":'<div class="modal"><div class="modal-header"><a class="close workflow-quit" data-dismiss="modal">&times;</a><h3 /></div><div class="modal-body" /><div class="modal-footer">{{#if isEditable}}<div class="pull-left"><a href="#" class="btn btn-secondary workflow-step-edit">Edit</a> <a href="#" class="btn btn-secondary workflow-step-delete">Delete</a></div>{{/if}}<div class="pull-right"></div></div></div><div class="modal-backdrop" />',"fixed-step.html":'<div class="fixed-dialog"><div class="dialog-content"><div class="dialog-header"><a href="#" class="close workflow-quit" data-dismiss="modal">&times;</a><h3></h3></div><div class="dialog-body"></div><div class="dialog-footer">{{#if isEditable}}<div class="pull-left"><a href="#" class="btn btn-secondary workflow-step-edit">Edit</a> <a href="#" class="btn btn-secondary workflow-step-delete">Delete</a></div>{{/if}}<div class="pull-right"></div></div></div></div>',
"modal-learn-more.html":'<div class="modal"><div class="modal-header"><a class="close workflow-learn-more-hide" data-dismiss="modal">&times;</a><h3 /></div><div class="modal-body" /><div class="modal-footer"><div class="pull-right"></div></div></div><div class="modal-backdrop" />',"workflow-description-body.html":'{{#if timeEstimate}}<div class="time-estimate">{{timeEstimate}} minutes</div>{{/if}}<div class="content-container">{{{content}}}</div>',"return-to-klaviyo-body.html":"<p>Now that you're done editing this learnlet, we can take you back to Klaviyo to share it or work on a new one. Or you can stay here, your choice. What would you like to do?</p>",
"content-editor-body.html":'<form><div class="control-group"><div class="controls"><input type="text" name="name" placeholder="{{placeholder}}" /></div></div><div class="control-group"><div class="controls"><div class="tinymce-editor-toolbar"><a class="button-html">HTML</a><a class="active button-preview">Visual</a></div><div class="tinymce-editor-container"><textarea name="content"></textarea></div></div></div></form>',"step-editor-body.html":'<form class="step-editor"><div class="step-editor-nav dialog-nav"><a href="#" class="active" data-tab="content">Content</a> | <a href="#" data-tab="learn-more">More info</a> | <a href="#" data-tab="advanced">Advanced</a></div><div class="step-editor-tabs"><div class="step-editor-tab" data-tab="content"><div class="control-group name"><div class="controls"><input type="text" name="name" placeholder="Enter a step title" /></div></div><div class="control-group"><div class="controls"><div class="tinymce-editor-toolbar"><a class="button-html">HTML</a><a class="active button-preview">Visual</a></div><div class="tinymce-editor-container"><textarea name="content"></textarea></div></div></div><div class="control-group arrow-position"><label>Change dialog position?</label><div class="controls"><select name="displayPosition"><option value="above">Dialog above</option><option value="right">Dialog to the right</option><option value="below">Dialog below</option><option value="left">Dialog to the left</option></select></div></div><div class="control-group next-step-trigger"><label>When should we advance to the next step?</label><div class="controls"><input type="hidden" name="nextTrigger" value=""><div class="btn-toolbar"><div class="btn-group">{{#each triggerTypes}}<button title="{{description}}" class="btn btn-trigger-type {{typeClass}}" data-trigger="{{type}}"></button>{{/each}}</div></div></div></div></div><div class="step-editor-tab step-editor-tab-learn-more hide" data-tab="learn-more"><div class="control-group name"><div class="controls"><input type="text" name="learnMoreHeader" placeholder="Enter a title" /></div></div><div class="control-group"><div class="controls"><div class="tinymce-editor-toolbar"><a class="button-html">HTML</a><a class="active button-preview">Visual</a></div><div class="tinymce-editor-container"><textarea name="learnMore"></textarea></div></div></div></div><div class="step-editor-tab step-editor-tab-advanced hide" data-tab="advanced"><div class="control-group allowed-locations"><label class="checkbox"><input type="checkbox" name="useAllowedLocations" value="true"> Allow a pattern of URLs for this step</label><div class="controls allowed-locations-value"><input type="text" name="allowedLocations" placeholder="e.g. http://www.example.com/*" /><p class="help-block">You can use wildcards <code>*</code> to allow different patterns.</p></div></div><div class="control-group display-anchor"><label>Selector to identify element</label><div class="controls"><input type="text" name="displayAnchor" /><p class="help-block">You can use a jQuery selector here.</p></div></div></div></div></form>',
"workflow-map-body.html":'<div class="workflow-map-nav dialog-nav"><a href="#" class="active go-workflow-map">Map</a> | <a href="#" class="go-workflow-advanced">Advanced</a></div><div class="steps-container"><ul>{{#each steps}}<li class="step-item {{displayType}}-step {{#if isCurrent}}current{{/if}}" data-step="{{cid}}"><h3 class="step-name">{{name}}</h3><div class="step-actions"><a href="#" class="step-edit">Edit content</a> | <a href="#" class="step-delete">Delete</a></div></li>{{/each}}</ul></div>',
"workflow-advanced-body.html":'<div class="workflow-map-nav dialog-nav"><a href="#" class="go-workflow-map">Map</a> | <a href="#" class="active go-workflow-advanced">Advanced</a></div><div class="workflow-advanced-settings"><form><div class="control-group"><div class="controls"><label class="checkbox"><input type="checkbox" name="isShowingGoBack" value="true">Show a "Go Back" message if someone clicks to a different page.</label></div></div></form></div>',"recorder-toolbar.html":'<div class="recorder-toolbar"><span class="drag-handle"></span><div class="btn-toolbar"><div class="btn-group"><button class="btn workflow-map-show">Map</button></div><div class="btn-group"><button class="btn workflow-select-step-anchor" title="A step that is anchored to a part of the page">Add callout</button><button class="btn workflow-create-modal-step" title="A step that grays out the rest of the screen">Add grayout</button></div><div class="btn-group"><button class="btn btn-danger workflow-recording-finish">Done</button></div></div><div class="recorder-message-box hide"></div></div>'};
var Ga=[{type:0,label:'Click "Next"',description:'Advance when a "Next" button is clicked',typeClass:"next-button"},{type:2,label:"Page change",description:"Advance when the page changes",typeClass:"page-transition"},{type:1,label:"Click element",description:"Advance when the selected element is clicked",typeClass:"click-element"},{type:3,label:"Hover element",description:"Advance when the selected element is hovered",typeClass:"hover-element"},{type:4,label:"Type in box",description:"Advance when someone types in text box",
typeClass:"input-value-change"}];k.school.Step=L.Model.extend({defaults:{name:"",location:{},nextTrigger:0,content:{example:""},display:{medium:"console"}},isCorrectLocation:function(){var a=this.get("location");(new k.global.Context).getLocation();if(!a||!a.href&&(!a.allowed||!a.allowed.href))return!0;if(!this.isCorrectUrl())return!1;k.log("isCorrectLocation:",a.selector);if(a.selector&&!y(a.selector).length)return!1;k.log("isCorrectLocation:",this.isContextual(),this.isContextual()&&this.get("display").anchor);
return this.isContextual()&&!y(this.get("display").anchor).is(":visible-in-document")?!1:!0},isCorrectUrl:function(){var a=this.get("location"),b=(new k.global.Context).getLocation();return this._checkIfUrlMatches(b.href,a.href)||(a.allowed||{}).href&&this._checkIfUrlMatches(b.href,a.allowed.href)},isStable:function(){return!0},isContextual:function(){return"contextual"===this.get("display").medium},isShowingNextButton:function(){return 0===this.get("nextTrigger")},getAnchor:function(){if(!this.isContextual())return null;
var a=this.get("display").anchor;return(a=a?y(a):null)&&a.length?a:null},getUrl:function(){var a=this.get("location").href;return/^https?:\/\//.test(a)?a:"http://"+a},getDisplayableUrl:function(a){var a=a||40,b=this.getUrl();return b.length<a-3?b:b.substring(0,a-3)+"..."},formData:function(){var a=(this.get("location").allowed||{}).href,b=this.get("content");return{name:this.get("name"),content:b.main,learnMoreHeader:b.learnMoreHeader||"",learnMore:b.learnMore||"",isContextual:this.isContextual(),
nextTrigger:this.get("nextTrigger"),displayPosition:this.get("display").position,displayAnchor:this.get("display").anchor,useAllowedLocations:!!a,allowedLocations:a}},mergeFormData:function(a){var b=this.get("content"),c=this.get("display"),d=this.get("location");b.main=a.content;b.learnMore=a.learnMore;b.learnMoreHeader=a.learnMoreHeader;this.isContextual()&&(o.extend(c,{anchor:a.displayAnchor}),c.position!==a.displayPosition&&o.extend(c,{position:a.displayPosition,arrowOffset:"above"===a.displayPosition||
"below"===a.displayPosition?qa:ra}));d.allowed={href:a.useAllowedLocations&&a.allowedLocations?a.allowedLocations:""};this.set({name:a.name,nextTrigger:parseInt(a.nextTrigger,10),content:b,display:c,location:d})},_regexForUrl:function(a){return k.utils.convertToRegExp(this._normalizeUrl(a),"i")},_normalizeUrl:function(a){var a=/^http[s\*]?:\/\//.test(a)?a:"http*://"+a,b=/^(.*\/\/)(www\.)(.*)/.exec(a);b&&(a=b[1]+"*"+b[3]);return/:\/\/[^\/]*$/.test(a)?a+"/":a},_checkIfUrlMatches:function(a,b){var c=
/#/.test(b),d=/\?/.test(b),e=c?a:a.replace(/#.*$/,""),e=d?e:e.replace(/\?.*$/,"");k.log("_checkIfUrlMatches:",c,d,e,b,this._regexForUrl(b).test(e));return this._regexForUrl(b).test(e)}});k.school.StepCollection=L.Collection.extend({model:k.school.Step});k.school.Section=L.Model.extend({defaults:{status:"not-started"},initialize:function(){var a=this.get("steps")||[];a instanceof k.school.StepCollection||this.set({steps:new k.school.StepCollection(a)})},toJSON:function(){return{name:this.get("name"),
steps:this.get("steps").toJSON()}}});k.school.SectionCollection=L.Collection.extend({model:k.school.Section});k.school.Workflow=L.Model.extend({initialize:function(){var a=this.get("definition")||{};this.set("sections",new k.school.SectionCollection(a.sections||[]));this.domains={}},isEmpty:function(){return!this.getSteps().length},getSteps:function(){return this.get("sections").at(0).get("steps")},getStep:function(a){var b;return!a||!(b=this.get("sections").at(a.section))?null:b.get("steps").at(a.step)},
getNextStep:function(a){return(a=this.nextPosition(a))?this.getStep(a):null},getPrevStep:function(a){return this.getStep(this.prevPosition(a))},nextPosition:function(a){var b=this.get("sections"),c=b.at(a.section);return!c||void 0===a.section?null:a.step<c.get("steps").length-1?{section:a.section,step:a.step+1}:a.section<b.length-1?{section:a.section+1,step:0}:null},isLastPosition:function(a){return!this.nextPosition(a)},prevPosition:function(a){if(0<a.step)return{section:a.section,step:a.step-1};
if(0<a.section){var b=this.get("sections").at(a.section-1).get("steps");return{section:a.section-1,step:b.length-1}}return null},findValidPosition:function(a){var b=this.getStep(a);if(b&&b.isCorrectLocation())return a;k.log("Current position is invalid",a);a=this.nextPosition(a);b=this.getStep(a);k.log("Next step validity",a,b&&b.isCorrectLocation());return b&&b.isCorrectLocation()?a:null},nextValidStep:function(a){for(var b=this.nextPosition(a),c=100;0<c&&!o.isEqual(a,b)&&b;){if(this.getStep(b).isStable())return b;
a=b;b=this.nextPosition(a);c--}return null},prevValidStep:function(a){for(var b=this.prevPosition(a),c=100;0<c&&!o.isEqual(a,b)&&b;){if(this.getStep(b).isStable())return b;a=b;b=this.prevPosition(a);c--}return null},createStep:function(a,b){a=new k.school.Step(a);this.get("sections").at(b.section).get("steps").add(a,{at:b.step});return a},removeStep:function(a){var b=this.get("sections").at(a.section).get("steps"),a=b.at(a.step);b.remove(a);return a},toJSON:function(){return{id:this.get("id"),name:this.get("name"),
description:this.get("description"),isShowingGoBack:this.get("isShowingGoBack"),definition:{sections:this.get("sections").toJSON()}}}});k.school.WorkflowCollection=L.Collection.extend({model:k.school.Workflow});var Ha=[5,1,2,6,8];k.school.State=L.Model.extend({defaults:{isRecording:!1,position:{mode:0},completedSections:{}},isInWorkflow:function(){return o.contains(Ha,this.get("position").mode)},isInProgress:function(){return 2===this.get("position").mode},isEditing:function(){return!!this.get("position").isEditing},
isOnFirstStep:function(){var a=this.get("position");return this.isInProgress()&&!a.section&&!a.step},equals:function(a){return a&&o.isEqual(a.get("position"),this.get("position"))&&o.isEqual(a.get("isRecording"),this.get("isRecording"))}});var Ia=/show-me=(\w{6})/,sa=/\/.*(login|register|signup)/i,Ja=/(localhost|127\.0\.0\.1)/ig,qa="49%",ra="46%";k.widgets={};k.widgets.WysiwygMixinEvents={"click .tinymce-editor-toolbar .button-html":"_onShowEditorHtmlClick","click .tinymce-editor-toolbar .button-preview":"_onShowEditorPreviewClick"};
k.widgets.WysiwygMixin={_configureWysiwyg:function(a,b){a.find(".tinymce-editor-container textarea").tinymce(o.extend(k.TINYMCE_CONFIG,{controls_container:b.attr("id"),cdn_host:k.utils.resourceUrl("")}))},_switchEditorView:function(a,b){var c=tinymce.get(a.attr("id")),b=b||"toggle";"toggle"===b&&(b=c&&!c.isHidden()?"html":"preview");if("preview"==b){if((!c||c.isHidden())&&c)c.show(),a.closest(".tinymce-editor-container").siblings(".tinymce-editor-toolbar").children().removeClass("active").filter(".button-preview").addClass("active")}else if("html"==
b&&(!c||!c.isHidden())&&c)a.css("height",c.getContentAreaContainer().offsetHeight+20+"px"),c.hide(),a.closest(".tinymce-editor-container").siblings(".tinymce-editor-toolbar").children().removeClass("active").filter(".button-html").addClass("active")},_onShowEditorHtmlClick:function(a){a.preventDefault();this._switchEditorView(y(a.currentTarget).parents(".tinymce-editor-toolbar").siblings(".tinymce-editor-container").find("textarea"),"html")},_onShowEditorPreviewClick:function(a){a.preventDefault();
this._switchEditorView(y(a.currentTarget).parents(".tinymce-editor-toolbar").siblings(".tinymce-editor-container").find("textarea"),"preview")}};var ka={"click .modal-header .close":"_onCloseClick"};k.widgets.ModalView=L.View.extend({events:ka,initialize:function(){this.model.set("visible",!1)},render:function(){this._scaffold();return this},content:function(a){this.$el.find(".modal-header h3").html(a.header).end().find(".modal-body").html(a.body).end().find(".modal-footer .pull-right").html(a.footer).end().fadeIn();
return this},show:function(){this.$el.show();this._backdrop();this.model.set("visible",!0);this.trigger("show");return this},hide:function(){this.$el.hide();this._backdrop();this.model.set("visible",!1);this.trigger("hide");return this},_scaffold:function(){this.$el.html(P("modal-base.html",{}))},_backdrop:function(){var a=this.model.get("visible");a?a&&this.$backdrop&&this.$backdrop.removeClass("in"):this.$backdrop=this.$el.find(".modal-backdrop").addClass("in")},_onCloseClick:function(a){a.preventDefault();
this.trigger("close");this.hide()}});k.widgets.MainModalView=k.widgets.ModalView.extend();k.widgets.StepModalView=k.widgets.ModalView.extend({_scaffold:function(){this.$el.html(P("modal-step.html",{isEditable:this.model.get("teacher").isEditing()}))}});k.widgets.StepLearnMoreView=k.widgets.ModalView.extend({_scaffold:function(){this.$el.html(P("modal-learn-more.html",{}))}});var ta=o.extend({},ka,k.widgets.WysiwygMixinEvents,{"click .editor-save":"_onSaveClick","click .editor-cancel":"_onCancelClick",
"submit form":"_onFormSubmit"});k.widgets.Editor=k.widgets.ModalView.extend(o.extend({},k.widgets.WysiwygMixin,{events:ta,render:function(){this._scaffold();this.$el.addClass("editor-modal");this.content({header:this._headerContent(),body:this._bodyContent(),footer:this._footerContent()});this._configureWysiwyg(this.$el,this.model.get("teacher").$el);return this},populate:function(a){k.widgets.Editor.populate(this,a);return this},clear:function(){this.$el.find(":text, textarea").each(function(){y(this).val("")});
return this},value:function(){return k.widgets.Editor.value(this)},show:function(){this.$el.show();this.trigger("show");return this},hide:function(){this.$el.hide();this.trigger("hide");return this},toggle:function(){this.$el.toggle()},_headerContent:function(){return"Editor"},_bodyContent:function(){return P("content-editor-body.html",{})},_footerContent:function(){return'<a href="#" class="editor-save btn btn-primary">Update</a><a href="#" class="editor-cancel btn btn-secondary">Cancel</a>'},_onSaveClick:function(a){a.preventDefault();
this.trigger("save",{editor:this});this.$el.hide()},_onCancelClick:function(a){a.preventDefault();this.trigger("close");this.$el.hide()},_onFormSubmit:function(a){a.preventDefault()}}));k.widgets.Editor.populate=function(a,b){var c=a.$el,d;o.each(b,function(a,b){d=c.find('[name="'+b+'"]');d.is(":checkbox")?d.filter('[value="'+a+'"]').attr("checked",!0):o.isUndefined(a)||d.val(a)})};k.widgets.Editor.value=function(a){var b={};a.$el.find(".tinymce-editor-container textarea").each(function(){a._switchEditorView(y(this),
"preview")});o.each(a.$el.find("form").serializeArray(),function(a){b[a.name]=a.value});return b};k.widgets.StepEditorMixinEvents={"click .step-editor-nav a":"_onStepEditorNavClick","click .btn-trigger-type":"_onBtnTriggerTypeClick"};k.widgets.StepEditorMixin={_stepEditorPopulate:function(a){var b=this.$el.find('input[name="nextTrigger"]').val();this.$el.find(".btn-trigger-type").removeClass("btn-primary").filter('[data-trigger="'+b+'"]').addClass("btn-primary");this.$el.find(".control-group.display-anchor, .control-group.next-step-trigger, .control-group.arrow-position").toggle(a.isContextual)},
_stepEditorBodyContent:function(){return P("step-editor-body.html",{triggerTypes:Ga})},_onStepEditorNavClick:function(a){a.preventDefault();a=y(a.target);this.$el.find(".step-editor-tabs .step-editor-tab").hide().filter('[data-tab="'+a.data("tab")+'"]').show().removeClass("hide");this.$el.find(".step-editor-nav a").removeClass("active").filter(a).addClass("active")},_onBtnTriggerTypeClick:function(a){a.preventDefault();a=y(a.target);this.$el.find('input[name="nextTrigger"]').val(a.data("trigger"));
this.$el.find(".btn-trigger-type").removeClass("btn-primary").filter(a).addClass("btn-primary")}};k.widgets.StepEditor=k.widgets.Editor.extend(o.extend({},k.widgets.StepEditorMixin,{events:o.extend({},ta,k.widgets.StepEditorMixinEvents),populate:function(a){k.widgets.Editor.populate(this,a);this._stepEditorPopulate(a);return this},_bodyContent:function(){return this._stepEditorBodyContent()}}));k.widgets.RecorderToolbarView=L.View.extend({events:{"click .workflow-select-step-anchor":"_onSelectStepAnchorClick",
"click .workflow-create-modal-step":"_onCreateModalStepClick"},initialize:function(){var a=this.model.get("teacher");this.containerEl=a.$el;this.bodyHandlers={mouseover:o.bind(this._onDocumentMouseover,this),mouseout:o.bind(this._onDocumentMouseout,this),mousedown:o.bind(this._onDocumentMousedown,this),mouseup:o.bind(this._onDocumentMouseup,this)};a.on("workflow-saving",this._onWorkflowSaving,this);a.on("workflow-saved",this._onWorkflowSaved,this)},render:function(){this.$el.html(P("recorder-toolbar.html")).draggable({handle:".drag-handle",
axis:"x",containment:"document"}).css({left:y(w).width()-315-30,position:"fixed"});return this},show:function(){this.$el.show();this.trigger("show");return this},hide:function(){this.$el.hide();this.trigger("show");return this},showMessage:function(a){this.$el.find(".recorder-message-box").html(a).slideDown()},hideMessage:function(){this.$el.find(".recorder-message-box").slideUp()},toggleSelectStepAnchor:function(a){this.$el.find(".workflow-select-step-anchor").toggleClass("btn-active btn-danger",
"on"===a);this.trigger("on"===a?"selectstepstart":"selectstepstop");this._toggleEventListeners(a)},_toggleEventListeners:function(a){y("body")["on"===a?"on":"off"](this.bodyHandlers);this.$clickjack||(this.$clickjack=y('<div class="clickjack-shim" />').appendTo(this.containerEl));"off"===a&&this.walls&&o.each(this.walls,function(a){a.hide()})},_onSelectStepAnchorClick:function(a){a.preventDefault();a=y(a.target).hasClass("btn-active");this.toggleSelectStepAnchor(a?"off":"on");this.model.get("teacher")[a?
"showSteps":"hideSteps"]()},_onCreateModalStepClick:function(a){a.preventDefault();this.model.get("teacher").recordingCreateStep("modal")},_onDocumentMouseover:function(a){var b=y(a.target);if(!b.closest(this.$el).length){a=function(a){return(a=b.css("margin-"+a))&&"0px"!==a?a:""};a("top");a("bottom");a("left");a("right");b.css("border");this.walls||(this.walls={top:y('<div class="recorder-frame-wall top-wall" />').appendTo(this.containerEl),left:y('<div class="recorder-frame-wall left-wall" />').appendTo(this.containerEl),
bottom:y('<div class="recorder-frame-wall bottom-wall" />').appendTo(this.containerEl),right:y('<div class="recorder-frame-wall right-wall" />').appendTo(this.containerEl)});var a=b.offset(),c=b.outerHeight(),d=b.outerWidth();this.walls.top.css({top:a.top-4-3,left:a.left-4-3,height:3,width:d+14}).show();this.walls.left.css({top:a.top-4-3,left:a.left-4-3,height:c+14,width:3}).show();this.walls.bottom.css({top:a.top+c+4,left:a.left-4-3,height:3,width:d+14}).show();this.walls.right.css({top:a.top-4-
3,left:a.left+d+4,height:c+14,width:3}).show()}},_onDocumentMouseout:function(){},_onDocumentMousedown:function(a){a=y(a.target);if(!a.closest(this.containerEl).length)return o.each(this.walls,function(a){a.hide()}),this.$clickjack.css({top:a.offset().top,left:a.offset().left,height:a.outerHeight(),width:a.outerWidth()}).show().data("learnly:target",a),!1},_onDocumentMouseup:function(a){var a=y(a.target),b=this.$clickjack.data("learnly:target");this.$clickjack.hide().removeData("learnly:target");
if(a.get(0)===this.$clickjack.get(0))return this._onDocumentMouseout({target:b}),this.toggleSelectStepAnchor("off"),this.model.get("teacher").recordingCreateStep("contextual",b),!1},_onWorkflowSaving:function(){this.showMessage("Saving...")},_onWorkflowSaved:function(){this.showMessage("Saved!");var a=this;o.delay(function(){a.hideMessage()},2E3)}});var Ka={above:"bottom",below:"top",left:"right",right:"left"};k.widgets.ContextualPopupView=L.View.extend({initialize:function(){this.model.set("draggingEnabled",
!1)},render:function(){this.$el.html(P("contextual-step.html",{isEditable:this.model.get("teacher").isEditing()}));this.$popup=this.$el.find("> .contextual-dialog");this.$arrow=this.$popup.find("> .contextual-dialog-arrow");return this},content:function(a){this.$popup.find(".dialog-header h3").html(a.header).end().find(".dialog-body").html(a.body).end().find(".dialog-footer").find(".workflow-learn-more-show").toggle(a.learnMore).end().find(".pull-right").html(a.footer).end().toggle(this.hasFooterContent()).end().hide().fadeIn();
return this},anchorTo:function(a){this._setArrowSide(a.position);this._setArrowOffset(a.position,a.arrowOffset);return this.adjustPosition(a)},hasFooterContent:function(){var a=this.$popup.find(".dialog-footer .pull-left");return!(!a.length||a.is(":empty")||!a.children(":visible").length)||!this.$popup.find(".dialog-footer .pull-right").is(":empty")},enableDragging:function(){var a=this.model.get("dialogPosition");this.$popup.draggable({containment:"document",handle:".dialog-body, .dialog-header",
start:o.bind(this._onDialogDragStart,this),drag:o.bind(this._onDialogDrag,this),stop:o.bind(this._onDialogDragStop,this)});this.$popup.find(".contextual-dialog-arrow").draggable({containment:"parent",axis:"above"===a||"below"===a?"x":"y",start:o.bind(this._onArrowDragStart,this),stop:o.bind(this._onArrowDragStop,this)});this.model.set("draggingEnabled",!0);return this},adjustPosition:function(a){var b;if(a.anchor&&(b=y(a.anchor))&&b.length&&b.is(":visible")){this.show();var c=y(this.model.get("teacher").model.get("context").getWindow()),
a=this._calculateDialogPosition(b,a.position,a);this.$popup.css(a.css);a.scroll&&c.scrollTo(b,a.scroll)}else this.hide();return this},show:function(){this.$el.show();this.trigger("show");return this},hide:function(){this.$el.hide();this.trigger("hide");return this},isVisible:function(){return this.$el.is(":visible")},_setArrowSide:function(a){var b="above"===a||"below"===a?"left":"top";this.model.set("dialogPosition",a);this.$el.removeClass("contextual-dialog-above contextual-dialog-left contextual-dialog-right contextual-dialog-below").addClass("contextual-dialog-"+
a);this.$popup.removeClass("contextual-dialog-arrow-with-footer-bottom contextual-dialog-arrow-bottom contextual-dialog-arrow-top contextual-dialog-arrow-left contextual-dialog-arrow-right").addClass("above"===a&&this.hasFooterContent()?"contextual-dialog-arrow-with-footer-bottom":"contextual-dialog-arrow-"+Ka[a]);this.model.get("draggingEnabled")&&this.$arrow.draggable("option","axis","left"===b?"x":"y")},_setArrowOffset:function(a,b){this.$arrow.css({left:"",top:""}).css("above"===a||"below"===
a?"left":"top",b)},_calculateDialogPosition:function(a,b,c){var c=o.extend({offsetLeft:0,offsetTop:0,scroll:!0},c),b=a.offset(),d=this.$popup,e=d.outerHeight(),d=d.outerWidth(),h=y(w),f=h.scrollTop(),h=h.scrollLeft(),i=this._isElementPositionFixed(a),k,m;switch(c.position){case "above":k=b.left+a.outerWidth()/2-d/2;m=b.top-e;break;case "below":k=b.left+a.outerWidth()/2-d/2;m=b.top+a.outerHeight();break;case "left":k=b.left-d;m=b.top+a.outerHeight()/2-e/2;break;case "right":k=b.left+a.outerWidth(),
m=b.top+a.outerHeight()/2-e/2}k+=c.offsetLeft;m+=c.offsetTop;return{css:{position:i?"fixed":"absolute",left:i?k-h:k,top:i?m-f:m},scroll:c.scroll?this._calculateScrollPosition(a):null}},_calculateScrollPosition:function(a){var b=y(this.model.get("teacher").model.get("context").getWindow()),c;y.belowthefold(a,{threshold:-100})?c=100-b.height():y.abovethetop(a,{threshold:-100})&&(c=-100);return c?{margin:!0,duration:1E3,offset:{top:c,left:0}}:null},_isElementPositionFixed:function(a){for(var b="fixed"===
a.css("position");!a.filter("body").size()&&!b;)a=a.parent(),b="fixed"===a.css("position");return b},_onDialogDragStart:function(){this.trigger("dragstart");var a=y(this.model.get("teacher").getCurrentStep().get("display").anchor);this.model.get("dialogPosition");var b=a.offset(),c=a.outerHeight(),a=a.outerWidth();this.cache={anchor:{bounds:{left:b.left,top:b.top,right:b.left+a,bottom:b.top+c},midpoints:{top:b.top+c/2,left:b.left+a/2}},popup:{height:this.$popup.outerHeight(),width:this.$popup.outerWidth()},
dialogPosition:this.model.get("dialogPosition"),arrowOffsetPercentage:null}},_onDialogDrag:function(a,b){var c={left:this.cache.anchor.bounds.left>b.position.left+this.cache.popup.width,above:this.cache.anchor.bounds.top>b.position.top+this.cache.popup.height,right:this.cache.anchor.bounds.right<b.position.left,below:this.cache.anchor.bounds.bottom<b.position.top};if(!c[this.cache.dialogPosition]){var d;o.each(c,function(a,b){if(a)return d=b,!1});d&&(this._setArrowSide(d),this.cache.popup={height:this.$popup.outerHeight(),
width:this.$popup.outerWidth()},this.cache.dialogPosition=d)}var e="above"===this.cache.dialogPosition||"below"===this.cache.dialogPosition?"left":"top",c=this.cache.popup["top"===e?"height":"width"],e=(this.cache.anchor.midpoints[e]-b.position[e])/c,e=Math.max(Math.min(e,c/(c+10)),10/(c-10));this.cache.arrowOffsetPercentage=100*e+"%";this._setArrowOffset(this.cache.dialogPosition,this.cache.arrowOffsetPercentage)},_onDialogDragStop:function(a,b){var c,d;this.trigger("dragstop");this.model.set("dialogPosition",
this.cache.dialogPosition);switch(this.cache.dialogPosition){case "above":c=b.position.left-this.cache.anchor.midpoints.left+this.cache.popup.width/2;d=b.position.top-this.cache.anchor.bounds.top+this.cache.popup.height;break;case "below":c=b.position.left-this.cache.anchor.midpoints.left+this.cache.popup.width/2;d=b.position.top-this.cache.anchor.bounds.bottom;break;case "left":c=b.position.left-this.cache.anchor.bounds.left+this.cache.popup.width;d=b.position.top-this.cache.anchor.midpoints.top+
this.cache.popup.height/2;break;case "right":c=b.position.left-this.cache.anchor.bounds.right,d=b.position.top-this.cache.anchor.midpoints.top+this.cache.popup.height/2}this.trigger("update-position",{dialogPosition:this.cache.dialogPosition,arrowOffset:this.cache.arrowOffsetPercentage,offset:{top:d,left:c}});this.cache=null},_onArrowDragStart:function(){this.trigger("dragstart")},_onArrowDragStop:function(a,b){this.trigger("dragstop");var c=this.model.get("dialogPosition"),c="above"===c||"below"===
c?"left":"top";this.trigger("update-position",{arrowOffset:100*b.position[c]/this.$popup["left"===c?"outerWidth":"outerHeight"]()+"%"})}});k.widgets.FixedPopupView=L.View.extend({render:function(){this.$el.html(P("fixed-step.html",{isEditable:this.model.get("teacher").isEditing()}));this.$dialog=this.$el.find(".fixed-dialog");return this},content:function(a){var b=this.$dialog.find(".dialog-footer .pull-left").is(":empty");this.$dialog.find(".dialog-header h3").html(a.header).end().find(".dialog-body").html(a.body).end().find(".dialog-footer").find(".pull-right").html(a.footer||
"").end().toggle(b||!!a.footer).end().fadeIn();return this},position:function(a){var b={top:20,right:20};switch(a){case "top-right-shim":b={top:60,right:20};break;default:b={top:20,right:20}}this.$dialog.css(b);return this},addClass:function(){this.$dialog.addClass.apply(this.$dialog,arguments);return this},removeClass:function(){this.$dialog.removeClass.apply(this.$dialog,arguments);return this},show:function(){this.$el.show();this.trigger("show");return this},hide:function(){this.$el.hide();this.trigger("show");
return this}});k.widgets.WorkflowMapView=k.widgets.ModalView.extend(o.extend({},k.widgets.StepEditorMixin,k.widgets.WysiwygMixin,{events:o.extend({},ka,k.widgets.StepEditorMixinEvents,k.widgets.WysiwygMixinEvents,{"click .go-workflow-map":"_onGoWorkflowMapClick","click .go-workflow-advanced":"_onGoWorkflowAdvancedClick","click .save-workflow":"_onSaveWorkflowClick","click .save-step":"_onSaveStepClick","click .steps-container .step-item":"_onStepItemClick","click .steps-container .step-edit":"_onStepEditClick",
"click .steps-container .step-delete":"_onStepDeleteClick","submit form":"_onFormSubmit"}),initialize:function(){this.teacher=this.model.get("teacher")},show:function(){this.renderWorkflowMap();this.$el.show();this.trigger("show")},renderWorkflowMap:function(){var a=this._getSteps(),b=this.teacher.getCurrentStep();this.model.set("step",null);this._content({header:"Learnlet",body:P("workflow-map-body.html",{steps:a.map(function(a){return{isCurrent:a.cid===b.cid,cid:a.cid,name:a.get("name")||"(No title)",
url:a.getDisplayableUrl(),displayType:a.get("display").medium}})}),footer:'<a href="#" class="btn btn-primary workflow-map-hide">Close</a>'});this.$el.find(".steps-container ul").sortable({containment:"parent",update:o.bind(this._onSortStepUpdate,this)})},renderWorkflowAdvanced:function(){this._content({header:"Learnlet",body:P("workflow-advanced-body.html",{}),footer:'<a href="#" class="save-workflow btn btn-primary">Update</a><a href="#" class="go-workflow-map btn btn-secondary">Cancel</a>'});var a=
this.teacher.getWorkflow();k.widgets.Editor.populate(this,{isShowingGoBack:a.get("isShowingGoBack")})},renderEditStep:function(a){this.model.set("step",a);this._content({header:'<a href="#" class="go-workflow-map">Learnlet</a> / Edit Step',body:this._stepEditorBodyContent(),footer:'<a href="#" class="save-step btn btn-primary">Update</a><a href="#" class="go-workflow-map btn btn-secondary">Cancel</a>'});this._configureWysiwyg(this.$el,this.teacher.$el);a=a.formData();k.widgets.Editor.populate(this,
a);this._stepEditorPopulate(a)},_content:function(a){this.$el.find(".modal-header h3").html(a.header).end().find(".modal-body").html(a.body).end().find(".modal-footer .pull-right").html(a.footer).end()},_getSteps:function(){return this.teacher.getWorkflow().get("sections").at(0).get("steps")},_getStepByCid:function(a){return this._getSteps().getByCid(a)},_getStepIndexFromCid:function(a){var b=this._getSteps(),a=b.getByCid(a);return b.indexOf(a)},_onGoWorkflowMapClick:function(a){a.preventDefault();
this.renderWorkflowMap()},_onGoWorkflowAdvancedClick:function(a){a.preventDefault();this.renderWorkflowAdvanced()},_onSaveWorkflowClick:function(a){a.preventDefault();a=k.widgets.Editor.value(this);this.teacher.getWorkflow().set({isShowingGoBack:!!a.isShowingGoBack});this.teacher.recordingSave();this.renderWorkflowMap()},_onSortStepUpdate:function(a){a=y(a.toElement);a.is("li[data-step]")||(a=a.closest("li[data-step]"));a=a.data("step");this._getStepIndexFromCid(a);var b=this.$el.find('.steps-container ul > li[data-step="'+
a+'"]').prevAll("li").length;this.teacher.recordingReorderStep(this._getStepByCid(a),b)},_onSaveStepClick:function(a){a.preventDefault();var a=k.widgets.Editor.value(this),b=this.model.get("step");b.mergeFormData(a);this.trigger("step-update",{step:b});this.renderWorkflowMap()},_onStepItemClick:function(a){a.preventDefault();a=y(a.currentTarget);this.hide();a.hasClass("current")||this.teacher.navigate({section:0,step:this._getStepIndexFromCid(a.data("step"))})},_onStepEditClick:function(a){this.renderEditStep(this._getStepByCid(y(a.currentTarget).closest("[data-step]").data("step")));
return!1},_onStepDeleteClick:function(a){a=y(a.currentTarget).closest("[data-step]");this.teacher.recordingDeleteStep({section:0,step:this._getStepIndexFromCid(a.data("step"))});a.slideUp();return!1},_onFormSubmit:function(a){a.preventDefault()}}));k.school.EventLoop=L.Model.extend({defaults:function(){return{status:"stopped",pollingInterval:3E3}},initialize:function(){this.timeoutId=null},start:function(){"started"!==this.get("status")&&(this.timeoutId=o.delay(o.bind(this._onPolling,this),this.get("pollingInterval")),
this.set("status","started"))},stop:function(){this.timeoutId&&clearTimeout(this.timeoutId);this.set("status","stopped")},_onPolling:function(){this.trigger("poll");this.timeoutId=o.delay(o.bind(this._onPolling,this),this.get("pollingInterval"))}});k.school.Teacher=L.Model.extend({defaults:{account:null,identity:null,isTrackingOn:!0,hasTrackedActivity:!1,tokens:{},state:null,showingLearnMore:!1,workflow:null,loaded:!1,prevState:null}});k.school.TeacherView=Fa.extend({OBJECT_MAPPINGS:{"main-modal":k.widgets.MainModalView,
"step-modal":k.widgets.StepModalView,"contextual-popup":k.widgets.ContextualPopupView,"fixed-popup":k.widgets.FixedPopupView,"learn-more":k.widgets.StepLearnMoreView,"workflow-map":k.widgets.WorkflowMapView,"description-editor":k.widgets.Editor,"step-editor":k.widgets.StepEditor,"recorder-toolbar":k.widgets.RecorderToolbarView},events:{"click .workflow-start":"_onWorkflowStartClick","click .workflow-prev":"_onWorkflowPrevClick","click .workflow-next":"_onWorkflowNextClick","click .workflow-complete":"_onWorkflowCompleteClick",
"click .workflow-quit":"_onWorkflowQuitClick","click .workflow-transition-to-step":"_onTransitionToStepClick","click .workflow-hide":"_onHideClick","click .workflow-learn-more-show":"_onLearnMoreShow","click .workflow-learn-more-hide":"_onLearnMoreHide","click .workflow-map-show":"_onMapShowClick","click .workflow-map-hide":"_onMapHideClick","click .workflow-description-edit":"_onDescriptionEditClick","click .workflow-step-edit":"_onStepEditClick","click .workflow-step-delete":"_onStepDeleteClick",
"click .workflow-save":"_onWorkflowSaveClick","click .workflow-recording-finish":"_onWorkflowRecordingFinishClick"},initialize:function(){this.ui={};this.visibleUI={};this.communicator=k.communication.getCommunicator(this.$el);this.eventLoop=new k.school.EventLoop;this._startPollForPositioningStep();this.on("refresh-ui",function(){this._render()},this);this.pendingRequestCount=0;this.model.set("isTrackingOn",!this.model.get("cookie").get("__kla_off"));var a=this.model.get("cookie").get("__kla_id");
if(a)try{this.model.set("identity",M.parse(Q.decode(a)))}catch(b){}this.model.on("change:state",this._onStateChange,this);this.model.on("change:identity",this._onIdentityChange,this)},account:function(a){this.model.get("isTrackingOn")&&this.model.set("account",a)},identify:function(a,b){if(!(!1===b&&this.model.get("identity")||!this._identityNeedsUpdate(a)||!this.model.get("account"))){var c=o.extend({},this.model.get("identity"),a);this.model.set("identity",c);this._ajax({type:"GET",url:"api/identify",
data:{data:Q.encode(M.stringify({token:this.model.get("account"),properties:c}))}});this.trackActivity()}},trackActivity:function(){if(!this.model.get("hasTrackedActivity")){this._saveReferrer();this._parseInitialUrl();var a=this.model.get("context"),b=new k.global.Browser(a);this.track("__activity__",{page:a.getLocation().href,browser:b.browser,os:b.os})&&this.model.set("hasTrackedActivity",!0)}},track:function(a,b){var b=b||{},c=this.model.get("account"),d=this.model.get("identity")||{};if(!c||
!d.email&&!d.id&&!d.$email&&!d.$id)return!1;b.$use_ip=!0;b.$is_session_activity=!0;this._ajax({type:"GET",url:"api/track",data:{data:Q.encode(M.stringify({event:a,token:c,properties:b,customer_properties:d}))}});return!0},trackOnce:function(a,b){b=o.extend({__track_once__:!0},b);return this.track(a,b)},start:function(a,b){var c=this;if(a){var d=function(){if(c.model.get("loaded"))c._changeWorkflow(a,{force:!1});else c.on("loaded",o.once(function(){c._changeWorkflow(a,{force:!1})}))};b?o.delay(d,b):
d()}else this._bootstrap()},show:function(){this.$el.show()},hide:function(){this.$el.hide()},next:function(){var a=this.model.get("state").clone(),b=a.get("position"),c=this.getWorkflow().nextValidStep(b);c?(a.set("position",o.extend({},b,c)),this.model.set("state",a)):this.isEditing()||this.complete()},prev:function(a){var b=this.model.get("state").clone(),c=b.get("position"),d=this.getWorkflow().prevValidStep(c);d&&(b.set("position",o.extend({},c,d)),this.model.set("state",b,a))},navigate:function(a){var b=
this.model.get("state").clone();b.set("position",o.extend({},b.get("position"),a));this.model.set("state",b)},complete:function(){k.log("completed workflow!");this.model.set("state",new k.school.State({position:{mode:6,workflow:this.getWorkflow().id}}));this.hide()},quit:function(){k.log("quitting workflow!");this.model.set("state",new k.school.State({position:{mode:0}}));this.hide()},transitionIfNecessary:function(){var a=this.getCurrentStep();a.isCorrectLocation()||this._runWhenIdle(function(){w.location=
a.getUrl()})},showSteps:function(){this.model.get("state").isInProgress()&&this._render()},hideSteps:function(){this.model.get("state").isInProgress()&&(this._hideAll(),this._ui("recorder-toolbar").show())},isEditing:function(){return this.model.get("state").isEditing()},recordingCreateStep:function(a,b){var c=this.getWorkflow(),d=c.isEmpty(),e=this.model.get("state").get("position"),h={display:{medium:a},name:"Here's a step",nextTrigger:0,content:{main:"<p>With exciting text, images and video.</p>"},
location:{href:w.location.href}};switch(a){case "contextual":var f=Da.predictCss(b),i=this._suggestPopupPosition(b);o.extend(h.display,{position:i,arrowOffset:"above"===i||"below"===i?qa:ra,anchor:f});h.nextTrigger=b.is('a, [type="submit"]')||b.closest('a, [type="submit"]').length?2:b.is('input[type="text"], textarea')?4:0}c.createStep(h,{section:e.section,step:d?e.step:e.step+1});this.recordingSave();d?this.trigger("refresh-ui"):this.next()},recordingDeleteStep:function(a){var b=this.getWorkflow();
b.removeStep(a);this.recordingSave();this.getCurrentStep()||b.isEmpty()?this.trigger("refresh-ui"):this.prev({stayOnPage:!0})},recordingReorderStep:function(a,b){var c=this.getWorkflow().getSteps(),d=this.getCurrentStep();c.remove(a);c.add(a,{at:b});this.recordingSave();this.navigate({step:c.indexOf(d)})},recordingSave:function(){var a=this,b=this.getWorkflow();this.trigger("workflow-saving");this._ajax({type:"POST",url:"api/workflows/workflow/"+b.id+"/save",data:{workflow:M.stringify(b)},success:function(){a.trigger("workflow-saved")}})},
_bootstrap:function(){var a=this,b=this.model,c=this._parseInitialUrl(),d=this.$el.find("#__learnly_css_load"),e=this.model.get("context").getDocument().createElement("link");e.rel="stylesheet";e.type="text/css";e.href=k.utils.resourceUrl("css/player/bootstrap/bootstrap.css");y("head").get(0).appendChild(e);var h=o.bind(function(){this._ajax({type:"GET",url:"api/workflows/bootstrap",success:function(d){var e=new k.school.State(d.data.state),h=d.data.workflow&&new k.school.Workflow(d.data.workflow);
b.set("tokens",d.data.tokens||{});c&&(!h||h.id!==c||!e.isOnFirstStep())?a._changeWorkflow(c,{force:!0}):b.get("loaded")||a._finishBootstrap({state:e,workflow:h})}})},this);k.utils.poll(function(a){if(!a&&d.is(":visible"))return!1;h()},200,20)},_changeWorkflow:function(a,b){var b=o.extend({force:!0},b),c=this,d=this.getWorkflow();(b.force||!d||!(d.id===a&&this.model.get("state").isInProgress()))&&this._ajax({type:"GET",url:"api/workflows/workflow/"+a+"/start",success:function(a){if(a.success){var b=
a.data.workflow&&new k.school.Workflow(a.data.workflow),a=new k.school.State(a.data.state);c._finishBootstrap({state:a,workflow:b})}}})},_finishBootstrap:function(a){if(a.state.isInProgress()&&a.workflow){var b=a.state.get("position"),c=a.workflow.getStep(b),d=!1;if(!c||!c.isCorrectLocation())(c=a.workflow.findValidPosition(b))?(a.state.set("position",o.extend({},b,c)),d=!0):!this._isLocationAnException()&&!a.workflow.get("isShowingGoBack")&&!a.state.isEditing()&&(a.state.set("position",{mode:0}),
d=!0)}this.model.set(a,{stayOnPage:!0,forceSave:d});this.show();this.isEditing()&&this._exposeJQuery();this.eventLoop.start();this.trigger("loaded");this.model.set("loaded",!0)},_render:function(a){switch(this.model.get("state").get("position").mode){case 5:this._renderDescription(a);break;case 2:this._isCorrectDomain(this.getWorkflow())&&this._renderStep(a)}},_renderDescription:function(){var a=this.getWorkflow();this._ui("main-modal").content({header:a.get("name"),body:P("workflow-description-body.html",
{name:a.get("name"),content:a.get("description")}),footer:'<a href="#" class="btn btn-primary workflow-start">Start</a> '+(this.isEditing()?'<a href="#" class="btn btn-secondary workflow-description-edit">Edit</a>':"")}).show()},_renderStep:function(a){var a=o.extend({stayOnPage:!1},a),b=this.getWorkflow();this.model.get("state").get("position");var c=this.getCurrentStep(),d=this.isEditing();this._hide(["main-modal","step-modal","fixed-popup","contextual-popup","learn-more"]);this._unbindStep();b.isEmpty()?
(a=this._ui("fixed-popup").addClass("dialog-notice").content({header:"Let's get started",body:'<p>Choose "Add callout" or "Add grayout" from the toolbar above.</p>',footer:""}).show(),a.position(d?"top-right-shim":"top-right")):c.isCorrectUrl()?this._renderStepContent():a.stayOnPage?this._renderWrongLocation():this.transitionIfNecessary();d&&this._ui("recorder-toolbar").show()},_renderStepContent:function(){var a=this.getWorkflow(),b=this.model.get("state").get("position"),c=this.getCurrentStep(),
d=this.isEditing(),e="";c.isShowingNextButton()&&(e=a.isLastPosition(b)?'<a href="#" class="btn btn-primary workflow-complete '+(d?"disabled":"")+'">Done</a>':'<a href="#" class="btn btn-primary workflow-next">Next</a>');a={header:c.get("name"),body:c.get("content").main,footer:e,learnMore:!!c.get("content").learnMore};c.isContextual()?(a=this._ui("contextual-popup").content(a).anchorTo(c.get("display")),this._bindStep(c),d&&a.enableDragging()):this._ui("step-modal").content(a).show()},_renderStepLearnMore:function(){this.getWorkflow();
var a=this.getCurrentStep().get("content");this._hide(["main-modal","step-modal","fixed-popup","contextual-popup"]);this._ui("learn-more").content({header:a.learnMoreHeader||"Learn more...",body:a.learnMore,footer:'<a href="#" class="btn btn-primary workflow-learn-more-hide">Close</a>'}).show()},_renderWrongLocation:function(){this.getWorkflow();var a=this.model.get("context").getLocation().href,a=this.isEditing()?{header:"We're on a new page.",body:"<p>Add more steps or you can go back to the last page by clicking below.</p>",
footer:'<a href="#" class="btn btn-secondary workflow-transition-to-step">Go back</a>'}:sa.test(a)?{header:"We're on the login page.",body:"<p>This means you need to login before we can continue. Don't worry, we'll wait here while you take care of that.</p>",footer:'<a href="#" class="btn btn-secondary workflow-quit">Quit</a>'}:{header:"We seem to be in the wrong place.",body:"<p>That's okay. It's likely because you clicked away. We can take you back to where you were or if you're done, you can quit.</p>",
footer:'<a href="#" class="btn btn-secondary workflow-transition-to-step">Go back</a> <a href="#" class="btn btn-secondary workflow-quit">Quit</a>'};this._ui("fixed-popup").addClass("dialog-notice").content(a).show().position(this.isEditing()?"top-right-shim":"top-right")},_isCorrectDomain:function(a){var a=a.get("allowedDomains"),b=this.model.get("context").getLocation().href,c=this.model.get("context").getLocation().hostname,d=!1;if(!0===a||Ja.test(c))return!0;o.each(a,function(a){if(RegExp(k.utils.sanitizeSimpleRegExp(a)+
"/","ig").test(b))return d=!0,!1});return d},_unbindStep:function(){var a=this;o.each(this.stepListeners,function(b){y(a.model.get("context").getDocument().body).off(b.event,b.selector,b.fn)});this.stepListeners=[]},_bindStep:function(a){var b=this;switch(a.get("nextTrigger")){case 1:this.stepListeners.push({event:"click",selector:a.get("display").anchor,fn:o.bind(function(){this.next()},this)});break;case 3:this.stepListeners.push({event:"mouseover",selector:a.get("display").anchor,fn:o.bind(function(){this.next()},
this)});break;case 4:this.stepListeners.push({event:"keypress",selector:a.get("display").anchor,fn:o.bind(function(){this.next()},this)})}o.each(this.stepListeners,function(a){y(b.model.get("context").getDocument().body).on(a.event,a.selector,a.fn)})},_positionStep:function(){var a=this.getCurrentStep();if(a&&a.isCorrectLocation()&&a.isContextual()&&!this.model.get("showingLearnMore"))if(a=o.clone(a.get("display")),y(a.anchor).is(":visible")){var b=this._ui("contextual-popup");a.scroll=!b.isVisible();
b.show().anchorTo(a)}else(a=this._getPreviousStep())&&3===a.get("nextTrigger")&&this.prev()},_showDescriptionEditor:function(){var a=this.getWorkflow();this._ui("description-editor").populate({name:a.get("name"),content:a.get("description")}).show();this._ui("main-modal").hide()},_hideDescriptionEditor:function(){this._ui("description-editor").hide();this._ui("main-modal").show()},_saveDescription:function(a){a=a.editor.value();this.getWorkflow().set({name:a.name,description:a.content});this._hide("description-editor");
this._renderDescription()},_showStepEditor:function(){var a=this.getCurrentStep();this._ui("step-editor").populate(a.formData()).show()},_hideStepEditor:function(){this._hide("step-editor")},_saveStep:function(a){a=a.editor.value();this.getCurrentStep().mergeFormData(a);this._hide("step-editor");this.recordingSave();this.trigger("refresh-ui")},_saveStepPosition:function(a){var b=this.getCurrentStep(),c=b.get("display"),d=c.offsetLeft||0,e=c.offsetTop||0;o.extend(c,{position:a.dialogPosition||c.position,
offsetLeft:a.offset?a.offset.left:d,offsetTop:a.offset?a.offset.top:e,arrowOffset:a.arrowOffset||c.arrowOffset});b.set("display",c);this.recordingSave()},_showReturnDialog:function(){var a=this.getWorkflow(),a=k.LEARNING_DOMAIN+"/learnlet/"+a.id+"/"+a.get("slugifiedName");this._hideAll();this._ui("main-modal").content({header:"Do you want to go back to Klaviyo?",body:P("return-to-klaviyo-body.html",{}),footer:'<a href="'+a+'" class="btn btn-primary">Back to Klaviyo</a> <a href="#" class="btn btn-secondary workflow-hide">Stay here</a>'}).show()},
getWorkflow:function(){return this.model.get("workflow")},getCurrentStep:function(){var a=this.model.get("state");return!a.isInProgress()?void 0:this.getWorkflow().getStep(a.get("position"))},_getPreviousStep:function(){var a=this.model.get("state");return!a.isInProgress()?void 0:this.getWorkflow().getPrevStep(a.get("position"))},_getNextStep:function(){var a=this.model.get("state");return!a.isInProgress()?void 0:this.getWorkflow().getNextStep(a.get("position"))},_saveState:function(){this._ajax({type:"POST",
url:"api/workflows/my/state",data:{state:M.stringify(this.model.get("state"))}})},_saveReferrer:function(){var a=o.extend({},this.model.get("identity"));a.$referrer||(a.$referrer={ts:k.utils.utcnow(),value:this.model.get("context").getReferrer(),first_page:this.model.get("context").getLocation().href},this.model.set("identity",a))},_ajax:function(a){a.url=k.utils.url(a.url);var b={},c=this.model.get("tokens");"POST"===a.type&&c.csrfToken&&(b["X-CSRFToken"]=c.csrfToken);a.data=o.extend({a:this.model.get("account")},
a.data);this.communicator.request(o.extend({cache:!1,headers:b,dataType:"json",xhrFields:{withCredentials:!0}},a)).done(o.bind(function(){this.pendingRequestCount--;k.log("Decrementing request count:",this.pendingRequestCount)},this));this.pendingRequestCount++;k.log("Incrementing request count:",this.pendingRequestCount)},_runWhenIdle:function(a){var b=this,c=function(d){d=d||0;k.log("Req count:",b.pendingRequestCount,"Tries:",d);b.pendingRequestCount&&20>d?o.delay(c,200,++d):a()};c()},_ui:function(a){if(!this.ui[a]){var b=
y("<div />").addClass(a+"-widget").appendTo(this.$el),c=this.getWorkflow().get("theme");c&&b.addClass(c);this.ui[a]=new this.OBJECT_MAPPINGS[a]({el:b.get(0),model:new L.Model({teacher:this})});this.ui[a].on("show",function(){this._trackShow(a)},this).on("hide",function(){this._trackHide(a)},this).render();switch(a){case "description-editor":this.ui[a].on("close",this._hideDescriptionEditor,this);this.ui[a].on("save",this._saveDescription,this);break;case "step-editor":this.ui[a].on("close",this._hideStepEditor,
this);this.ui[a].on("save",this._saveStep,this);break;case "contextual-popup":this.ui[a].on("dragstart",this._stopPollForPositioningStep,this);this.ui[a].on("dragstop",this._startPollForPositioningStep,this);this.ui[a].on("update-position",this._saveStepPosition,this);break;case "recorder-toolbar":this.ui[a].on("selectstepstart",this._stopPollForPositioningStep,this);this.ui[a].on("selectstepstop",this._startPollForPositioningStep,this);break;case "workflow-map":this.ui[a].on("step-update",function(a){this.recordingSave();
this.getCurrentStep().cid===a.step.cid&&this.trigger("refresh-ui")},this)}}return this.ui[a]},_trackShow:function(a){this.visibleUI[a]=!0},_trackHide:function(a){delete this.visibleUI[a]},_hide:function(a){var a=o.isArray(a)?a:[a],b=this;o.each(a,function(a){b.ui[a]&&b.ui[a].hide()})},_hideAll:function(){var a=this;o.each(this.visibleUI,function(b,c){a.ui[c]&&a.ui[c].hide()})},_parseInitialUrl:function(){var a=this.model.get("context").getLocation(),b=a.hash.match(Ia),c=a.search.match(/utm_email=([^#&]+)/i);
c&&this.identify({$email:decodeURIComponent(c[1])});(c=a.search.match(/_ke=([^#&]+)/i))&&this.identify({$email:Q.decode(decodeURIComponent(c[1]))});return b?b[1]:null},_isLocationAnException:function(){var a=(new k.global.Context).getLocation().href;return sa.test(a)},_suggestPopupPosition:function(a){a=y(a);a=a.offset();return 200>a.top?100>a.left?"right":"below":100>a.left?"right":"above"},_exposeJQuery:function(){k.log("Exposing jQuery");(new k.global.Context).getWindow().__learn$=y},_identityNeedsUpdate:function(a){var b=
this.model.get("identity"),a=o.extend({},b,a);return!b||!o.isEqual(b,a)},_onStateChange:function(a,b,c){a=this.model.previous("state");if(!b.equals(a)||c.forceSave)this.model.set("prevState",a),(a||c.forceSave)&&this._saveState(),this._render(c)},_onIdentityChange:function(a,b){this.model.get("cookie").set("__kla_id",Q.encode(M.stringify(b)),{daysToExpire:730})},_onWorkflowStartClick:function(a){a.preventDefault();a=this.model.get("state").clone();a.set("position",{mode:2,workflow:this.getWorkflow().id,
step:0,section:0});this.model.set("state",a,{stayOnPage:!0})},_onWorkflowPrevClick:function(a){a.preventDefault();this.prev()},_onWorkflowNextClick:function(a){a.preventDefault();this.next()},_onWorkflowCompleteClick:function(a){a.preventDefault();y(a.target).hasClass("disabled")||this.complete()},_onWorkflowQuitClick:function(a){a.preventDefault();y(a.target).hasClass("disabled")||this.quit()},_onTransitionToStepClick:function(a){a.preventDefault();this.transitionIfNecessary()},_onHideClick:function(a){a.preventDefault();
this.hide()},_onLearnMoreShow:function(a){a.preventDefault();this.model.set("showingLearnMore",!0);this._renderStepLearnMore()},_onLearnMoreHide:function(a){a.preventDefault();this.model.set("showingLearnMore",!1);this._renderStep()},_onMapShowClick:function(a){a.preventDefault();this._ui("workflow-map").show()},_onMapHideClick:function(a){a.preventDefault();this._ui("workflow-map").hide()},_onDescriptionEditClick:function(a){a.preventDefault();this._showDescriptionEditor()},_onStepEditClick:function(a){a.preventDefault();
this._showStepEditor()},_onStepDeleteClick:function(a){a.preventDefault();this.recordingDeleteStep(this.model.get("state").get("position"))},_onWorkflowSaveClick:function(a){a.preventDefault();this.isEditing()&&this.recordingSave()},_onWorkflowRecordingFinishClick:function(a){a.preventDefault();this.model.set("state",new k.school.State({position:{mode:0}}));this._showReturnDialog()},_stopPollForPositioningStep:function(){this.eventLoop.off("poll",this._positionStep,this)},_startPollForPositioningStep:function(){this.eventLoop.on("poll",
this._positionStep,this)}});var La=function(){function a(a){if("function"==typeof a)a(d,k);else if(o.isArray(a)&&a&&d[a[0]])return d[a[0]].apply(d,a.slice(1))}if(!document.getElementById("__learnly_global")){var b=y('<div id="__learnly_global" class="learnly-scoped"><div id="__learnly_css_load" /></div>');y(document.body).append(b);var c=new k.global.Context,d=new k.school.TeacherView({el:b,model:new k.school.Teacher({cookie:new k.Cookie(c),context:c})}),b=c.getWindow(),e=b._learnq;o.isArray(e)||
(b._learnq=[],e=b._learnq);var h=!1;y(function(){h||(h=!0,k.log("Ready. Processing LEARNQ."),function(){for(o.each(e,function(b){o.isArray(b)&&b&&o.contains(["account","identify"],b[0])&&a(b)});e.length;)a(e.shift());e.push=a}())});/(gaggleamp|localytics)/.test(c.getLocation().toString())&&e.push(["start"]);e.push(["trackActivity"])}};k.utils.poll(function(a){if(document.body||a)La();else return!1},100,40)})(window);
